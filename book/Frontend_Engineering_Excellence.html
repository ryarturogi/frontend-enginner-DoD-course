<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="AI-Assisted Compilation" />
  <meta name="dcterms.date" content="2025-01-01" />
  <meta name="description" content="This comprehensive guide transforms intermediate frontend developers into senior engineers capable of building and leading enterprise-grade applications. Through practical examples, real-world case studies, and battle-tested patterns, you’ll master production-ready development, enterprise architecture, and technical leadership." />
  <title>Frontend Engineering Excellence: A Comprehensive Guide to Production-Ready Development</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="ebook-styles.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Frontend Engineering Excellence: A Comprehensive Guide
to Production-Ready Development</h1>
<p class="subtitle">A complete handbook for mid to senior frontend
engineers building enterprise-grade applications</p>
<p class="author">AI-Assisted Compilation</p>
<p class="date">2025</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a
href="#frontend-engineering-excellence-a-comprehensive-guide-to-production-ready-development"
id="toc-frontend-engineering-excellence-a-comprehensive-guide-to-production-ready-development">Frontend
Engineering Excellence: A Comprehensive Guide to Production-Ready
Development</a></li>
<li><a href="#frontend-engineering-excellence"
id="toc-frontend-engineering-excellence">Frontend Engineering
Excellence</a>
<ul>
<li><a href="#a-comprehensive-guide-to-production-ready-development"
id="toc-a-comprehensive-guide-to-production-ready-development">A
Comprehensive Guide to Production-Ready Development</a></li>
<li><a href="#foreword" id="toc-foreword">Foreword</a></li>
<li><a href="#introduction-the-modern-frontend-engineer"
id="toc-introduction-the-modern-frontend-engineer">Introduction: The
Modern Frontend Engineer</a>
<ul>
<li><a href="#who-this-book-is-for" id="toc-who-this-book-is-for">Who
This Book Is For</a></li>
<li><a href="#what-makes-this-different"
id="toc-what-makes-this-different">What Makes This Different</a></li>
<li><a href="#the-journey-ahead" id="toc-the-journey-ahead">The Journey
Ahead</a></li>
<li><a href="#how-to-use-this-book" id="toc-how-to-use-this-book">How to
Use This Book</a></li>
<li><a href="#code-examples-and-practical-application"
id="toc-code-examples-and-practical-application">Code Examples and
Practical Application</a></li>
<li><a href="#your-growth-path" id="toc-your-growth-path">Your Growth
Path</a></li>
<li><a href="#the-impact-youll-make" id="toc-the-impact-youll-make">The
Impact You’ll Make</a></li>
<li><a href="#lets-begin" id="toc-lets-begin">Let’s Begin</a></li>
</ul></li>
<li><a href="#how-to-navigate-this-book"
id="toc-how-to-navigate-this-book">How to Navigate This Book</a>
<ul>
<li><a href="#difficulty-progression"
id="toc-difficulty-progression">Difficulty Progression</a></li>
<li><a href="#practical-elements" id="toc-practical-elements">Practical
Elements</a></li>
<li><a href="#time-investment" id="toc-time-investment">Time
Investment</a></li>
</ul></li>
</ul></li>
<li><a href="#table-of-contents" id="toc-table-of-contents">Table of
Contents</a>
<ul>
<li><a href="#part-i-foundation-mindset-pages-1-45"
id="toc-part-i-foundation-mindset-pages-1-45">Part I: Foundation &amp;
Mindset (Pages 1-45)</a>
<ul>
<li><a href="#chapter-1-production-ready-mindset-pages-1-8"
id="toc-chapter-1-production-ready-mindset-pages-1-8">Chapter 1:
Production-Ready Mindset (Pages 1-8)</a></li>
<li><a href="#chapter-2-definition-of-done-excellence-pages-9-16"
id="toc-chapter-2-definition-of-done-excellence-pages-9-16">Chapter 2:
Definition of Done Excellence (Pages 9-16)</a></li>
<li><a href="#chapter-3-testing-strategies-for-enterprise-pages-17-28"
id="toc-chapter-3-testing-strategies-for-enterprise-pages-17-28">Chapter
3: Testing Strategies for Enterprise (Pages 17-28)</a></li>
<li><a href="#chapter-4-testing-implementation-mastery-pages-29-36"
id="toc-chapter-4-testing-implementation-mastery-pages-29-36">Chapter 4:
Testing Implementation Mastery (Pages 29-36)</a></li>
<li><a href="#chapter-5-code-excellence-architecture-pages-37-45"
id="toc-chapter-5-code-excellence-architecture-pages-37-45">Chapter 5:
Code Excellence &amp; Architecture (Pages 37-45)</a></li>
</ul></li>
<li><a href="#part-ii-production-excellence-pages-46-90"
id="toc-part-ii-production-excellence-pages-46-90">Part II: Production
Excellence (Pages 46-90)</a>
<ul>
<li><a href="#chapter-6-performance-monitoring-intelligence-pages-46-58"
id="toc-chapter-6-performance-monitoring-intelligence-pages-46-58">Chapter
6: Performance &amp; Monitoring Intelligence (Pages 46-58)</a></li>
<li><a href="#chapter-7-security-accessibility-excellence-pages-59-71"
id="toc-chapter-7-security-accessibility-excellence-pages-59-71">Chapter
7: Security &amp; Accessibility Excellence (Pages 59-71)</a></li>
<li><a href="#chapter-8-documentation-knowledge-management-pages-72-79"
id="toc-chapter-8-documentation-knowledge-management-pages-72-79">Chapter
8: Documentation &amp; Knowledge Management (Pages 72-79)</a></li>
<li><a href="#chapter-9-team-workflow-collaboration-pages-80-90"
id="toc-chapter-9-team-workflow-collaboration-pages-80-90">Chapter 9:
Team Workflow &amp; Collaboration (Pages 80-90)</a></li>
</ul></li>
<li><a href="#part-iii-enterprise-architecture-pages-91-135"
id="toc-part-iii-enterprise-architecture-pages-91-135">Part III:
Enterprise Architecture (Pages 91-135)</a>
<ul>
<li><a href="#chapter-10-enterprise-project-architecture-pages-91-105"
id="toc-chapter-10-enterprise-project-architecture-pages-91-105">Chapter
10: Enterprise Project Architecture (Pages 91-105)</a></li>
<li><a href="#chapter-11-advanced-architecture-patterns-pages-106-120"
id="toc-chapter-11-advanced-architecture-patterns-pages-106-120">Chapter
11: Advanced Architecture Patterns (Pages 106-120)</a></li>
<li><a href="#chapter-12-devops-deployment-excellence-pages-121-135"
id="toc-chapter-12-devops-deployment-excellence-pages-121-135">Chapter
12: DevOps &amp; Deployment Excellence (Pages 121-135)</a></li>
</ul></li>
<li><a href="#part-iv-advanced-engineering-leadership-pages-136-180"
id="toc-part-iv-advanced-engineering-leadership-pages-136-180">Part IV:
Advanced Engineering Leadership (Pages 136-180)</a>
<ul>
<li><a href="#chapter-13-observability-intelligence-pages-136-150"
id="toc-chapter-13-observability-intelligence-pages-136-150">Chapter 13:
Observability &amp; Intelligence (Pages 136-150)</a></li>
<li><a href="#chapter-14-performance-engineering-mastery-pages-151-165"
id="toc-chapter-14-performance-engineering-mastery-pages-151-165">Chapter
14: Performance Engineering Mastery (Pages 151-165)</a></li>
<li><a href="#chapter-15-career-advancement-leadership-pages-166-180"
id="toc-chapter-15-career-advancement-leadership-pages-166-180">Chapter
15: Career Advancement &amp; Leadership (Pages 166-180)</a></li>
</ul></li>
<li><a href="#appendices-pages-181-200"
id="toc-appendices-pages-181-200">Appendices (Pages 181-200)</a>
<ul>
<li><a href="#appendix-a-technology-stack-reference"
id="toc-appendix-a-technology-stack-reference">Appendix A: Technology
Stack Reference</a></li>
<li><a href="#appendix-b-performance-optimization-checklist"
id="toc-appendix-b-performance-optimization-checklist">Appendix B:
Performance Optimization Checklist</a></li>
<li><a href="#appendix-c-security-best-practices-checklist"
id="toc-appendix-c-security-best-practices-checklist">Appendix C:
Security Best Practices Checklist</a></li>
<li><a href="#appendix-d-code-review-guidelines"
id="toc-appendix-d-code-review-guidelines">Appendix D: Code Review
Guidelines</a></li>
<li><a href="#appendix-e-interview-preparation-resources"
id="toc-appendix-e-interview-preparation-resources">Appendix E:
Interview Preparation Resources</a></li>
<li><a href="#appendix-f-further-reading-and-resources"
id="toc-appendix-f-further-reading-and-resources">Appendix F: Further
Reading and Resources</a></li>
</ul></li>
</ul></li>
<li><a href="#chapter-1-production-ready-mindset"
id="toc-chapter-1-production-ready-mindset">Chapter 1: Production-Ready
Mindset 🟢</a>
<ul>
<li><a href="#the-shift-from-works-on-my-machine-to-works-for-everyone"
id="toc-the-shift-from-works-on-my-machine-to-works-for-everyone">The
Shift from “Works on My Machine” to “Works for Everyone”</a>
<ul>
<li><a href="#key-insight-production-vs.-development-mindset"
id="toc-key-insight-production-vs.-development-mindset">💡 Key Insight:
Production vs. Development Mindset</a></li>
</ul></li>
<li><a href="#understanding-production-complexity"
id="toc-understanding-production-complexity">Understanding Production
Complexity</a>
<ul>
<li><a href="#the-hidden-challenges" id="toc-the-hidden-challenges">The
Hidden Challenges</a></li>
<li><a href="#production-realities-checklist"
id="toc-production-realities-checklist">Production Realities
Checklist</a></li>
</ul></li>
<li><a href="#quality-gates-your-production-safety-net"
id="toc-quality-gates-your-production-safety-net">Quality Gates: Your
Production Safety Net</a>
<ul>
<li><a href="#implementing-non-functional-requirements"
id="toc-implementing-non-functional-requirements">Implementing
Non-Functional Requirements</a></li>
<li><a href="#automated-quality-enforcement"
id="toc-automated-quality-enforcement">Automated Quality
Enforcement</a></li>
</ul></li>
<li><a href="#building-for-scale-and-maintainability"
id="toc-building-for-scale-and-maintainability">Building for Scale and
Maintainability</a>
<ul>
<li><a href="#the-technical-debt-investment-model"
id="toc-the-technical-debt-investment-model">The Technical Debt
Investment Model</a></li>
<li><a href="#sustainable-code-practices"
id="toc-sustainable-code-practices">Sustainable Code Practices</a></li>
</ul></li>
<li><a href="#common-pitfalls-development-to-production"
id="toc-common-pitfalls-development-to-production">⚠️ Common Pitfalls:
Development to Production</a>
<ul>
<li><a href="#pitfall-1-ignoring-edge-cases"
id="toc-pitfall-1-ignoring-edge-cases">Pitfall #1: Ignoring Edge
Cases</a></li>
<li><a href="#pitfall-2-performance-optimizations-that-dont-matter"
id="toc-pitfall-2-performance-optimizations-that-dont-matter">Pitfall
#2: Performance Optimizations That Don’t Matter</a></li>
<li><a href="#pitfall-3-building-for-current-team-size"
id="toc-pitfall-3-building-for-current-team-size">Pitfall #3: Building
for Current Team Size</a></li>
<li><a href="#pitfall-4-assuming-perfect-conditions"
id="toc-pitfall-4-assuming-perfect-conditions">Pitfall #4: Assuming
Perfect Conditions</a></li>
</ul></li>
<li><a href="#implementation-guide-production-checklist"
id="toc-implementation-guide-production-checklist">🛠️ Implementation
Guide: Production Checklist</a>
<ul>
<li><a href="#pre-production-checklist"
id="toc-pre-production-checklist">Pre-Production Checklist</a></li>
<li><a href="#monitoring-and-alerting-setup"
id="toc-monitoring-and-alerting-setup">Monitoring and Alerting
Setup</a></li>
</ul></li>
</ul></li>
<li><a href="#chapter-2-definition-of-done-excellence"
id="toc-chapter-2-definition-of-done-excellence">Chapter 2: Definition
of Done Excellence 🟢</a>
<ul>
<li><a href="#beyond-it-works-creating-comprehensive-dod"
id="toc-beyond-it-works-creating-comprehensive-dod">Beyond “It Works”:
Creating Comprehensive DoD</a>
<ul>
<li><a href="#key-insight-dod-as-a-quality-multiplier"
id="toc-key-insight-dod-as-a-quality-multiplier">💡 Key Insight: DoD as
a Quality Multiplier</a></li>
</ul></li>
<li><a href="#the-four-dimensions-of-done"
id="toc-the-four-dimensions-of-done">The Four Dimensions of Done</a>
<ul>
<li><a href="#functional-completeness"
id="toc-functional-completeness">1. Functional Completeness</a></li>
<li><a href="#non-functional-excellence"
id="toc-non-functional-excellence">2. Non-Functional Excellence</a></li>
<li><a href="#code-quality-standards" id="toc-code-quality-standards">3.
Code Quality Standards</a></li>
<li><a href="#operational-readiness" id="toc-operational-readiness">4.
Operational Readiness</a></li>
</ul></li>
<li><a href="#dod-implementation-framework"
id="toc-dod-implementation-framework">DoD Implementation Framework</a>
<ul>
<li><a href="#creating-team-specific-dod"
id="toc-creating-team-specific-dod">Creating Team-Specific DoD</a></li>
<li><a href="#automated-dod-validation"
id="toc-automated-dod-validation">Automated DoD Validation</a></li>
</ul></li>
<li><a href="#dod-metrics-and-continuous-improvement"
id="toc-dod-metrics-and-continuous-improvement">DoD Metrics and
Continuous Improvement</a>
<ul>
<li><a href="#measuring-dod-effectiveness"
id="toc-measuring-dod-effectiveness">Measuring DoD
Effectiveness</a></li>
<li><a href="#dod-evolution-process" id="toc-dod-evolution-process">DoD
Evolution Process</a></li>
</ul></li>
<li><a href="#common-dod-anti-patterns"
id="toc-common-dod-anti-patterns">⚠️ Common DoD Anti-Patterns</a>
<ul>
<li><a href="#anti-pattern-1-checklist-theater"
id="toc-anti-pattern-1-checklist-theater">Anti-Pattern #1: Checklist
Theater</a></li>
<li><a href="#anti-pattern-2-one-size-fits-all"
id="toc-anti-pattern-2-one-size-fits-all">Anti-Pattern #2:
One-Size-Fits-All</a></li>
<li><a href="#anti-pattern-3-manual-only-validation"
id="toc-anti-pattern-3-manual-only-validation">Anti-Pattern #3:
Manual-Only Validation</a></li>
<li><a href="#anti-pattern-4-perfection-paralysis"
id="toc-anti-pattern-4-perfection-paralysis">Anti-Pattern #4: Perfection
Paralysis</a></li>
</ul></li>
<li><a href="#implementation-guide-dod-workshop"
id="toc-implementation-guide-dod-workshop">🛠️ Implementation Guide: DoD
Workshop</a>
<ul>
<li><a href="#minute-dod-creation-workshop"
id="toc-minute-dod-creation-workshop">90-Minute DoD Creation
Workshop</a></li>
<li><a href="#dod-template-for-teams"
id="toc-dod-template-for-teams">DoD Template for Teams</a></li>
</ul></li>
</ul></li>
<li><a href="#chapter-3-testing-strategies-for-enterprise"
id="toc-chapter-3-testing-strategies-for-enterprise">Chapter 3: Testing
Strategies for Enterprise 🟡</a>
<ul>
<li><a href="#the-testing-pyramid-for-frontend-applications"
id="toc-the-testing-pyramid-for-frontend-applications">The Testing
Pyramid for Frontend Applications</a>
<ul>
<li><a href="#key-insight-testing-roi-optimization"
id="toc-key-insight-testing-roi-optimization">💡 Key Insight: Testing
ROI Optimization</a></li>
</ul></li>
<li><a href="#the-modern-frontend-testing-pyramid"
id="toc-the-modern-frontend-testing-pyramid">The Modern Frontend Testing
Pyramid</a></li>
<li><a href="#unit-testing-excellence"
id="toc-unit-testing-excellence">Unit Testing Excellence</a>
<ul>
<li><a href="#testing-react-components-with-purpose"
id="toc-testing-react-components-with-purpose">Testing React Components
with Purpose</a></li>
<li><a href="#testing-custom-hooks"
id="toc-testing-custom-hooks">Testing Custom Hooks</a></li>
</ul></li>
<li><a href="#integration-testing-excellence"
id="toc-integration-testing-excellence">Integration Testing
Excellence</a>
<ul>
<li><a href="#testing-component-integration"
id="toc-testing-component-integration">Testing Component
Integration</a></li>
<li><a href="#mock-service-worker-setup"
id="toc-mock-service-worker-setup">Mock Service Worker Setup</a></li>
</ul></li>
<li><a href="#end-to-end-testing-with-playwright"
id="toc-end-to-end-testing-with-playwright">End-to-End Testing with
Playwright</a>
<ul>
<li><a href="#critical-user-journey-testing"
id="toc-critical-user-journey-testing">Critical User Journey
Testing</a></li>
<li><a href="#cross-browser-testing-configuration"
id="toc-cross-browser-testing-configuration">Cross-Browser Testing
Configuration</a></li>
</ul></li>
<li><a href="#visual-regression-testing"
id="toc-visual-regression-testing">Visual Regression Testing</a>
<ul>
<li><a href="#storybook-chromatic-setup"
id="toc-storybook-chromatic-setup">Storybook + Chromatic Setup</a></li>
<li><a href="#automated-visual-testing-pipeline"
id="toc-automated-visual-testing-pipeline">Automated Visual Testing
Pipeline</a></li>
</ul></li>
<li><a href="#common-testing-anti-patterns"
id="toc-common-testing-anti-patterns">⚠️ Common Testing
Anti-Patterns</a>
<ul>
<li><a href="#anti-pattern-1-testing-implementation-details"
id="toc-anti-pattern-1-testing-implementation-details">Anti-Pattern #1:
Testing Implementation Details</a></li>
<li><a href="#anti-pattern-2-brittle-e2e-tests"
id="toc-anti-pattern-2-brittle-e2e-tests">Anti-Pattern #2: Brittle E2E
Tests</a></li>
<li><a href="#anti-pattern-3-no-test-data-management"
id="toc-anti-pattern-3-no-test-data-management">Anti-Pattern #3: No Test
Data Management</a></li>
<li><a href="#anti-pattern-4-over-mocking"
id="toc-anti-pattern-4-over-mocking">Anti-Pattern #4:
Over-Mocking</a></li>
</ul></li>
<li><a href="#implementation-guide-testing-setup"
id="toc-implementation-guide-testing-setup">🛠️ Implementation Guide:
Testing Setup</a>
<ul>
<li><a href="#project-setup-script"
id="toc-project-setup-script">Project Setup Script</a></li>
<li><a href="#testing-standards-document"
id="toc-testing-standards-document">Testing Standards Document</a></li>
</ul></li>
</ul></li>
<li><a href="#chapter-4-testing-implementation-mastery"
id="toc-chapter-4-testing-implementation-mastery">Chapter 4: Testing
Implementation Mastery 🟡</a>
<ul>
<li><a href="#test-driven-development-in-practice"
id="toc-test-driven-development-in-practice">Test-Driven Development in
Practice</a>
<ul>
<li><a href="#key-insight-tdd-as-a-design-tool"
id="toc-key-insight-tdd-as-a-design-tool">💡 Key Insight: TDD as a
Design Tool</a></li>
</ul></li>
<li><a href="#the-tdd-cycle-red-green-refactor"
id="toc-the-tdd-cycle-red-green-refactor">The TDD Cycle:
Red-Green-Refactor</a>
<ul>
<li><a href="#implementing-a-feature-with-tdd"
id="toc-implementing-a-feature-with-tdd">Implementing a Feature with
TDD</a></li>
<li><a href="#advanced-tdd-outside-in-development"
id="toc-advanced-tdd-outside-in-development">Advanced TDD: Outside-In
Development</a></li>
</ul></li>
<li><a href="#mock-strategies-and-data-management"
id="toc-mock-strategies-and-data-management">Mock Strategies and Data
Management</a>
<ul>
<li><a href="#effective-mocking-patterns"
id="toc-effective-mocking-patterns">Effective Mocking Patterns</a></li>
<li><a href="#test-data-builders" id="toc-test-data-builders">Test Data
Builders</a></li>
</ul></li>
<li><a href="#performance-testing-frontend-applications"
id="toc-performance-testing-frontend-applications">Performance Testing
Frontend Applications</a>
<ul>
<li><a href="#load-testing-react-components"
id="toc-load-testing-react-components">Load Testing React
Components</a></li>
<li><a href="#bundle-size-testing" id="toc-bundle-size-testing">Bundle
Size Testing</a></li>
</ul></li>
<li><a href="#accessibility-testing-automation"
id="toc-accessibility-testing-automation">Accessibility Testing
Automation</a>
<ul>
<li><a href="#comprehensive-a11y-testing"
id="toc-comprehensive-a11y-testing">Comprehensive A11y Testing</a></li>
<li><a href="#custom-accessibility-matchers"
id="toc-custom-accessibility-matchers">Custom Accessibility
Matchers</a></li>
</ul></li>
<li><a href="#common-testing-implementation-pitfalls"
id="toc-common-testing-implementation-pitfalls">⚠️ Common Testing
Implementation Pitfalls</a>
<ul>
<li><a href="#pitfall-1-testing-too-late-in-development"
id="toc-pitfall-1-testing-too-late-in-development">Pitfall #1: Testing
Too Late in Development</a></li>
<li><a href="#pitfall-2-ignoring-test-performance"
id="toc-pitfall-2-ignoring-test-performance">Pitfall #2: Ignoring Test
Performance</a></li>
<li><a href="#pitfall-3-inconsistent-test-data"
id="toc-pitfall-3-inconsistent-test-data">Pitfall #3: Inconsistent Test
Data</a></li>
<li><a href="#pitfall-4-not-testing-edge-cases"
id="toc-pitfall-4-not-testing-edge-cases">Pitfall #4: Not Testing Edge
Cases</a></li>
</ul></li>
<li><a href="#implementation-guide-tdd-workshop"
id="toc-implementation-guide-tdd-workshop">🛠️ Implementation Guide: TDD
Workshop</a>
<ul>
<li><a href="#hour-tdd-workshop-agenda"
id="toc-hour-tdd-workshop-agenda">2-Hour TDD Workshop Agenda</a></li>
<li><a href="#tdd-kata-string-calculator"
id="toc-tdd-kata-string-calculator">TDD Kata: String Calculator</a></li>
</ul></li>
</ul></li>
<li><a href="#part-ii-production-excellence"
id="toc-part-ii-production-excellence">Part II: Production
Excellence</a></li>
<li><a href="#chapter-6-performance-monitoring-intelligence"
id="toc-chapter-6-performance-monitoring-intelligence">Chapter 6:
Performance &amp; Monitoring Intelligence 🟡</a>
<ul>
<li><a href="#the-performance-first-mindset"
id="toc-the-performance-first-mindset">The Performance-First Mindset</a>
<ul>
<li><a href="#key-insight-performance-as-a-product-feature"
id="toc-key-insight-performance-as-a-product-feature">💡 Key Insight:
Performance as a Product Feature</a></li>
</ul></li>
<li><a href="#core-web-vitals-excellence"
id="toc-core-web-vitals-excellence">Core Web Vitals Excellence</a>
<ul>
<li><a href="#understanding-the-modern-metrics"
id="toc-understanding-the-modern-metrics">Understanding the Modern
Metrics</a></li>
<li><a href="#advanced-core-web-vitals-implementation"
id="toc-advanced-core-web-vitals-implementation">Advanced Core Web
Vitals Implementation</a></li>
<li><a href="#real-user-monitoring-rum-implementation"
id="toc-real-user-monitoring-rum-implementation">Real User Monitoring
(RUM) Implementation</a></li>
</ul></li>
<li><a href="#advanced-performance-optimization-techniques"
id="toc-advanced-performance-optimization-techniques">Advanced
Performance Optimization Techniques</a>
<ul>
<li><a href="#intelligent-resource-loading"
id="toc-intelligent-resource-loading">Intelligent Resource
Loading</a></li>
<li><a href="#performance-budget-framework"
id="toc-performance-budget-framework">Performance Budget
Framework</a></li>
</ul></li>
</ul></li>
<li><a href="#chapter-7-security-accessibility-excellence"
id="toc-chapter-7-security-accessibility-excellence">Chapter 7: Security
&amp; Accessibility Excellence 🔴</a>
<ul>
<li><a href="#zero-trust-frontend-security"
id="toc-zero-trust-frontend-security">Zero-Trust Frontend Security</a>
<ul>
<li><a href="#key-insight-security-as-a-continuous-process"
id="toc-key-insight-security-as-a-continuous-process">💡 Key Insight:
Security as a Continuous Process</a></li>
</ul></li>
<li><a href="#modern-authentication-patterns"
id="toc-modern-authentication-patterns">Modern Authentication
Patterns</a>
<ul>
<li><a href="#webauthn-and-passwordless-authentication"
id="toc-webauthn-and-passwordless-authentication">WebAuthn and
Passwordless Authentication</a></li>
<li><a href="#multi-factor-authentication-mfa-implementation"
id="toc-multi-factor-authentication-mfa-implementation">Multi-Factor
Authentication (MFA) Implementation</a></li>
</ul></li>
<li><a href="#content-security-policy-csp-implementation"
id="toc-content-security-policy-csp-implementation">Content Security
Policy (CSP) Implementation</a></li>
<li><a href="#wcag-2.1-aa-compliance-framework"
id="toc-wcag-2.1-aa-compliance-framework">WCAG 2.1 AA Compliance
Framework</a>
<ul>
<li><a href="#automated-accessibility-testing"
id="toc-automated-accessibility-testing">Automated Accessibility
Testing</a></li>
<li><a href="#automated-accessibility-testing-in-cicd"
id="toc-automated-accessibility-testing-in-cicd">Automated Accessibility
Testing in CI/CD</a></li>
</ul></li>
</ul></li>
<li><a href="#chapter-8-documentation-knowledge-management"
id="toc-chapter-8-documentation-knowledge-management">Chapter 8:
Documentation &amp; Knowledge Management 🟡</a>
<ul>
<li><a href="#living-documentation-systems"
id="toc-living-documentation-systems">Living Documentation Systems</a>
<ul>
<li><a href="#key-insight-documentation-as-code"
id="toc-key-insight-documentation-as-code">💡 Key Insight: Documentation
as Code</a></li>
</ul></li>
<li><a href="#automated-documentation-generation"
id="toc-automated-documentation-generation">Automated Documentation
Generation</a>
<ul>
<li><a href="#api-documentation-with-openapi"
id="toc-api-documentation-with-openapi">API Documentation with
OpenAPI</a></li>
<li><a href="#component-documentation-with-storybook"
id="toc-component-documentation-with-storybook">Component Documentation
with Storybook</a></li>
</ul></li>
<li><a href="#knowledge-transfer-strategies"
id="toc-knowledge-transfer-strategies">Knowledge Transfer Strategies</a>
<ul>
<li><a href="#onboarding-documentation-framework"
id="toc-onboarding-documentation-framework">Onboarding Documentation
Framework</a></li>
<li><a href="#technical-decision-documentation"
id="toc-technical-decision-documentation">Technical Decision
Documentation</a></li>
</ul></li>
<li><a href="#common-documentation-anti-patterns"
id="toc-common-documentation-anti-patterns">⚠️ Common Documentation
Anti-Patterns</a>
<ul>
<li><a href="#anti-pattern-1-documentation-debt"
id="toc-anti-pattern-1-documentation-debt">Anti-Pattern #1:
Documentation Debt</a></li>
<li><a href="#anti-pattern-2-write-only-documentation"
id="toc-anti-pattern-2-write-only-documentation">Anti-Pattern #2:
Write-Only Documentation</a></li>
<li><a href="#anti-pattern-3-over-documentation"
id="toc-anti-pattern-3-over-documentation">Anti-Pattern #3:
Over-Documentation</a></li>
<li><a href="#anti-pattern-4-single-audience-documentation"
id="toc-anti-pattern-4-single-audience-documentation">Anti-Pattern #4:
Single-Audience Documentation</a></li>
</ul></li>
</ul></li>
<li><a href="#chapter-9-team-workflow-collaboration"
id="toc-chapter-9-team-workflow-collaboration">Chapter 9: Team Workflow
&amp; Collaboration 🟡</a>
<ul>
<li><a href="#modern-git-workflows-for-enterprise"
id="toc-modern-git-workflows-for-enterprise">Modern Git Workflows for
Enterprise</a>
<ul>
<li><a href="#key-insight-workflow-as-code"
id="toc-key-insight-workflow-as-code">💡 Key Insight: Workflow as
Code</a></li>
</ul></li>
<li><a href="#advanced-git-flow-implementation"
id="toc-advanced-git-flow-implementation">Advanced Git Flow
Implementation</a>
<ul>
<li><a href="#git-flow-with-automated-quality-gates"
id="toc-git-flow-with-automated-quality-gates">Git Flow with Automated
Quality Gates</a></li>
<li><a href="#code-review-excellence-framework"
id="toc-code-review-excellence-framework">Code Review Excellence
Framework</a></li>
</ul></li>
</ul></li>
<li><a href="#part-iii-enterprise-architecture"
id="toc-part-iii-enterprise-architecture">Part III: Enterprise
Architecture</a></li>
<li><a href="#chapter-10-enterprise-project-architecture"
id="toc-chapter-10-enterprise-project-architecture">Chapter 10:
Enterprise Project Architecture 🔴</a>
<ul>
<li><a href="#micro-frontend-architecture-mastery"
id="toc-micro-frontend-architecture-mastery">Micro-Frontend Architecture
Mastery</a>
<ul>
<li><a href="#key-insight-conways-law-in-action"
id="toc-key-insight-conways-law-in-action">💡 Key Insight: Conway’s Law
in Action</a></li>
</ul></li>
<li><a href="#module-federation-implementation"
id="toc-module-federation-implementation">Module Federation
Implementation</a></li>
<li><a href="#domain-driven-design-for-frontend"
id="toc-domain-driven-design-for-frontend">Domain-Driven Design for
Frontend</a></li>
</ul></li>
<li><a href="#chapter-11-advanced-architecture-patterns"
id="toc-chapter-11-advanced-architecture-patterns">Chapter 11: Advanced
Architecture Patterns 🔴</a>
<ul>
<li><a href="#hexagonal-architecture-in-frontend"
id="toc-hexagonal-architecture-in-frontend">Hexagonal Architecture in
Frontend</a></li>
<li><a href="#event-driven-architecture"
id="toc-event-driven-architecture">Event-Driven Architecture</a></li>
</ul></li>
<li><a href="#chapter-12-devops-deployment-excellence"
id="toc-chapter-12-devops-deployment-excellence">Chapter 12: DevOps
&amp; Deployment Excellence 🔴</a>
<ul>
<li><a href="#gitops-implementation"
id="toc-gitops-implementation">GitOps Implementation</a></li>
<li><a href="#progressive-delivery"
id="toc-progressive-delivery">Progressive Delivery</a></li>
</ul></li>
<li><a href="#part-iv-advanced-engineering-leadership"
id="toc-part-iv-advanced-engineering-leadership">Part IV: Advanced
Engineering Leadership</a></li>
<li><a href="#chapter-13-observability-intelligence"
id="toc-chapter-13-observability-intelligence">Chapter 13: Observability
&amp; Intelligence 🔴</a>
<ul>
<li><a href="#opentelemetry-integration"
id="toc-opentelemetry-integration">OpenTelemetry Integration</a></li>
<li><a href="#ai-powered-monitoring"
id="toc-ai-powered-monitoring">AI-Powered Monitoring</a></li>
</ul></li>
<li><a href="#chapter-14-performance-engineering-mastery"
id="toc-chapter-14-performance-engineering-mastery">Chapter 14:
Performance Engineering Mastery 🔴</a>
<ul>
<li><a href="#advanced-bundle-optimization"
id="toc-advanced-bundle-optimization">Advanced Bundle
Optimization</a></li>
<li><a href="#edge-computing-integration"
id="toc-edge-computing-integration">Edge Computing Integration</a></li>
</ul></li>
<li><a href="#chapter-15-career-advancement-leadership"
id="toc-chapter-15-career-advancement-leadership">Chapter 15: Career
Advancement &amp; Leadership 🔴</a>
<ul>
<li><a href="#senior-engineer-interview-mastery"
id="toc-senior-engineer-interview-mastery">Senior Engineer Interview
Mastery</a>
<ul>
<li><a href="#system-design-excellence"
id="toc-system-design-excellence">System Design Excellence</a></li>
<li><a href="#technical-leadership"
id="toc-technical-leadership">Technical Leadership</a></li>
</ul></li>
<li><a href="#building-high-performance-teams"
id="toc-building-high-performance-teams">Building High-Performance
Teams</a></li>
<li><a href="#conclusion-your-journey-to-excellence"
id="toc-conclusion-your-journey-to-excellence">Conclusion: Your Journey
to Excellence</a>
<ul>
<li><a href="#technical-mastery" id="toc-technical-mastery">Technical
Mastery</a></li>
<li><a href="#leadership-skills" id="toc-leadership-skills">Leadership
Skills</a></li>
<li><a href="#career-readiness" id="toc-career-readiness">Career
Readiness</a></li>
<li><a href="#your-next-steps" id="toc-your-next-steps">Your Next
Steps</a></li>
<li><a href="#the-impact-youll-make-1"
id="toc-the-impact-youll-make-1">The Impact You’ll Make</a></li>
</ul></li>
</ul></li>
<li><a href="#appendices" id="toc-appendices">Appendices</a>
<ul>
<li><a href="#appendix-a-technology-stack-reference-1"
id="toc-appendix-a-technology-stack-reference-1">Appendix A: Technology
Stack Reference</a>
<ul>
<li><a href="#core-technologies" id="toc-core-technologies">Core
Technologies</a></li>
</ul></li>
<li><a href="#appendix-b-performance-optimization-checklist-1"
id="toc-appendix-b-performance-optimization-checklist-1">Appendix B:
Performance Optimization Checklist</a>
<ul>
<li><a href="#core-web-vitals-optimization"
id="toc-core-web-vitals-optimization">Core Web Vitals
Optimization</a></li>
<li><a href="#bundle-optimization" id="toc-bundle-optimization">Bundle
Optimization</a></li>
</ul></li>
<li><a href="#appendix-c-security-best-practices-checklist-1"
id="toc-appendix-c-security-best-practices-checklist-1">Appendix C:
Security Best Practices Checklist</a>
<ul>
<li><a href="#authentication-authorization"
id="toc-authentication-authorization">Authentication &amp;
Authorization</a></li>
<li><a href="#content-security-policy"
id="toc-content-security-policy">Content Security Policy</a></li>
<li><a href="#input-validation" id="toc-input-validation">Input
Validation</a></li>
<li><a href="#dependency-management"
id="toc-dependency-management">Dependency Management</a></li>
</ul></li>
<li><a href="#appendix-d-code-review-guidelines-1"
id="toc-appendix-d-code-review-guidelines-1">Appendix D: Code Review
Guidelines</a>
<ul>
<li><a href="#what-to-look-for" id="toc-what-to-look-for">What to Look
For</a></li>
<li><a href="#giving-feedback" id="toc-giving-feedback">Giving
Feedback</a></li>
</ul></li>
<li><a href="#appendix-e-interview-preparation-resources-1"
id="toc-appendix-e-interview-preparation-resources-1">Appendix E:
Interview Preparation Resources</a>
<ul>
<li><a href="#system-design-topics" id="toc-system-design-topics">System
Design Topics</a></li>
<li><a href="#coding-challenges" id="toc-coding-challenges">Coding
Challenges</a></li>
<li><a href="#behavioral-questions"
id="toc-behavioral-questions">Behavioral Questions</a></li>
</ul></li>
<li><a href="#appendix-f-further-reading-and-resources-1"
id="toc-appendix-f-further-reading-and-resources-1">Appendix F: Further
Reading and Resources</a>
<ul>
<li><a href="#books" id="toc-books">Books</a></li>
<li><a href="#online-resources" id="toc-online-resources">Online
Resources</a></li>
<li><a href="#tools-utilities" id="toc-tools-utilities">Tools &amp;
Utilities</a></li>
<li><a href="#conferences-events"
id="toc-conferences-events">Conferences &amp; Events</a></li>
</ul></li>
<li><a href="#quick-reference-cards"
id="toc-quick-reference-cards">Quick Reference Cards</a>
<ul>
<li><a href="#git-commands" id="toc-git-commands">Git Commands</a></li>
<li><a href="#testing-commands" id="toc-testing-commands">Testing
Commands</a></li>
<li><a href="#performance-commands"
id="toc-performance-commands">Performance Commands</a></li>
<li><a href="#deployment-commands"
id="toc-deployment-commands">Deployment Commands</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1
id="frontend-engineering-excellence-a-comprehensive-guide-to-production-ready-development">Frontend
Engineering Excellence: A Comprehensive Guide to Production-Ready
Development</h1>
<p><em>A complete handbook for mid to senior frontend engineers building
enterprise-grade applications</em></p>
<hr />
<p><strong>Author:</strong> AI-Assisted Compilation<br />
<strong>Target Audience:</strong> Mid to Senior Frontend Engineers<br />
<strong>Page Count:</strong> ~200 pages<br />
<strong>Technologies:</strong> React 19, Next.js 15, TypeScript, Modern
Web Standards</p>
<hr />
<h1 id="frontend-engineering-excellence">Frontend Engineering
Excellence</h1>
<h2 id="a-comprehensive-guide-to-production-ready-development">A
Comprehensive Guide to Production-Ready Development</h2>
<hr />
<h2 id="foreword">Foreword</h2>
<p>The frontend engineering landscape has evolved dramatically over the
past decade. What started as simple DOM manipulation has transformed
into complex, enterprise-grade systems that power global applications
serving millions of users. Today’s frontend engineers are not just
building user interfaces—they’re architecting distributed systems,
implementing intelligent performance optimizations, and leading
technical teams that drive significant business impact.</p>
<p>This book bridges the gap between intermediate frontend development
and senior engineering excellence. It’s designed for engineers who have
mastered the basics and are ready to tackle production challenges at
scale.</p>
<hr />
<h2 id="introduction-the-modern-frontend-engineer">Introduction: The
Modern Frontend Engineer</h2>
<h3 id="who-this-book-is-for">Who This Book Is For</h3>
<p>You’re a frontend engineer with 2-3 years of experience. You’re
comfortable with React, understand state management, and have shipped
features to production. But you’re ready for more. You want to:</p>
<ul>
<li><strong>Lead technical decisions</strong> rather than just implement
them</li>
<li><strong>Design systems</strong> that scale to millions of users</li>
<li><strong>Mentor other engineers</strong> and drive team
excellence</li>
<li><strong>Own production systems</strong> with confidence</li>
<li><strong>Advance your career</strong> to senior and staff engineering
roles</li>
</ul>
<p>This book will take you there.</p>
<h3 id="what-makes-this-different">What Makes This Different</h3>
<p>Most frontend books focus on getting things to work. This book
focuses on getting things to work <strong>reliably</strong>,
<strong>efficiently</strong>, and <strong>maintainably</strong> in
production environments where failure costs millions and success drives
business growth.</p>
<p>You’ll learn: - <strong>Production-first thinking</strong> that
anticipates problems before they occur - <strong>Enterprise architecture
patterns</strong> used by companies like Netflix, Airbnb, and Google -
<strong>Modern tooling and practices</strong> that automate quality and
performance - <strong>Leadership skills</strong> that make you
invaluable to any engineering team</p>
<h3 id="the-journey-ahead">The Journey Ahead</h3>
<p>This book is structured as a journey from solid fundamentals to
engineering leadership:</p>
<p><strong>Part I (Foundation)</strong> ensures you have the mindset and
practices necessary for production excellence. Even experienced
engineers often discover gaps in testing strategies or code quality
practices.</p>
<p><strong>Part II (Production Excellence)</strong> covers the
operational aspects that separate hobby projects from enterprise
systems—performance monitoring, security, documentation, and team
workflows.</p>
<p><strong>Part III (Enterprise Architecture)</strong> dives into the
system design skills needed to architect large-scale applications.
You’ll learn patterns used by the most successful tech companies.</p>
<p><strong>Part IV (Advanced Engineering Leadership)</strong> focuses on
the observability, performance engineering, and leadership skills that
define senior and staff engineers.</p>
<h3 id="how-to-use-this-book">How to Use This Book</h3>
<p>Each chapter builds on previous concepts, but you can also jump to
specific topics based on your current needs:</p>
<ul>
<li><strong>If you’re preparing for senior engineer interviews</strong>,
focus on Parts III and IV</li>
<li><strong>If you’re struggling with production issues</strong>, dive
deep into Part II</li>
<li><strong>If you’re leading a team for the first time</strong>, pay
special attention to team workflow and mentorship sections</li>
<li><strong>If you’re architecting a new system</strong>, Part III
provides comprehensive guidance</li>
</ul>
<h3 id="code-examples-and-practical-application">Code Examples and
Practical Application</h3>
<p>This book emphasizes practical application. Every concept is
accompanied by: - <strong>Real-world code examples</strong> using modern
React, TypeScript, and industry-standard tools - <strong>Architecture
diagrams</strong> that visualize complex systems - <strong>Checklists
and frameworks</strong> you can apply immediately - <strong>Case
studies</strong> from actual production systems</p>
<p>All code examples use: - <strong>React 19</strong> with the latest
patterns and Server Components - <strong>TypeScript</strong> for type
safety and developer experience - <strong>Modern tooling</strong>
including Vite, Vitest, Playwright, and OpenTelemetry -
<strong>Cloud-native architectures</strong> with Docker, Kubernetes, and
edge computing</p>
<h3 id="your-growth-path">Your Growth Path</h3>
<p>By the end of this book, you’ll have:</p>
<ol type="1">
<li><strong>Production Mindset</strong>: Think like a senior engineer
who owns systems end-to-end</li>
<li><strong>Technical Depth</strong>: Master advanced patterns and
modern tooling</li>
<li><strong>System Design Skills</strong>: Architect scalable,
maintainable applications</li>
<li><strong>Leadership Abilities</strong>: Mentor others and drive
technical decisions</li>
<li><strong>Career Readiness</strong>: Interview confidently for senior
and staff roles</li>
</ol>
<h3 id="the-impact-youll-make">The Impact You’ll Make</h3>
<p>Senior frontend engineers don’t just write code—they: -
<strong>Improve user experience</strong> for millions of users through
performance optimization - <strong>Reduce operational costs</strong>
through efficient architectures and automation - <strong>Accelerate team
velocity</strong> by establishing excellent practices and mentoring -
<strong>Drive business growth</strong> by building reliable, scalable
systems - <strong>Shape company culture</strong> around technical
excellence and innovation</p>
<p>This book will prepare you to make that kind of impact.</p>
<h3 id="lets-begin">Let’s Begin</h3>
<p>The journey from intermediate to senior engineer is challenging but
rewarding. You’ll encounter complex problems, learn sophisticated
solutions, and develop the judgment that comes from understanding how
systems behave in production.</p>
<p>Whether you’re looking to advance at your current company, land a
senior role at a top tech company, or simply become a better engineer,
this book provides the comprehensive foundation you need.</p>
<p>Let’s build something amazing together.</p>
<hr />
<p><em>“The best engineers are not those who know the most technologies,
but those who consistently deliver reliable, maintainable systems that
create value for users and businesses.”</em></p>
<hr />
<h2 id="how-to-navigate-this-book">How to Navigate This Book</h2>
<h3 id="difficulty-progression">Difficulty Progression</h3>
<ul>
<li>🟢 <strong>Foundation</strong>: Concepts every production engineer
should know</li>
<li>🟡 <strong>Intermediate</strong>: Patterns for scaling and team
collaboration<br />
</li>
<li>🔴 <strong>Advanced</strong>: Techniques for complex systems and
leadership</li>
</ul>
<h3 id="practical-elements">Practical Elements</h3>
<ul>
<li>💡 <strong>Key Insights</strong>: Critical concepts that change how
you think</li>
<li>⚠️ <strong>Common Pitfalls</strong>: Mistakes to avoid based on real
experience</li>
<li>🛠️ <strong>Implementation Guides</strong>: Step-by-step practical
applications</li>
<li>📊 <strong>Case Studies</strong>: Real-world examples and lessons
learned</li>
</ul>
<h3 id="time-investment">Time Investment</h3>
<ul>
<li><strong>Quick Reference</strong>: Use checklists and summaries for
immediate application</li>
<li><strong>Deep Learning</strong>: Work through code examples and
exercises</li>
<li><strong>Mastery</strong>: Implement concepts in your own projects
and teach others</li>
</ul>
<p>Ready? Let’s transform your engineering career.</p>
<hr />
<h1 id="table-of-contents">Table of Contents</h1>
<hr />
<h2 id="part-i-foundation-mindset-pages-1-45">Part I: Foundation &amp;
Mindset (Pages 1-45)</h2>
<h3 id="chapter-1-production-ready-mindset-pages-1-8">Chapter 1:
Production-Ready Mindset (Pages 1-8)</h3>
<ul>
<li>Understanding Production vs. Development</li>
<li>Quality Gates and Non-Functional Requirements</li>
<li>Building for Scale and Maintainability</li>
<li>The Cost of Technical Debt</li>
</ul>
<h3 id="chapter-2-definition-of-done-excellence-pages-9-16">Chapter 2:
Definition of Done Excellence (Pages 9-16)</h3>
<ul>
<li>Creating Comprehensive DoD Criteria</li>
<li>Quality Assurance Beyond “It Works”</li>
<li>Stakeholder Alignment and Communication</li>
<li>Continuous Improvement Processes</li>
</ul>
<h3 id="chapter-3-testing-strategies-for-enterprise-pages-17-28">Chapter
3: Testing Strategies for Enterprise (Pages 17-28)</h3>
<ul>
<li>Testing Pyramid for Frontend Applications</li>
<li>Unit Testing with React Testing Library</li>
<li>Integration Testing Patterns</li>
<li>End-to-End Testing with Playwright</li>
<li>Visual Regression Testing</li>
</ul>
<h3 id="chapter-4-testing-implementation-mastery-pages-29-36">Chapter 4:
Testing Implementation Mastery (Pages 29-36)</h3>
<ul>
<li>Test-Driven Development in Practice</li>
<li>Mock Strategies and Data Management</li>
<li>Performance Testing Frontend Applications</li>
<li>Accessibility Testing Automation</li>
</ul>
<h3 id="chapter-5-code-excellence-architecture-pages-37-45">Chapter 5:
Code Excellence &amp; Architecture (Pages 37-45)</h3>
<ul>
<li>Clean Code Principles for React</li>
<li>Component Architecture Patterns</li>
<li>State Management Strategies</li>
<li>TypeScript Best Practices</li>
</ul>
<hr />
<h2 id="part-ii-production-excellence-pages-46-90">Part II: Production
Excellence (Pages 46-90)</h2>
<h3
id="chapter-6-performance-monitoring-intelligence-pages-46-58">Chapter
6: Performance &amp; Monitoring Intelligence (Pages 46-58)</h3>
<ul>
<li>Core Web Vitals Optimization</li>
<li>Real User Monitoring (RUM)</li>
<li>Performance Budgets and Enforcement</li>
<li>AI-Powered Performance Analytics</li>
</ul>
<h3 id="chapter-7-security-accessibility-excellence-pages-59-71">Chapter
7: Security &amp; Accessibility Excellence (Pages 59-71)</h3>
<ul>
<li>Zero-Trust Frontend Security</li>
<li>Modern Authentication Patterns (WebAuthn, MFA)</li>
<li>WCAG 2.1 AA Compliance</li>
<li>Automated Accessibility Testing</li>
</ul>
<h3
id="chapter-8-documentation-knowledge-management-pages-72-79">Chapter 8:
Documentation &amp; Knowledge Management (Pages 72-79)</h3>
<ul>
<li>Living Documentation Systems</li>
<li>API Documentation Automation</li>
<li>Design System Documentation</li>
<li>Knowledge Transfer Strategies</li>
</ul>
<h3 id="chapter-9-team-workflow-collaboration-pages-80-90">Chapter 9:
Team Workflow &amp; Collaboration (Pages 80-90)</h3>
<ul>
<li>Modern Git Workflows</li>
<li>Code Review Excellence</li>
<li>Cross-Functional Collaboration</li>
<li>Mentorship and Knowledge Sharing</li>
</ul>
<hr />
<h2 id="part-iii-enterprise-architecture-pages-91-135">Part III:
Enterprise Architecture (Pages 91-135)</h2>
<h3 id="chapter-10-enterprise-project-architecture-pages-91-105">Chapter
10: Enterprise Project Architecture (Pages 91-105)</h3>
<ul>
<li>Micro-Frontend Architecture</li>
<li>Domain-Driven Design for Frontend</li>
<li>Event-Driven Architecture</li>
<li>Scalable State Management</li>
</ul>
<h3 id="chapter-11-advanced-architecture-patterns-pages-106-120">Chapter
11: Advanced Architecture Patterns (Pages 106-120)</h3>
<ul>
<li>Hexagonal Architecture</li>
<li>CQRS and Event Sourcing</li>
<li>Circuit Breakers and Fault Tolerance</li>
<li>Performance-First Architecture</li>
</ul>
<h3 id="chapter-12-devops-deployment-excellence-pages-121-135">Chapter
12: DevOps &amp; Deployment Excellence (Pages 121-135)</h3>
<ul>
<li>GitOps and Infrastructure as Code</li>
<li>Advanced CI/CD Pipelines</li>
<li>Progressive Delivery Strategies</li>
<li>Chaos Engineering for Frontend</li>
</ul>
<hr />
<h2 id="part-iv-advanced-engineering-leadership-pages-136-180">Part IV:
Advanced Engineering Leadership (Pages 136-180)</h2>
<h3 id="chapter-13-observability-intelligence-pages-136-150">Chapter 13:
Observability &amp; Intelligence (Pages 136-150)</h3>
<ul>
<li>OpenTelemetry Integration</li>
<li>Distributed Tracing</li>
<li>AI-Powered Anomaly Detection</li>
<li>Business Intelligence Integration</li>
</ul>
<h3
id="chapter-14-performance-engineering-mastery-pages-151-165">Chapter
14: Performance Engineering Mastery (Pages 151-165)</h3>
<ul>
<li>Advanced Bundle Optimization</li>
<li>Edge Computing Strategies</li>
<li>Zero-Latency User Experiences</li>
<li>Machine Learning Performance Optimization</li>
</ul>
<h3 id="chapter-15-career-advancement-leadership-pages-166-180">Chapter
15: Career Advancement &amp; Leadership (Pages 166-180)</h3>
<ul>
<li>Senior Engineer Interview Mastery</li>
<li>Technical Leadership Skills</li>
<li>System Design Expertise</li>
<li>Building High-Performance Teams</li>
</ul>
<hr />
<h2 id="appendices-pages-181-200">Appendices (Pages 181-200)</h2>
<h3 id="appendix-a-technology-stack-reference">Appendix A: Technology
Stack Reference</h3>
<h3 id="appendix-b-performance-optimization-checklist">Appendix B:
Performance Optimization Checklist</h3>
<h3 id="appendix-c-security-best-practices-checklist">Appendix C:
Security Best Practices Checklist</h3>
<h3 id="appendix-d-code-review-guidelines">Appendix D: Code Review
Guidelines</h3>
<h3 id="appendix-e-interview-preparation-resources">Appendix E:
Interview Preparation Resources</h3>
<h3 id="appendix-f-further-reading-and-resources">Appendix F: Further
Reading and Resources</h3>
<p>—# Part I: Foundation &amp; Mindset <em>Building the fundamentals for
production excellence</em></p>
<hr />
<h1 id="chapter-1-production-ready-mindset">Chapter 1: Production-Ready
Mindset 🟢</h1>
<p><em>Pages 1-8</em></p>
<h2 id="the-shift-from-works-on-my-machine-to-works-for-everyone">The
Shift from “Works on My Machine” to “Works for Everyone”</h2>
<p>The transition from intermediate to senior frontend engineer begins
with a fundamental mindset shift. You’re no longer just making features
work—you’re ensuring they work reliably for millions of users across
different devices, networks, and scenarios.</p>
<h3 id="key-insight-production-vs.-development-mindset">💡 Key Insight:
Production vs. Development Mindset</h3>
<p><strong>Development Mindset</strong> focuses on: - Getting features
to work - Fast iteration and experimentation - Individual productivity -
“Good enough” solutions</p>
<p><strong>Production Mindset</strong> focuses on: - Getting features to
work reliably at scale - Long-term maintainability and evolution - Team
and system productivity - Sustainable, excellent solutions</p>
<h2 id="understanding-production-complexity">Understanding Production
Complexity</h2>
<h3 id="the-hidden-challenges">The Hidden Challenges</h3>
<p>When you deploy to production, your code faces challenges that never
appear in development:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Development: This works fine</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> UserProfile <span class="op">=</span> ({ userId }<span class="op">:</span> { userId<span class="op">:</span> <span class="dt">string</span> }) <span class="kw">=&gt;</span> {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [user<span class="op">,</span> setUser] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fetch</span>(<span class="vs">`/api/users/</span><span class="sc">${</span>userId<span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">then</span>(res <span class="kw">=&gt;</span> res<span class="op">.</span><span class="fu">json</span>())</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">then</span>(setUser)<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> [userId])<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="op">&lt;</span>div<span class="op">&gt;</span>{user<span class="op">?.</span><span class="at">name</span>}<span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Production: This needs to handle reality</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> UserProfile <span class="op">=</span> ({ userId }<span class="op">:</span> { userId<span class="op">:</span> <span class="dt">string</span> }) <span class="kw">=&gt;</span> {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [user<span class="op">,</span> setUser] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>User <span class="op">|</span> <span class="dt">null</span><span class="op">&gt;</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [loading<span class="op">,</span> setLoading] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [error<span class="op">,</span> setError] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span><span class="bu">Error</span> <span class="op">|</span> <span class="dt">null</span><span class="op">&gt;</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> controller <span class="op">=</span> <span class="kw">new</span> <span class="fu">AbortController</span>()<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> fetchUser <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>      <span class="cf">try</span> {</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">setLoading</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">setError</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`/api/users/</span><span class="sc">${</span>userId<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>          signal<span class="op">:</span> controller<span class="op">.</span><span class="at">signal</span><span class="op">,</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>          timeout<span class="op">:</span> <span class="dv">5000</span><span class="op">,</span> <span class="co">// Handle slow networks</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>response<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>          <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`Failed to fetch user: </span><span class="sc">${</span>response<span class="op">.</span><span class="at">status</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> userData <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Validate data shape</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>userData <span class="op">||</span> <span class="kw">typeof</span> userData<span class="op">.</span><span class="at">name</span> <span class="op">!==</span> <span class="st">&#39;string&#39;</span>) {</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>          <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Invalid user data received&#39;</span>)<span class="op">;</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">setUser</span>(userData)<span class="op">;</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">catch</span> (err) {</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (err<span class="op">.</span><span class="at">name</span> <span class="op">!==</span> <span class="st">&#39;AbortError&#39;</span>) {</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>          <span class="fu">setError</span>(err <span class="im">as</span> <span class="bu">Error</span>)<span class="op">;</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>          <span class="co">// Report to monitoring service</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>          <span class="fu">reportError</span>(err<span class="op">,</span> { userId<span class="op">,</span> component<span class="op">:</span> <span class="st">&#39;UserProfile&#39;</span> })<span class="op">;</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">finally</span> {</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        <span class="fu">setLoading</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fetchUser</span>()<span class="op">;</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> () <span class="kw">=&gt;</span> controller<span class="op">.</span><span class="fu">abort</span>()<span class="op">;</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> [userId])<span class="op">;</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (loading) <span class="cf">return</span> <span class="op">&lt;</span>UserProfileSkeleton <span class="op">/&gt;;</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (error) <span class="cf">return</span> <span class="op">&lt;</span>ErrorBoundary error<span class="op">=</span>{error} retry<span class="op">=</span>{() <span class="kw">=&gt;</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="fu">reload</span>()} <span class="op">/&gt;;</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>user) <span class="cf">return</span> <span class="op">&lt;</span>EmptyState message<span class="op">=</span><span class="st">&quot;User not found&quot;</span> <span class="op">/&gt;;</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="op">&lt;</span>div<span class="op">&gt;</span>{user<span class="op">.</span><span class="at">name</span>}<span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h3 id="production-realities-checklist">Production Realities
Checklist</h3>
<p>✅ <strong>Network Conditions</strong> - Slow 3G connections (3-5
second delays) - Intermittent connectivity - High latency (500ms+ round
trips) - Bandwidth limitations</p>
<p>✅ <strong>Device Constraints</strong> - Low-end mobile devices with
limited CPU/memory - Different screen sizes and orientations - Touch
vs. mouse interactions - Accessibility requirements</p>
<p>✅ <strong>User Behavior</strong> - Rapid navigation (back button,
tab switching) - Multiple tabs open simultaneously - Browser
autocomplete and form filling - Copy/paste and keyboard shortcuts</p>
<p>✅ <strong>Data Variations</strong> - Empty states and missing data -
Extremely long content that breaks layouts - Special characters and
internationalization - Malformed or unexpected API responses</p>
<h2 id="quality-gates-your-production-safety-net">Quality Gates: Your
Production Safety Net</h2>
<h3 id="implementing-non-functional-requirements">Implementing
Non-Functional Requirements</h3>
<p>Senior engineers think beyond functional requirements (“the login
button works”) to non-functional requirements (“the login button works
reliably for 99.9% of users within 2 seconds”).</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Quality gates framework</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> QualityGates {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  performance<span class="op">:</span> {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    loadTime<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>        <span class="co">// &lt; 3 seconds on 3G</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    interactionDelay<span class="op">:</span> <span class="dt">number</span><span class="op">;</span> <span class="co">// &lt; 100ms for UI updates</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    memoryUsage<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>     <span class="co">// &lt; 50MB heap size</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  reliability<span class="op">:</span> {</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    errorRate<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>       <span class="co">// &lt; 0.1% error rate</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    availability<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>    <span class="co">// 99.9% uptime</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    crashRate<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>       <span class="co">// &lt; 0.01% crash rate</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  usability<span class="op">:</span> {</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    accessibility<span class="op">:</span> <span class="st">&#39;WCAG_AA&#39;</span><span class="op">;</span> <span class="co">// WCAG 2.1 AA compliance</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    mobileSupport<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span>   <span class="co">// Works on mobile devices</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    offlineCapability<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span> <span class="co">// Core features work offline</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  security<span class="op">:</span> {</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    dataProtection<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span>  <span class="co">// No sensitive data exposure</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    inputValidation<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span> <span class="co">// All inputs validated</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    authenticationRequired<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span> <span class="co">// Protected routes</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="automated-quality-enforcement">Automated Quality
Enforcement</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Example: Performance budget enforcement in CI/CD</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> performanceBudget <span class="op">=</span> {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;first-contentful-paint&quot;</span><span class="op">:</span> <span class="dv">1800</span><span class="op">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;largest-contentful-paint&quot;</span><span class="op">:</span> <span class="dv">2500</span><span class="op">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;speed-index&quot;</span><span class="op">:</span> <span class="dv">3000</span><span class="op">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;cumulative-layout-shift&quot;</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;total-blocking-time&quot;</span><span class="op">:</span> <span class="dv">200</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Lighthouse CI configuration</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  ci<span class="op">:</span> {</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    collect<span class="op">:</span> {</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      staticDistDir<span class="op">:</span> <span class="st">&#39;./dist&#39;</span><span class="op">,</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      numberOfRuns<span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    assert<span class="op">:</span> {</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>      assertions<span class="op">:</span> {</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;categories:performance&#39;</span><span class="op">:</span> [<span class="st">&#39;error&#39;</span><span class="op">,</span> { minScore<span class="op">:</span> <span class="fl">0.9</span> }]<span class="op">,</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;categories:accessibility&#39;</span><span class="op">:</span> [<span class="st">&#39;error&#39;</span><span class="op">,</span> { minScore<span class="op">:</span> <span class="fl">0.9</span> }]<span class="op">,</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;categories:best-practices&#39;</span><span class="op">:</span> [<span class="st">&#39;error&#39;</span><span class="op">,</span> { minScore<span class="op">:</span> <span class="fl">0.9</span> }]<span class="op">,</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;categories:seo&#39;</span><span class="op">:</span> [<span class="st">&#39;error&#39;</span><span class="op">,</span> { minScore<span class="op">:</span> <span class="fl">0.9</span> }]<span class="op">,</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    upload<span class="op">:</span> {</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>      target<span class="op">:</span> <span class="st">&#39;temporary-public-storage&#39;</span><span class="op">,</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h2 id="building-for-scale-and-maintainability">Building for Scale and
Maintainability</h2>
<h3 id="the-technical-debt-investment-model">The Technical Debt
Investment Model</h3>
<p>Technical debt isn’t just “bad code”—it’s a financial decision with
compound interest:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Technical Debt Calculator</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> TechnicalDebtCalculator {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calculateDebtCost</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    velocity<span class="op">:</span> <span class="dt">number</span><span class="op">,</span>        <span class="co">// Story points per sprint</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    debtPercentage<span class="op">:</span> <span class="dt">number</span><span class="op">,</span>  <span class="co">// % of time spent on debt-related work</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    teamSize<span class="op">:</span> <span class="dt">number</span><span class="op">,</span>        <span class="co">// Number of developers</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    averageSalary<span class="op">:</span> <span class="dt">number</span>    <span class="co">// Average developer salary</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> debtTime <span class="op">=</span> velocity <span class="op">*</span> (debtPercentage <span class="op">/</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> costPerSprint <span class="op">=</span> (teamSize <span class="op">*</span> averageSalary <span class="op">/</span> <span class="dv">26</span>) <span class="op">*</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// Bi-weekly sprints</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> debtCostPerSprint <span class="op">=</span> costPerSprint <span class="op">*</span> (debtPercentage <span class="op">/</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Annual compound cost of technical debt</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> debtCostPerSprint <span class="op">*</span> <span class="dv">26</span> <span class="op">*</span> <span class="fl">1.2</span><span class="op">;</span> <span class="co">// 20% compound factor</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">// Example: A team of 5 developers spending 30% time on technical debt</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">// costs approximately $180,000 annually in lost productivity</span></span></code></pre></div>
<h3 id="sustainable-code-practices">Sustainable Code Practices</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Before: Hard to maintain</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> Dashboard <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [users<span class="op">,</span> setUsers] <span class="op">=</span> <span class="fu">useState</span>([])<span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [orders<span class="op">,</span> setOrders] <span class="op">=</span> <span class="fu">useState</span>([])<span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [analytics<span class="op">,</span> setAnalytics] <span class="op">=</span> <span class="fu">useState</span>({})<span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [loading<span class="op">,</span> setLoading] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Massive effect with multiple concerns</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>([</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fetch</span>(<span class="st">&#39;/api/users&#39;</span>)<span class="op">.</span><span class="fu">then</span>(r <span class="kw">=&gt;</span> r<span class="op">.</span><span class="fu">json</span>())<span class="op">,</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fetch</span>(<span class="st">&#39;/api/orders&#39;</span>)<span class="op">.</span><span class="fu">then</span>(r <span class="kw">=&gt;</span> r<span class="op">.</span><span class="fu">json</span>())<span class="op">,</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fetch</span>(<span class="st">&#39;/api/analytics&#39;</span>)<span class="op">.</span><span class="fu">then</span>(r <span class="kw">=&gt;</span> r<span class="op">.</span><span class="fu">json</span>())</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    ])<span class="op">.</span><span class="fu">then</span>(([usersData<span class="op">,</span> ordersData<span class="op">,</span> analyticsData]) <span class="kw">=&gt;</span> {</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setUsers</span>(usersData)<span class="op">;</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setOrders</span>(ordersData)<span class="op">;</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setAnalytics</span>(analyticsData)<span class="op">;</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setLoading</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> [])<span class="op">;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>      {<span class="co">/* Complex rendering logic mixed with data fetching */</span>}</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// After: Maintainable and testable</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> Dashboard <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> { data<span class="op">:</span> users<span class="op">,</span> loading<span class="op">:</span> usersLoading } <span class="op">=</span> <span class="fu">useUsers</span>()<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> { data<span class="op">:</span> orders<span class="op">,</span> loading<span class="op">:</span> ordersLoading } <span class="op">=</span> <span class="fu">useOrders</span>()<span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> { data<span class="op">:</span> analytics<span class="op">,</span> loading<span class="op">:</span> analyticsLoading } <span class="op">=</span> <span class="fu">useAnalytics</span>()<span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> isLoading <span class="op">=</span> usersLoading <span class="op">||</span> ordersLoading <span class="op">||</span> analyticsLoading<span class="op">;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (isLoading) <span class="cf">return</span> <span class="op">&lt;</span>DashboardSkeleton <span class="op">/&gt;;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>DashboardLayout<span class="op">&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>UserMetrics users<span class="op">=</span>{users} <span class="op">/&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>OrderMetrics orders<span class="op">=</span>{orders} <span class="op">/&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>AnalyticsCharts data<span class="op">=</span>{analytics} <span class="op">/&gt;</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>DashboardLayout<span class="op">&gt;</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">// Separate concerns with custom hooks</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> useUsers <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">useQuery</span>([<span class="st">&#39;users&#39;</span>]<span class="op">,</span> () <span class="kw">=&gt;</span> </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    apiClient<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/users&#39;</span>)<span class="op">,</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>      staleTime<span class="op">:</span> <span class="dv">5</span> <span class="op">*</span> <span class="dv">60</span> <span class="op">*</span> <span class="dv">1000</span><span class="op">,</span> <span class="co">// 5 minutes</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>      retry<span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>      retryDelay<span class="op">:</span> attemptIndex <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="dv">1000</span> <span class="op">*</span> <span class="dv">2</span> <span class="op">**</span> attemptIndex<span class="op">,</span> <span class="dv">30000</span>)<span class="op">,</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h2 id="common-pitfalls-development-to-production">⚠️ Common Pitfalls:
Development to Production</h2>
<h3 id="pitfall-1-ignoring-edge-cases">Pitfall #1: Ignoring Edge
Cases</h3>
<p><strong>Problem</strong>: Code works for happy path scenarios but
fails with real data <strong>Solution</strong>: Always test with empty
states, error conditions, and boundary values</p>
<h3 id="pitfall-2-performance-optimizations-that-dont-matter">Pitfall
#2: Performance Optimizations That Don’t Matter</h3>
<p><strong>Problem</strong>: Micro-optimizing code that runs once while
ignoring code that runs thousands of times <strong>Solution</strong>:
Profile first, optimize based on data</p>
<h3 id="pitfall-3-building-for-current-team-size">Pitfall #3: Building
for Current Team Size</h3>
<p><strong>Problem</strong>: Architectures that work for 3 developers
but break down at 15 <strong>Solution</strong>: Design for 3x your
current team size</p>
<h3 id="pitfall-4-assuming-perfect-conditions">Pitfall #4: Assuming
Perfect Conditions</h3>
<p><strong>Problem</strong>: Testing only on high-end devices with fast
internet <strong>Solution</strong>: Test on low-end devices with slow
networks</p>
<h2 id="implementation-guide-production-checklist">🛠️ Implementation
Guide: Production Checklist</h2>
<h3 id="pre-production-checklist">Pre-Production Checklist</h3>
<p><strong>🔍 Code Quality</strong> - [ ] All functions have single
responsibility - [ ] Error handling implemented for all async operations
- [ ] Input validation on all user inputs - [ ] TypeScript strict mode
enabled - [ ] No console.log statements in production builds</p>
<p><strong>⚡ Performance</strong> - [ ] Bundle size under budget (&lt;
250KB initial) - [ ] Images optimized and properly sized - [ ] Code
splitting implemented for routes - [ ] Lazy loading for below-fold
content - [ ] Lighthouse score &gt; 90 for all categories</p>
<p><strong>🔒 Security</strong> - [ ] No hardcoded secrets or API keys -
[ ] Content Security Policy headers configured - [ ] Input sanitization
implemented - [ ] Authentication/authorization working correctly - [ ]
HTTPS enforced</p>
<p><strong>♿ Accessibility</strong> - [ ] Keyboard navigation
functional - [ ] Screen reader compatible - [ ] Color contrast ratios
meet WCAG AA - [ ] Alt text for all images - [ ] Focus management
implemented</p>
<p><strong>📱 Cross-Platform</strong> - [ ] Responsive design working on
all breakpoints - [ ] Touch interactions working on mobile - [ ] Browser
compatibility tested (last 2 versions) - [ ] Progressive enhancement
implemented</p>
<h3 id="monitoring-and-alerting-setup">Monitoring and Alerting
Setup</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Production monitoring implementation</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ProductionMonitor {</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setupErrorTracking</span>() {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Error boundary with reporting</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;error&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">reportError</span>({</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        message<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">message</span><span class="op">,</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        filename<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">filename</span><span class="op">,</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        lineNumber<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">lineno</span><span class="op">,</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        columnNumber<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">colno</span><span class="op">,</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        stack<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">error</span><span class="op">?.</span><span class="at">stack</span><span class="op">,</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        userAgent<span class="op">:</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">userAgent</span><span class="op">,</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        url<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">href</span><span class="op">,</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        timestamp<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Unhandled promise rejections</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;unhandledrejection&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">reportError</span>({</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> <span class="st">&#39;unhandledrejection&#39;</span><span class="op">,</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        reason<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">reason</span><span class="op">,</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>        timestamp<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setupPerformanceMonitoring</span>() {</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Core Web Vitals tracking</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span>(<span class="st">&#39;web-vitals&#39;</span>)<span class="op">.</span><span class="fu">then</span>(({ getCLS<span class="op">,</span> getFID<span class="op">,</span> getFCP<span class="op">,</span> getLCP<span class="op">,</span> getTTFB }) <span class="kw">=&gt;</span> {</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getCLS</span>(<span class="kw">this</span><span class="op">.</span><span class="at">sendMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getFID</span>(<span class="kw">this</span><span class="op">.</span><span class="at">sendMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getFCP</span>(<span class="kw">this</span><span class="op">.</span><span class="at">sendMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getLCP</span>(<span class="kw">this</span><span class="op">.</span><span class="at">sendMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getTTFB</span>(<span class="kw">this</span><span class="op">.</span><span class="at">sendMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">sendMetric</span>(metric<span class="op">:</span> <span class="dt">any</span>) {</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send to analytics service</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    analytics<span class="op">.</span><span class="fu">track</span>(<span class="st">&#39;web_vital&#39;</span><span class="op">,</span> {</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> metric<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>      value<span class="op">:</span> metric<span class="op">.</span><span class="at">value</span><span class="op">,</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>      rating<span class="op">:</span> metric<span class="op">.</span><span class="at">rating</span><span class="op">,</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>      url<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">href</span><span class="op">,</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="chapter-2-definition-of-done-excellence">Chapter 2: Definition
of Done Excellence 🟢</h1>
<p><em>Pages 9-16</em></p>
<h2 id="beyond-it-works-creating-comprehensive-dod">Beyond “It Works”:
Creating Comprehensive DoD</h2>
<p>Definition of Done (DoD) is your contract with quality. It’s the
difference between shipping features and shipping production-ready
systems that create value and minimize risk.</p>
<h3 id="key-insight-dod-as-a-quality-multiplier">💡 Key Insight: DoD as
a Quality Multiplier</h3>
<p>A comprehensive DoD doesn’t slow you down—it speeds you up by: -
<strong>Preventing rework</strong> from missed requirements -
<strong>Reducing debugging time</strong> through proactive quality
checks - <strong>Enabling confident deployments</strong> with
predictable outcomes - <strong>Facilitating team scaling</strong> with
consistent standards</p>
<h2 id="the-four-dimensions-of-done">The Four Dimensions of Done</h2>
<h3 id="functional-completeness">1. Functional Completeness</h3>
<p><strong>Question</strong>: Does it work as specified?</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Functional DoD checklist</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> FunctionalDoD {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  requirements<span class="op">:</span> {</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    allAcceptanceCriteriaMet<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    edgeCasesHandled<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    errorScenariosAddressed<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    integrationPointsWorking<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  testing<span class="op">:</span> {</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    unitTestsCovering<span class="op">:</span> <span class="dt">number</span><span class="op">;</span> <span class="co">// &gt; 80% coverage</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    integrationTestsPassing<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    manualTestingCompleted<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    crossBrowserTested<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  validation<span class="op">:</span> {</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    productOwnerApproval<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    designApproval<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    stakeholderSignoff<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="non-functional-excellence">2. Non-Functional Excellence</h3>
<p><strong>Question</strong>: Does it work well under all
conditions?</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> NonFunctionalDoD {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  performance<span class="op">:</span> {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    loadTimeUnder3Seconds<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    coreWebVitalsGreen<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    bundleSizeWithinBudget<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    memoryLeaksAbsent<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  reliability<span class="op">:</span> {</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    errorHandlingImplemented<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    fallbacksConfigured<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    offlineCapabilityWorking<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    dataValidationActive<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  scalability<span class="op">:</span> {</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    performsWellUnderLoad<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    horizontallyScalable<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    databaseQueriesOptimized<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    cachingStrategyImplemented<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  security<span class="op">:</span> {</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    inputSanitized<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    authenticationRequired<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    sensitiveDataProtected<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    vulnerabilitiesScanned<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="code-quality-standards">3. Code Quality Standards</h3>
<p><strong>Question</strong>: Is it maintainable and extensible?</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> CodeQualityDoD {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  structure<span class="op">:</span> {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    singleResponsibilityPrinciple<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    dependencyInjectionUsed<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    configurationExternalized<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    magicNumbersEliminated<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  readability<span class="op">:</span> {</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    meaningfulNaming<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    selfDocumentingCode<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    complexityUnderThreshold<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span> <span class="co">// Cyclomatic complexity &lt; 10</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    commentsWhereNecessary<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  testing<span class="op">:</span> {</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    testable<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    mocksAndStubsMinimal<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    integrationTestable<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    performanceTestable<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  standards<span class="op">:</span> {</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    codingStandardsFollowed<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    lintingRulesPassed<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    typeScriptStrictMode<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    noConsoleLogsInProduction<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="operational-readiness">4. Operational Readiness</h3>
<p><strong>Question</strong>: Can it be deployed, monitored, and
maintained?</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> OperationalDoD {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  deployment<span class="op">:</span> {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    dockerizedCorrectly<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    environmentConfigCorrect<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    databaseMigrationsReady<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    rollbackPlanDefined<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  monitoring<span class="op">:</span> {</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    loggingImplemented<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    metricsCollected<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    alertsConfigured<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    dashboardsUpdated<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  documentation<span class="op">:</span> {</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    readmeUpdated<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    apiDocumentationComplete<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    deploymentGuideReady<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    troubleshootingGuideAvailable<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  support<span class="op">:</span> {</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    runbooksCreated<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    errorCodesDocumented<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    escalationPathsClear<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    maintenanceWindowsScheduled<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="dod-implementation-framework">DoD Implementation Framework</h2>
<h3 id="creating-team-specific-dod">Creating Team-Specific DoD</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// DoD Configuration Factory</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DoDConfigurationFactory {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">static</span> <span class="fu">createForProject</span>(projectType<span class="op">:</span> <span class="st">&#39;customer-facing&#39;</span> <span class="op">|</span> <span class="st">&#39;internal-tool&#39;</span> <span class="op">|</span> <span class="st">&#39;api&#39;</span> <span class="op">|</span> <span class="st">&#39;library&#39;</span>)<span class="op">:</span> DoDConfiguration {</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> base <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getBaseDoDConfiguration</span>()<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (projectType) {</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;customer-facing&#39;</span><span class="op">:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>          <span class="op">...</span>base<span class="op">,</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>          performance<span class="op">:</span> {</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">performance</span><span class="op">,</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>            coreWebVitalsRequired<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>            loadTimeThreshold<span class="op">:</span> <span class="dv">2000</span><span class="op">,</span> <span class="co">// 2 seconds</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>            accessibilityCompliance<span class="op">:</span> <span class="st">&#39;WCAG_AA&#39;</span><span class="op">,</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>          security<span class="op">:</span> {</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">security</span><span class="op">,</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>            csrfProtection<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>            contentSecurityPolicy<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>            gdprCompliance<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;internal-tool&#39;</span><span class="op">:</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>          <span class="op">...</span>base<span class="op">,</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>          performance<span class="op">:</span> {</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">performance</span><span class="op">,</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>            loadTimeThreshold<span class="op">:</span> <span class="dv">5000</span><span class="op">,</span> <span class="co">// 5 seconds acceptable</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>            accessibilityCompliance<span class="op">:</span> <span class="st">&#39;WCAG_A&#39;</span><span class="op">,</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>          documentation<span class="op">:</span> {</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">documentation</span><span class="op">,</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>            userTrainingMaterial<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>            adminGuide<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;api&#39;</span><span class="op">:</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>          <span class="op">...</span>base<span class="op">,</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>          performance<span class="op">:</span> {</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">performance</span><span class="op">,</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>            responseTimeThreshold<span class="op">:</span> <span class="dv">200</span><span class="op">,</span> <span class="co">// 200ms</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>            throughputRequirement<span class="op">:</span> <span class="dv">1000</span><span class="op">,</span> <span class="co">// requests per second</span></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>          documentation<span class="op">:</span> {</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">documentation</span><span class="op">,</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>            openApiSpec<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>            sdkAvailable<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;library&#39;</span><span class="op">:</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>          <span class="op">...</span>base<span class="op">,</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>          codeQuality<span class="op">:</span> {</span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">codeQuality</span><span class="op">,</span></span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>            backwardCompatibility<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>            versioningStrategy<span class="op">:</span> <span class="st">&#39;semver&#39;</span><span class="op">,</span></span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>            migrationGuides<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>          testing<span class="op">:</span> {</span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>base<span class="op">.</span><span class="at">testing</span><span class="op">,</span></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>            testCoverage<span class="op">:</span> <span class="dv">95</span><span class="op">,</span> <span class="co">// Higher coverage for libraries</span></span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a>            browserCompatibilityTesting<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="automated-dod-validation">Automated DoD Validation</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// DoD Automation Pipeline</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DoDValidator {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">validateStory</span>(storyId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>DoDValidationResult<span class="op">&gt;</span> {</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results <span class="op">=</span> <span class="cf">await</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>([</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">validateFunctional</span>(storyId)<span class="op">,</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">validateNonFunctional</span>(storyId)<span class="op">,</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">validateCodeQuality</span>(storyId)<span class="op">,</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">validateOperational</span>(storyId)<span class="op">,</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    ])<span class="op">;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">aggregateResults</span>(results)<span class="op">;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">validateFunctional</span>(storyId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ValidationResult<span class="op">&gt;</span> {</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> testResults <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">runAutomatedTests</span>(storyId)<span class="op">;</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> coverageReport <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateCoverageReport</span>(storyId)<span class="op">;</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> acceptanceCriteria <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">checkAcceptanceCriteria</span>(storyId)<span class="op">;</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>      passed<span class="op">:</span> testResults<span class="op">.</span><span class="at">allPassed</span> <span class="op">&amp;&amp;</span> </span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>              coverageReport<span class="op">.</span><span class="at">percentage</span> <span class="op">&gt;=</span> <span class="dv">80</span> <span class="op">&amp;&amp;</span> </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>              acceptanceCriteria<span class="op">.</span><span class="at">allMet</span><span class="op">,</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>      details<span class="op">:</span> {</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>        tests<span class="op">:</span> testResults<span class="op">,</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>        coverage<span class="op">:</span> coverageReport<span class="op">,</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>        acceptance<span class="op">:</span> acceptanceCriteria<span class="op">,</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">validateNonFunctional</span>(storyId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ValidationResult<span class="op">&gt;</span> {</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> performanceReport <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">runPerformanceTests</span>(storyId)<span class="op">;</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> securityScan <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">runSecurityScan</span>(storyId)<span class="op">;</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> accessibilityCheck <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">runAccessibilityCheck</span>(storyId)<span class="op">;</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>      passed<span class="op">:</span> performanceReport<span class="op">.</span><span class="at">passed</span> <span class="op">&amp;&amp;</span> </span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>              securityScan<span class="op">.</span><span class="at">vulnerabilities</span><span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> </span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>              accessibilityCheck<span class="op">.</span><span class="at">wcagLevel</span> <span class="op">&gt;=</span> <span class="st">&#39;AA&#39;</span><span class="op">,</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>      details<span class="op">:</span> {</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>        performance<span class="op">:</span> performanceReport<span class="op">,</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>        security<span class="op">:</span> securityScan<span class="op">,</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>        accessibility<span class="op">:</span> accessibilityCheck<span class="op">,</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">validateCodeQuality</span>(storyId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ValidationResult<span class="op">&gt;</span> {</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> lintResults <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">runLinter</span>(storyId)<span class="op">;</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> complexityAnalysis <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeComplexity</span>(storyId)<span class="op">;</span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dependencyCheck <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">checkDependencies</span>(storyId)<span class="op">;</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>      passed<span class="op">:</span> lintResults<span class="op">.</span><span class="at">errors</span><span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> </span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>              complexityAnalysis<span class="op">.</span><span class="at">averageComplexity</span> <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">&amp;&amp;</span> </span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>              dependencyCheck<span class="op">.</span><span class="at">vulnerabilities</span><span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>      details<span class="op">:</span> {</span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>        linting<span class="op">:</span> lintResults<span class="op">,</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>        complexity<span class="op">:</span> complexityAnalysis<span class="op">,</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>        dependencies<span class="op">:</span> dependencyCheck<span class="op">,</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="dod-metrics-and-continuous-improvement">DoD Metrics and
Continuous Improvement</h2>
<h3 id="measuring-dod-effectiveness">Measuring DoD Effectiveness</h3>
<div class="sourceCode" id="cb15"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// DoD Metrics Dashboard</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DoDMetrics {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateReport</span>(timeframe<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> DoDReport {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>      completionRates<span class="op">:</span> {</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        firstTimeRight<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateFirstTimeRightRate</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        reworkRequired<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateReworkRate</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        defectEscapeRate<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateDefectEscapeRate</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>      qualityTrends<span class="op">:</span> {</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        testCoverage<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getTestCoverageTrend</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        performanceScores<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getPerformanceScoreTrend</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        securityIncidents<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getSecurityIncidentTrend</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      teamProductivity<span class="op">:</span> {</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        velocityImpact<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateVelocityImpact</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        cycleTimeReduction<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateCycleTimeReduction</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>        productionIncidents<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getProductionIncidentTrend</span>(timeframe)<span class="op">,</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateImprovementRecommendations</span>()<span class="op">,</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">calculateFirstTimeRightRate</span>(timeframe<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> stories <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getStoriesInTimeframe</span>(timeframe)<span class="op">;</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> firstTimeRight <span class="op">=</span> stories<span class="op">.</span><span class="fu">filter</span>(story <span class="kw">=&gt;</span> </span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>      story<span class="op">.</span><span class="at">dodValidationAttempts</span> <span class="op">===</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> story<span class="op">.</span><span class="at">dodPassed</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (firstTimeRight<span class="op">.</span><span class="at">length</span> <span class="op">/</span> stories<span class="op">.</span><span class="at">length</span>) <span class="op">*</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateImprovementRecommendations</span>()<span class="op">:</span> Recommendation[] {</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> recommendations<span class="op">:</span> Recommendation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="fu">getAverageTestCoverage</span>() <span class="op">&lt;</span> <span class="dv">80</span>) {</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>        priority<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>        category<span class="op">:</span> <span class="st">&#39;testing&#39;</span><span class="op">,</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&#39;Test coverage below target (80%)&#39;</span><span class="op">,</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>        action<span class="op">:</span> <span class="st">&#39;Implement test-driven development practices&#39;</span><span class="op">,</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>        estimatedImpact<span class="op">:</span> <span class="st">&#39;Reduce defect escape rate by 40%&#39;</span><span class="op">,</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="fu">getAveragePerformanceScore</span>() <span class="op">&lt;</span> <span class="dv">90</span>) {</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>        priority<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>        category<span class="op">:</span> <span class="st">&#39;performance&#39;</span><span class="op">,</span></span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&#39;Performance scores below target (90)&#39;</span><span class="op">,</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>        action<span class="op">:</span> <span class="st">&#39;Implement performance budgets in CI/CD&#39;</span><span class="op">,</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>        estimatedImpact<span class="op">:</span> <span class="st">&#39;Improve user satisfaction by 25%&#39;</span><span class="op">,</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> recommendations<span class="op">;</span></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="dod-evolution-process">DoD Evolution Process</h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">// DoD Retrospective Framework</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> DoDRetrospective {</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  whatWorked<span class="op">:</span> {</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    effectiveCriteria<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    automationSuccesses<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    teamAdoption<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  whatDidntWork<span class="op">:</span> {</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    blockingCriteria<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    automationFailures<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    teamResistance<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  improvements<span class="op">:</span> {</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    criteriaRefinements<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    toolingUpgrades<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    processChanges<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  experiments<span class="op">:</span> {</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    newCriteria<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    pilotPrograms<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    measurementApproaches<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DoDEvolution {</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conductRetrospective</span>()<span class="op">:</span> DoDRetrospective {</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>      whatWorked<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">gatherPositiveFeedback</span>()<span class="op">,</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>      whatDidntWork<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">gatherNegativeFeedback</span>()<span class="op">,</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>      improvements<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateImprovements</span>()<span class="op">,</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>      experiments<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">proposeExperiments</span>()<span class="op">,</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">updateDoD</span>(retrospective<span class="op">:</span> DoDRetrospective)<span class="op">:</span> UpdatedDoD {</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> currentDoD <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getCurrentDoD</span>()<span class="op">;</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span>currentDoD<span class="op">,</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Remove blocking criteria</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>      criteria<span class="op">:</span> currentDoD<span class="op">.</span><span class="at">criteria</span><span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>        criterion <span class="kw">=&gt;</span> <span class="op">!</span>retrospective<span class="op">.</span><span class="at">whatDidntWork</span><span class="op">.</span><span class="at">blockingCriteria</span><span class="op">.</span><span class="fu">includes</span>(criterion<span class="op">.</span><span class="at">id</span>)</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Add refined criteria</span></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>      newCriteria<span class="op">:</span> retrospective<span class="op">.</span><span class="at">improvements</span><span class="op">.</span><span class="at">criteriaRefinements</span><span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>        refinement <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createCriterion</span>(refinement)</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Update automation</span></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>      automation<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">updateAutomation</span>(retrospective<span class="op">.</span><span class="at">improvements</span><span class="op">.</span><span class="at">toolingUpgrades</span>)<span class="op">,</span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Version tracking</span></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a>      version<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">incrementVersion</span>(currentDoD<span class="op">.</span><span class="at">version</span>)<span class="op">,</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>      lastUpdated<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>      rationale<span class="op">:</span> retrospective<span class="op">,</span></span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="common-dod-anti-patterns">⚠️ Common DoD Anti-Patterns</h2>
<h3 id="anti-pattern-1-checklist-theater">Anti-Pattern #1: Checklist
Theater</h3>
<p><strong>Problem</strong>: Going through motions without understanding
purpose <strong>Solution</strong>: Regular DoD retrospectives and
education on “why” behind each criterion</p>
<h3 id="anti-pattern-2-one-size-fits-all">Anti-Pattern #2:
One-Size-Fits-All</h3>
<p><strong>Problem</strong>: Same DoD for all story types (bug fixes,
features, technical debt) <strong>Solution</strong>: Contextual DoD
based on story type and risk level</p>
<h3 id="anti-pattern-3-manual-only-validation">Anti-Pattern #3:
Manual-Only Validation</h3>
<p><strong>Problem</strong>: Relying on humans to remember and check
everything <strong>Solution</strong>: Automate what can be automated,
make manual checks easy and obvious</p>
<h3 id="anti-pattern-4-perfection-paralysis">Anti-Pattern #4: Perfection
Paralysis</h3>
<p><strong>Problem</strong>: DoD so comprehensive that nothing ever gets
done <strong>Solution</strong>: Start with basics, evolve incrementally
based on what actually prevents issues</p>
<h2 id="implementation-guide-dod-workshop">🛠️ Implementation Guide: DoD
Workshop</h2>
<h3 id="minute-dod-creation-workshop">90-Minute DoD Creation
Workshop</h3>
<p><strong>Preparation (15 minutes)</strong> - Gather recent production
incidents - Collect metrics on rework and defect rates - Prepare
examples of “done” vs. “really done”</p>
<p><strong>Current State Analysis (20 minutes)</strong> - What does
“done” mean today? - What causes rework in our team? - What production
issues could have been prevented?</p>
<p><strong>DoD Brainstorming (25 minutes)</strong> - What should be true
of every story we complete? - What automated checks could prevent manual
errors? - What stakeholder approvals are needed?</p>
<p><strong>Prioritization and Refinement (20 minutes)</strong> - Which
criteria are must-haves vs. nice-to-haves? - What can be automated
vs. requires manual checking? - How will we measure compliance?</p>
<p><strong>Action Planning (10 minutes)</strong> - Who will implement
automation? - When will we review and refine? - How will we onboard the
team?</p>
<h3 id="dod-template-for-teams">DoD Template for Teams</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Starter DoD Template</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> starterDoD<span class="op">:</span> DoDConfiguration <span class="op">=</span> {</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  functional<span class="op">:</span> {</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    allAcceptanceCriteriaMet<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    edgeCasesHandled<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    crossBrowserTested<span class="op">:</span> [<span class="st">&#39;chrome&#39;</span><span class="op">,</span> <span class="st">&#39;firefox&#39;</span><span class="op">,</span> <span class="st">&#39;safari&#39;</span>]<span class="op">,</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    mobileResponsive<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  technical<span class="op">:</span> {</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    codeReviewed<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    testCoverage<span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    lintingPassed<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    bundleSizeWithinBudget<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  quality<span class="op">:</span> {</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    performanceAcceptable<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    accessibilityChecked<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    securityScanned<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    errorHandlingImplemented<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  operational<span class="op">:</span> {</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>    documentationUpdated<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>    deploymentTested<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    monitoringConfigured<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    rollbackPlanReady<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<hr />
<h1 id="chapter-3-testing-strategies-for-enterprise">Chapter 3: Testing
Strategies for Enterprise 🟡</h1>
<p><em>Pages 17-28</em></p>
<h2 id="the-testing-pyramid-for-frontend-applications">The Testing
Pyramid for Frontend Applications</h2>
<p>Enterprise frontend testing goes beyond “does it work?” to “does it
work reliably for all users under all conditions?” This requires a
strategic approach to testing that balances coverage, speed, and
confidence.</p>
<h3 id="key-insight-testing-roi-optimization">💡 Key Insight: Testing
ROI Optimization</h3>
<p>Different types of tests provide different value: - <strong>Unit
tests</strong>: Fast feedback, low cost, high volume -
<strong>Integration tests</strong>: Medium feedback, medium cost, medium
volume<br />
- <strong>E2E tests</strong>: Slow feedback, high cost, low volume (but
high confidence)</p>
<p>The key is optimizing for the right mix based on your application’s
risk profile.</p>
<h2 id="the-modern-frontend-testing-pyramid">The Modern Frontend Testing
Pyramid</h2>
<div class="sourceCode" id="cb18"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Enterprise Frontend Testing Strategy</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> TestingStrategy {</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  unit<span class="op">:</span> {</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    coverage<span class="op">:</span> <span class="dv">80</span><span class="op">;</span> <span class="co">// 80% line coverage minimum</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    focus<span class="op">:</span> [<span class="st">&#39;business logic&#39;</span><span class="op">,</span> <span class="st">&#39;utilities&#39;</span><span class="op">,</span> <span class="st">&#39;hooks&#39;</span><span class="op">,</span> <span class="st">&#39;pure components&#39;</span>]<span class="op">;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">:</span> [<span class="st">&#39;vitest&#39;</span><span class="op">,</span> <span class="st">&#39;jest&#39;</span><span class="op">,</span> <span class="st">&#39;@testing-library/react&#39;</span>]<span class="op">;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    speed<span class="op">:</span> <span class="st">&#39;milliseconds&#39;</span><span class="op">;</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  integration<span class="op">:</span> {</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    coverage<span class="op">:</span> <span class="dv">60</span><span class="op">;</span> <span class="co">// 60% of user flows</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    focus<span class="op">:</span> [<span class="st">&#39;component interactions&#39;</span><span class="op">,</span> <span class="st">&#39;data flow&#39;</span><span class="op">,</span> <span class="st">&#39;state management&#39;</span>]<span class="op">;</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">:</span> [<span class="st">&#39;react-testing-library&#39;</span><span class="op">,</span> <span class="st">&#39;msw&#39;</span><span class="op">,</span> <span class="st">&#39;vitest&#39;</span>]<span class="op">;</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    speed<span class="op">:</span> <span class="st">&#39;seconds&#39;</span><span class="op">;</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  e2e<span class="op">:</span> {</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    coverage<span class="op">:</span> <span class="dv">20</span><span class="op">;</span> <span class="co">// 20% critical user journeys</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    focus<span class="op">:</span> [<span class="st">&#39;complete user workflows&#39;</span><span class="op">,</span> <span class="st">&#39;cross-browser compatibility&#39;</span>]<span class="op">;</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">:</span> [<span class="st">&#39;playwright&#39;</span><span class="op">,</span> <span class="st">&#39;cypress&#39;</span>]<span class="op">;</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    speed<span class="op">:</span> <span class="st">&#39;minutes&#39;</span><span class="op">;</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  visual<span class="op">:</span> {</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    coverage<span class="op">:</span> <span class="dv">100</span><span class="op">;</span> <span class="co">// All UI components</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    focus<span class="op">:</span> [<span class="st">&#39;regression prevention&#39;</span><span class="op">,</span> <span class="st">&#39;design system compliance&#39;</span>]<span class="op">;</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">:</span> [<span class="st">&#39;chromatic&#39;</span><span class="op">,</span> <span class="st">&#39;percy&#39;</span><span class="op">,</span> <span class="st">&#39;storybook&#39;</span>]<span class="op">;</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    speed<span class="op">:</span> <span class="st">&#39;seconds to minutes&#39;</span><span class="op">;</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="unit-testing-excellence">Unit Testing Excellence</h2>
<h3 id="testing-react-components-with-purpose">Testing React Components
with Purpose</h3>
<div class="sourceCode" id="cb19"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Component to test</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> UserCardProps {</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  user<span class="op">:</span> User<span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  onEdit<span class="op">:</span> (user<span class="op">:</span> User) <span class="kw">=&gt;</span> <span class="dt">void</span><span class="op">;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  onDelete<span class="op">:</span> (userId<span class="op">:</span> <span class="dt">string</span>) <span class="kw">=&gt;</span> <span class="dt">void</span><span class="op">;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  canEdit<span class="op">?:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  canDelete<span class="op">?:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> UserCard<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span><span class="op">&lt;</span>UserCardProps<span class="op">&gt;</span> <span class="op">=</span> ({</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  user<span class="op">,</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  onEdit<span class="op">,</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  onDelete<span class="op">,</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  canEdit <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  canDelete <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>}) <span class="kw">=&gt;</span> {</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [isEditing<span class="op">,</span> setIsEditing] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> handleEdit <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (canEdit) {</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setIsEditing</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">onEdit</span>(user)<span class="op">;</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> handleDelete <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (canDelete <span class="op">&amp;&amp;</span> <span class="bu">window</span><span class="op">.</span><span class="fu">confirm</span>(<span class="vs">`Delete </span><span class="sc">${</span>user<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">?`</span>)) {</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">onDelete</span>(user<span class="op">.</span><span class="at">id</span>)<span class="op">;</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div data<span class="op">-</span>testid<span class="op">=</span><span class="st">&quot;user-card&quot;</span> className<span class="op">=</span><span class="st">&quot;user-card&quot;</span><span class="op">&gt;</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>img src<span class="op">=</span>{user<span class="op">.</span><span class="at">avatar</span>} alt<span class="op">=</span>{<span class="vs">`</span><span class="sc">${</span>user<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">&#39;s avatar`</span>} <span class="op">/&gt;</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>h3<span class="op">&gt;</span>{user<span class="op">.</span><span class="at">name</span>}<span class="op">&lt;/</span>h3<span class="op">&gt;</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>p<span class="op">&gt;</span>{user<span class="op">.</span><span class="at">email</span>}<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>      {canEdit <span class="op">&amp;&amp;</span> (</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>button</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>          onClick<span class="op">=</span>{handleEdit}</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>          data<span class="op">-</span>testid<span class="op">=</span><span class="st">&quot;edit-button&quot;</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>          aria<span class="op">-</span>label<span class="op">=</span>{<span class="vs">`Edit </span><span class="sc">${</span>user<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">`</span>}</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>        <span class="op">&gt;</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>          Edit</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>      )}</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>      {canDelete <span class="op">&amp;&amp;</span> (</span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>button</span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>          onClick<span class="op">=</span>{handleDelete}</span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>          data<span class="op">-</span>testid<span class="op">=</span><span class="st">&quot;delete-button&quot;</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>          aria<span class="op">-</span>label<span class="op">=</span>{<span class="vs">`Delete </span><span class="sc">${</span>user<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">`</span>}</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>        <span class="op">&gt;</span></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>          Delete</span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>      )}</span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Comprehensive unit tests</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { render<span class="op">,</span> <span class="bu">screen</span><span class="op">,</span> fireEvent<span class="op">,</span> waitFor } <span class="im">from</span> <span class="st">&#39;@testing-library/react&#39;</span><span class="op">;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> userEvent <span class="im">from</span> <span class="st">&#39;@testing-library/user-event&#39;</span><span class="op">;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { UserCard } <span class="im">from</span> <span class="st">&#39;./UserCard&#39;</span><span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;UserCard&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> mockUser<span class="op">:</span> User <span class="op">=</span> {</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    name<span class="op">:</span> <span class="st">&#39;John Doe&#39;</span><span class="op">,</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    email<span class="op">:</span> <span class="st">&#39;john@example.com&#39;</span><span class="op">,</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    avatar<span class="op">:</span> <span class="st">&#39;/avatars/john.jpg&#39;</span><span class="op">,</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> defaultProps <span class="op">=</span> {</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    user<span class="op">:</span> mockUser<span class="op">,</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    onEdit<span class="op">:</span> vi<span class="op">.</span><span class="fu">fn</span>()<span class="op">,</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    onDelete<span class="op">:</span> vi<span class="op">.</span><span class="fu">fn</span>()<span class="op">,</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">beforeEach</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    vi<span class="op">.</span><span class="fu">clearAllMocks</span>()<span class="op">;</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;Rendering&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;renders user information correctly&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;John Doe&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;john@example.com&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByAltText</span>(<span class="st">&quot;John Doe&#39;s avatar&quot;</span>))<span class="op">.</span><span class="fu">toHaveAttribute</span>(</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;src&#39;</span><span class="op">,</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;/avatars/john.jpg&#39;</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;renders edit button when canEdit is true&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} canEdit <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;edit-button&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;does not render edit button when canEdit is false&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} canEdit<span class="op">=</span>{<span class="kw">false</span>} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">queryByTestId</span>(<span class="st">&#39;edit-button&#39;</span>))<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;renders delete button when canDelete is true&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} canDelete <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;delete-button&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;Interactions&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;calls onEdit when edit button is clicked&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> onEdit <span class="op">=</span> vi<span class="op">.</span><span class="fu">fn</span>()<span class="op">;</span></span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} onEdit<span class="op">=</span>{onEdit} canEdit <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> editButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;edit-button&#39;</span>)<span class="op">;</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(editButton)<span class="op">;</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(onEdit)<span class="op">.</span><span class="fu">toHaveBeenCalledWith</span>(mockUser)<span class="op">;</span></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(onEdit)<span class="op">.</span><span class="fu">toHaveBeenCalledTimes</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;calls onDelete when delete is confirmed&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> onDelete <span class="op">=</span> vi<span class="op">.</span><span class="fu">fn</span>()<span class="op">;</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Mock window.confirm to return true</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>      vi<span class="op">.</span><span class="fu">spyOn</span>(<span class="bu">window</span><span class="op">,</span> <span class="st">&#39;confirm&#39;</span>)<span class="op">.</span><span class="fu">mockReturnValue</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} onDelete<span class="op">=</span>{onDelete} canDelete <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> deleteButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;delete-button&#39;</span>)<span class="op">;</span></span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(deleteButton)<span class="op">;</span></span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">window</span><span class="op">.</span><span class="at">confirm</span>)<span class="op">.</span><span class="fu">toHaveBeenCalledWith</span>(<span class="st">&#39;Delete John Doe?&#39;</span>)<span class="op">;</span></span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(onDelete)<span class="op">.</span><span class="fu">toHaveBeenCalledWith</span>(<span class="st">&#39;1&#39;</span>)<span class="op">;</span></span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(onDelete)<span class="op">.</span><span class="fu">toHaveBeenCalledTimes</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;does not call onDelete when delete is cancelled&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> onDelete <span class="op">=</span> vi<span class="op">.</span><span class="fu">fn</span>()<span class="op">;</span></span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Mock window.confirm to return false</span></span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a>      vi<span class="op">.</span><span class="fu">spyOn</span>(<span class="bu">window</span><span class="op">,</span> <span class="st">&#39;confirm&#39;</span>)<span class="op">.</span><span class="fu">mockReturnValue</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} onDelete<span class="op">=</span>{onDelete} canDelete <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> deleteButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;delete-button&#39;</span>)<span class="op">;</span></span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(deleteButton)<span class="op">;</span></span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">window</span><span class="op">.</span><span class="at">confirm</span>)<span class="op">.</span><span class="fu">toHaveBeenCalled</span>()<span class="op">;</span></span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(onDelete)<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toHaveBeenCalled</span>()<span class="op">;</span></span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;Accessibility&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;has proper aria labels for action buttons&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} canEdit canDelete <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Edit John Doe&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Delete John Doe&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;supports keyboard navigation&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> onEdit <span class="op">=</span> vi<span class="op">.</span><span class="fu">fn</span>()<span class="op">;</span></span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} onEdit<span class="op">=</span>{onEdit} canEdit <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-110"><a href="#cb20-110" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-111"><a href="#cb20-111" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> editButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;edit-button&#39;</span>)<span class="op">;</span></span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a>      editButton<span class="op">.</span><span class="fu">focus</span>()<span class="op">;</span></span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">keyboard</span>(<span class="st">&#39;{Enter}&#39;</span>)<span class="op">;</span></span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(onEdit)<span class="op">.</span><span class="fu">toHaveBeenCalledWith</span>(mockUser)<span class="op">;</span></span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;Edge Cases&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;handles missing avatar gracefully&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> userWithoutAvatar <span class="op">=</span> { <span class="op">...</span>mockUser<span class="op">,</span> avatar<span class="op">:</span> <span class="st">&#39;&#39;</span> }<span class="op">;</span></span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} user<span class="op">=</span>{userWithoutAvatar} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-124"><a href="#cb20-124" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-125"><a href="#cb20-125" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> avatar <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByAltText</span>(<span class="st">&quot;John Doe&#39;s avatar&quot;</span>)<span class="op">;</span></span>
<span id="cb20-126"><a href="#cb20-126" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(avatar)<span class="op">.</span><span class="fu">toHaveAttribute</span>(<span class="st">&#39;src&#39;</span><span class="op">,</span> <span class="st">&#39;&#39;</span>)<span class="op">;</span></span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;handles long names without breaking layout&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> userWithLongName <span class="op">=</span> {</span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span>mockUser<span class="op">,</span></span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="st">&#39;A very long name that might break the layout if not handled properly&#39;</span><span class="op">,</span></span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a>      <span class="fu">render</span>(<span class="op">&lt;</span>UserCard {<span class="op">...</span>defaultProps} user<span class="op">=</span>{userWithLongName} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb20-137"><a href="#cb20-137" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> nameElement <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(userWithLongName<span class="op">.</span><span class="at">name</span>)<span class="op">;</span></span>
<span id="cb20-138"><a href="#cb20-138" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(nameElement)<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb20-139"><a href="#cb20-139" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb20-140"><a href="#cb20-140" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb20-141"><a href="#cb20-141" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="testing-custom-hooks">Testing Custom Hooks</h3>
<div class="sourceCode" id="cb21"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Custom hook to test</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> useUserManagement <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [users<span class="op">,</span> setUsers] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>User[]<span class="op">&gt;</span>([])<span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [loading<span class="op">,</span> setLoading] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [error<span class="op">,</span> setError] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span><span class="dt">string</span> <span class="op">|</span> <span class="dt">null</span><span class="op">&gt;</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> fetchUsers <span class="op">=</span> <span class="fu">useCallback</span>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setLoading</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setError</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> userService<span class="op">.</span><span class="fu">getUsers</span>()<span class="op">;</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setUsers</span>(response<span class="op">.</span><span class="at">data</span>)<span class="op">;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setError</span>(err <span class="kw">instanceof</span> <span class="bu">Error</span> <span class="op">?</span> err<span class="op">.</span><span class="at">message</span> <span class="op">:</span> <span class="st">&#39;Unknown error&#39;</span>)<span class="op">;</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">finally</span> {</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setLoading</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> [])<span class="op">;</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> addUser <span class="op">=</span> <span class="fu">useCallback</span>(<span class="kw">async</span> (user<span class="op">:</span> CreateUserRequest) <span class="kw">=&gt;</span> {</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setLoading</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setError</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> newUser <span class="op">=</span> <span class="cf">await</span> userService<span class="op">.</span><span class="fu">createUser</span>(user)<span class="op">;</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setUsers</span>(prev <span class="kw">=&gt;</span> [<span class="op">...</span>prev<span class="op">,</span> newUser])<span class="op">;</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> newUser<span class="op">;</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setError</span>(err <span class="kw">instanceof</span> <span class="bu">Error</span> <span class="op">?</span> err<span class="op">.</span><span class="at">message</span> <span class="op">:</span> <span class="st">&#39;Unknown error&#39;</span>)<span class="op">;</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> err<span class="op">;</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">finally</span> {</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setLoading</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> [])<span class="op">;</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> deleteUser <span class="op">=</span> <span class="fu">useCallback</span>(<span class="kw">async</span> (userId<span class="op">:</span> <span class="dt">string</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setLoading</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setError</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> userService<span class="op">.</span><span class="fu">deleteUser</span>(userId)<span class="op">;</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setUsers</span>(prev <span class="kw">=&gt;</span> prev<span class="op">.</span><span class="fu">filter</span>(user <span class="kw">=&gt;</span> user<span class="op">.</span><span class="at">id</span> <span class="op">!==</span> userId))<span class="op">;</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (err) {</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setError</span>(err <span class="kw">instanceof</span> <span class="bu">Error</span> <span class="op">?</span> err<span class="op">.</span><span class="at">message</span> <span class="op">:</span> <span class="st">&#39;Unknown error&#39;</span>)<span class="op">;</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> err<span class="op">;</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">finally</span> {</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setLoading</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> [])<span class="op">;</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>    users<span class="op">,</span></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>    loading<span class="op">,</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>    error<span class="op">,</span></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>    fetchUsers<span class="op">,</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>    addUser<span class="op">,</span></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>    deleteUser<span class="op">,</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Hook testing with renderHook</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { renderHook<span class="op">,</span> act<span class="op">,</span> waitFor } <span class="im">from</span> <span class="st">&#39;@testing-library/react&#39;</span><span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { useUserManagement } <span class="im">from</span> <span class="st">&#39;./useUserManagement&#39;</span><span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { userService } <span class="im">from</span> <span class="st">&#39;../services/userService&#39;</span><span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Mock the service</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>vi<span class="op">.</span><span class="fu">mock</span>(<span class="st">&#39;../services/userService&#39;</span>)<span class="op">;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;useUserManagement&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">beforeEach</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    vi<span class="op">.</span><span class="fu">clearAllMocks</span>()<span class="op">;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;fetchUsers&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;successfully fetches users&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> mockUsers <span class="op">=</span> [</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>        { id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;John&#39;</span><span class="op">,</span> email<span class="op">:</span> <span class="st">&#39;john@example.com&#39;</span> }<span class="op">,</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>        { id<span class="op">:</span> <span class="st">&#39;2&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Jane&#39;</span><span class="op">,</span> email<span class="op">:</span> <span class="st">&#39;jane@example.com&#39;</span> }<span class="op">,</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">;</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>      vi<span class="op">.</span><span class="fu">mocked</span>(userService<span class="op">.</span><span class="at">getUsers</span>)<span class="op">.</span><span class="fu">mockResolvedValue</span>({</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        data<span class="op">:</span> mockUsers<span class="op">,</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> { result } <span class="op">=</span> <span class="fu">renderHook</span>(() <span class="kw">=&gt;</span> <span class="fu">useUserManagement</span>())<span class="op">;</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">loading</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">users</span>)<span class="op">.</span><span class="fu">toEqual</span>([])<span class="op">;</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">act</span>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="fu">fetchUsers</span>()<span class="op">;</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">loading</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">users</span>)<span class="op">.</span><span class="fu">toEqual</span>(mockUsers)<span class="op">;</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">error</span>)<span class="op">.</span><span class="fu">toBeNull</span>()<span class="op">;</span></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;handles fetch errors correctly&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> errorMessage <span class="op">=</span> <span class="st">&#39;Failed to fetch users&#39;</span><span class="op">;</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>      vi<span class="op">.</span><span class="fu">mocked</span>(userService<span class="op">.</span><span class="at">getUsers</span>)<span class="op">.</span><span class="fu">mockRejectedValue</span>(</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="bu">Error</span>(errorMessage)</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> { result } <span class="op">=</span> <span class="fu">renderHook</span>(() <span class="kw">=&gt;</span> <span class="fu">useUserManagement</span>())<span class="op">;</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">act</span>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="fu">fetchUsers</span>()<span class="op">;</span></span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">loading</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">users</span>)<span class="op">.</span><span class="fu">toEqual</span>([])<span class="op">;</span></span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">error</span>)<span class="op">.</span><span class="fu">toBe</span>(errorMessage)<span class="op">;</span></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;sets loading state during fetch&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Mock a delayed response</span></span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a>      vi<span class="op">.</span><span class="fu">mocked</span>(userService<span class="op">.</span><span class="at">getUsers</span>)<span class="op">.</span><span class="fu">mockImplementation</span>(</span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a>        () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Promise</span>(resolve <span class="kw">=&gt;</span> </span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a>          <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="fu">resolve</span>({ data<span class="op">:</span> [] })<span class="op">,</span> <span class="dv">100</span>)</span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> { result } <span class="op">=</span> <span class="fu">renderHook</span>(() <span class="kw">=&gt;</span> <span class="fu">useUserManagement</span>())<span class="op">;</span></span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a>      <span class="fu">act</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb22-67"><a href="#cb22-67" aria-hidden="true" tabindex="-1"></a>        result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="fu">fetchUsers</span>()<span class="op">;</span></span>
<span id="cb22-68"><a href="#cb22-68" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb22-69"><a href="#cb22-69" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-70"><a href="#cb22-70" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">loading</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb22-71"><a href="#cb22-71" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-72"><a href="#cb22-72" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">waitFor</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb22-73"><a href="#cb22-73" aria-hidden="true" tabindex="-1"></a>        <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">loading</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb22-74"><a href="#cb22-74" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb22-75"><a href="#cb22-75" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb22-76"><a href="#cb22-76" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb22-77"><a href="#cb22-77" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-78"><a href="#cb22-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;addUser&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-79"><a href="#cb22-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;adds user to the list on success&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-80"><a href="#cb22-80" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> newUser <span class="op">=</span> { id<span class="op">:</span> <span class="st">&#39;3&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Bob&#39;</span><span class="op">,</span> email<span class="op">:</span> <span class="st">&#39;bob@example.com&#39;</span> }<span class="op">;</span></span>
<span id="cb22-81"><a href="#cb22-81" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> createRequest <span class="op">=</span> { name<span class="op">:</span> <span class="st">&#39;Bob&#39;</span><span class="op">,</span> email<span class="op">:</span> <span class="st">&#39;bob@example.com&#39;</span> }<span class="op">;</span></span>
<span id="cb22-82"><a href="#cb22-82" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-83"><a href="#cb22-83" aria-hidden="true" tabindex="-1"></a>      vi<span class="op">.</span><span class="fu">mocked</span>(userService<span class="op">.</span><span class="at">createUser</span>)<span class="op">.</span><span class="fu">mockResolvedValue</span>(newUser)<span class="op">;</span></span>
<span id="cb22-84"><a href="#cb22-84" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-85"><a href="#cb22-85" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> { result } <span class="op">=</span> <span class="fu">renderHook</span>(() <span class="kw">=&gt;</span> <span class="fu">useUserManagement</span>())<span class="op">;</span></span>
<span id="cb22-86"><a href="#cb22-86" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-87"><a href="#cb22-87" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">act</span>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-88"><a href="#cb22-88" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> user <span class="op">=</span> <span class="cf">await</span> result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="fu">addUser</span>(createRequest)<span class="op">;</span></span>
<span id="cb22-89"><a href="#cb22-89" aria-hidden="true" tabindex="-1"></a>        <span class="fu">expect</span>(user)<span class="op">.</span><span class="fu">toEqual</span>(newUser)<span class="op">;</span></span>
<span id="cb22-90"><a href="#cb22-90" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb22-91"><a href="#cb22-91" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-92"><a href="#cb22-92" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">users</span>)<span class="op">.</span><span class="fu">toEqual</span>([newUser])<span class="op">;</span></span>
<span id="cb22-93"><a href="#cb22-93" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">error</span>)<span class="op">.</span><span class="fu">toBeNull</span>()<span class="op">;</span></span>
<span id="cb22-94"><a href="#cb22-94" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb22-95"><a href="#cb22-95" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-96"><a href="#cb22-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;handles add user errors without modifying state&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-97"><a href="#cb22-97" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> errorMessage <span class="op">=</span> <span class="st">&#39;Failed to create user&#39;</span><span class="op">;</span></span>
<span id="cb22-98"><a href="#cb22-98" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> createRequest <span class="op">=</span> { name<span class="op">:</span> <span class="st">&#39;Bob&#39;</span><span class="op">,</span> email<span class="op">:</span> <span class="st">&#39;bob@example.com&#39;</span> }<span class="op">;</span></span>
<span id="cb22-99"><a href="#cb22-99" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-100"><a href="#cb22-100" aria-hidden="true" tabindex="-1"></a>      vi<span class="op">.</span><span class="fu">mocked</span>(userService<span class="op">.</span><span class="at">createUser</span>)<span class="op">.</span><span class="fu">mockRejectedValue</span>(</span>
<span id="cb22-101"><a href="#cb22-101" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="bu">Error</span>(errorMessage)</span>
<span id="cb22-102"><a href="#cb22-102" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb22-103"><a href="#cb22-103" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-104"><a href="#cb22-104" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> { result } <span class="op">=</span> <span class="fu">renderHook</span>(() <span class="kw">=&gt;</span> <span class="fu">useUserManagement</span>())<span class="op">;</span></span>
<span id="cb22-105"><a href="#cb22-105" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-106"><a href="#cb22-106" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">act</span>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-107"><a href="#cb22-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="fu">addUser</span>(createRequest))<span class="op">.</span><span class="at">rejects</span><span class="op">.</span><span class="fu">toThrow</span>(</span>
<span id="cb22-108"><a href="#cb22-108" aria-hidden="true" tabindex="-1"></a>          errorMessage</span>
<span id="cb22-109"><a href="#cb22-109" aria-hidden="true" tabindex="-1"></a>        )<span class="op">;</span></span>
<span id="cb22-110"><a href="#cb22-110" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb22-111"><a href="#cb22-111" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb22-112"><a href="#cb22-112" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">users</span>)<span class="op">.</span><span class="fu">toEqual</span>([])<span class="op">;</span></span>
<span id="cb22-113"><a href="#cb22-113" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(result<span class="op">.</span><span class="at">current</span><span class="op">.</span><span class="at">error</span>)<span class="op">.</span><span class="fu">toBe</span>(errorMessage)<span class="op">;</span></span>
<span id="cb22-114"><a href="#cb22-114" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb22-115"><a href="#cb22-115" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb22-116"><a href="#cb22-116" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h2 id="integration-testing-excellence">Integration Testing
Excellence</h2>
<h3 id="testing-component-integration">Testing Component
Integration</h3>
<div class="sourceCode" id="cb23"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Integration test for user management flow</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { render<span class="op">,</span> <span class="bu">screen</span><span class="op">,</span> waitFor } <span class="im">from</span> <span class="st">&#39;@testing-library/react&#39;</span><span class="op">;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> userEvent <span class="im">from</span> <span class="st">&#39;@testing-library/user-event&#39;</span><span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { QueryClient<span class="op">,</span> QueryClientProvider } <span class="im">from</span> <span class="st">&#39;@tanstack/react-query&#39;</span><span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { UserManagementPage } <span class="im">from</span> <span class="st">&#39;./UserManagementPage&#39;</span><span class="op">;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { server } <span class="im">from</span> <span class="st">&#39;../mocks/server&#39;</span><span class="op">;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Mock service worker for API calls</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">beforeAll</span>(() <span class="kw">=&gt;</span> server<span class="op">.</span><span class="fu">listen</span>())<span class="op">;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">afterEach</span>(() <span class="kw">=&gt;</span> server<span class="op">.</span><span class="fu">resetHandlers</span>())<span class="op">;</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="fu">afterAll</span>(() <span class="kw">=&gt;</span> server<span class="op">.</span><span class="fu">close</span>())<span class="op">;</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> renderWithProviders <span class="op">=</span> (component<span class="op">:</span> React<span class="op">.</span><span class="at">ReactElement</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> queryClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryClient</span>({</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    defaultOptions<span class="op">:</span> {</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>      queries<span class="op">:</span> { retry<span class="op">:</span> <span class="kw">false</span> }<span class="op">,</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>      mutations<span class="op">:</span> { retry<span class="op">:</span> <span class="kw">false</span> }<span class="op">,</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">render</span>(</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>QueryClientProvider client<span class="op">=</span>{queryClient}<span class="op">&gt;</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>      {component}</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>QueryClientProvider<span class="op">&gt;</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;UserManagementPage Integration&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;completes full user management workflow&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">renderWithProviders</span>(<span class="op">&lt;</span>UserManagementPage <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Wait for initial data load</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">waitFor</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;John Doe&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add a new user</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> addButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Add User&#39;</span>)<span class="op">;</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(addButton)<span class="op">;</span></span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> nameInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Name&#39;</span>)<span class="op">;</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> emailInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Email&#39;</span>)<span class="op">;</span></span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> submitButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Create User&#39;</span>)<span class="op">;</span></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">type</span>(nameInput<span class="op">,</span> <span class="st">&#39;Alice Smith&#39;</span>)<span class="op">;</span></span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">type</span>(emailInput<span class="op">,</span> <span class="st">&#39;alice@example.com&#39;</span>)<span class="op">;</span></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(submitButton)<span class="op">;</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify user was added</span></span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">waitFor</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Alice Smith&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Edit the user</span></span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> editButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Edit Alice Smith&#39;</span>)<span class="op">;</span></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(editButton)<span class="op">;</span></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> editNameInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByDisplayValue</span>(<span class="st">&#39;Alice Smith&#39;</span>)<span class="op">;</span></span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">clear</span>(editNameInput)<span class="op">;</span></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">type</span>(editNameInput<span class="op">,</span> <span class="st">&#39;Alice Johnson&#39;</span>)<span class="op">;</span></span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> saveButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Save&#39;</span>)<span class="op">;</span></span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(saveButton)<span class="op">;</span></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify user was updated</span></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">waitFor</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Alice Johnson&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">queryByText</span>(<span class="st">&#39;Alice Smith&#39;</span>))<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Delete the user</span></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> deleteButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Delete Alice Johnson&#39;</span>)<span class="op">;</span></span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(deleteButton)<span class="op">;</span></span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Confirm deletion</span></span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> confirmButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Confirm Delete&#39;</span>)<span class="op">;</span></span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(confirmButton)<span class="op">;</span></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify user was deleted</span></span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">waitFor</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">queryByText</span>(<span class="st">&#39;Alice Johnson&#39;</span>))<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;handles API errors gracefully&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Mock server error for user creation</span></span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a>    server<span class="op">.</span><span class="fu">use</span>(</span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a>      rest<span class="op">.</span><span class="fu">post</span>(<span class="st">&#39;/api/users&#39;</span><span class="op">,</span> (req<span class="op">,</span> res<span class="op">,</span> ctx) <span class="kw">=&gt;</span> {</span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">res</span>(ctx<span class="op">.</span><span class="fu">status</span>(<span class="dv">500</span>)<span class="op">,</span> ctx<span class="op">.</span><span class="fu">json</span>({ message<span class="op">:</span> <span class="st">&#39;Server error&#39;</span> }))<span class="op">;</span></span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-93"><a href="#cb23-93" aria-hidden="true" tabindex="-1"></a>    <span class="fu">renderWithProviders</span>(<span class="op">&lt;</span>UserManagementPage <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb23-94"><a href="#cb23-94" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-95"><a href="#cb23-95" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> addButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Add User&#39;</span>)<span class="op">;</span></span>
<span id="cb23-96"><a href="#cb23-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(addButton)<span class="op">;</span></span>
<span id="cb23-97"><a href="#cb23-97" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-98"><a href="#cb23-98" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> nameInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Name&#39;</span>)<span class="op">;</span></span>
<span id="cb23-99"><a href="#cb23-99" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> emailInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Email&#39;</span>)<span class="op">;</span></span>
<span id="cb23-100"><a href="#cb23-100" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> submitButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Create User&#39;</span>)<span class="op">;</span></span>
<span id="cb23-101"><a href="#cb23-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-102"><a href="#cb23-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">type</span>(nameInput<span class="op">,</span> <span class="st">&#39;Test User&#39;</span>)<span class="op">;</span></span>
<span id="cb23-103"><a href="#cb23-103" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">type</span>(emailInput<span class="op">,</span> <span class="st">&#39;test@example.com&#39;</span>)<span class="op">;</span></span>
<span id="cb23-104"><a href="#cb23-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(submitButton)<span class="op">;</span></span>
<span id="cb23-105"><a href="#cb23-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-106"><a href="#cb23-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify error message is displayed</span></span>
<span id="cb23-107"><a href="#cb23-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">waitFor</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb23-108"><a href="#cb23-108" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Failed to create user&#39;</span>))<span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb23-109"><a href="#cb23-109" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb23-110"><a href="#cb23-110" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-111"><a href="#cb23-111" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify user was not added to the list</span></span>
<span id="cb23-112"><a href="#cb23-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(<span class="bu">screen</span><span class="op">.</span><span class="fu">queryByText</span>(<span class="st">&#39;Test User&#39;</span>))<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toBeInTheDocument</span>()<span class="op">;</span></span>
<span id="cb23-113"><a href="#cb23-113" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb23-114"><a href="#cb23-114" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="mock-service-worker-setup">Mock Service Worker Setup</h3>
<div class="sourceCode" id="cb24"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">// src/mocks/handlers.ts</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { rest } <span class="im">from</span> <span class="st">&#39;msw&#39;</span><span class="op">;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> handlers <span class="op">=</span> [</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  rest<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/api/users&#39;</span><span class="op">,</span> (req<span class="op">,</span> res<span class="op">,</span> ctx) <span class="kw">=&gt;</span> {</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">res</span>(</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>      ctx<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>        data<span class="op">:</span> [</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>          { id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;John Doe&#39;</span><span class="op">,</span> email<span class="op">:</span> <span class="st">&#39;john@example.com&#39;</span> }<span class="op">,</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>          { id<span class="op">:</span> <span class="st">&#39;2&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Jane Smith&#39;</span><span class="op">,</span> email<span class="op">:</span> <span class="st">&#39;jane@example.com&#39;</span> }<span class="op">,</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>        ]<span class="op">,</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  })<span class="op">,</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  rest<span class="op">.</span><span class="fu">post</span>(<span class="st">&#39;/api/users&#39;</span><span class="op">,</span> (req<span class="op">,</span> res<span class="op">,</span> ctx) <span class="kw">=&gt;</span> {</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { name<span class="op">,</span> email } <span class="op">=</span> req<span class="op">.</span><span class="at">body</span> <span class="im">as</span> { name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span> email<span class="op">:</span> <span class="dt">string</span> }<span class="op">;</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">res</span>(</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>      ctx<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        id<span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">.</span><span class="fu">toString</span>()<span class="op">,</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>        name<span class="op">,</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>        email<span class="op">,</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>        createdAt<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>  })<span class="op">,</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>  rest<span class="op">.</span><span class="fu">put</span>(<span class="st">&#39;/api/users/:id&#39;</span><span class="op">,</span> (req<span class="op">,</span> res<span class="op">,</span> ctx) <span class="kw">=&gt;</span> {</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { id } <span class="op">=</span> req<span class="op">.</span><span class="at">params</span><span class="op">;</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { name<span class="op">,</span> email } <span class="op">=</span> req<span class="op">.</span><span class="at">body</span> <span class="im">as</span> { name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span> email<span class="op">:</span> <span class="dt">string</span> }<span class="op">;</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">res</span>(</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>      ctx<span class="op">.</span><span class="fu">json</span>({</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>        id<span class="op">,</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>        name<span class="op">,</span></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>        email<span class="op">,</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>        updatedAt<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>  })<span class="op">,</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>  rest<span class="op">.</span><span class="fu">delete</span>(<span class="st">&#39;/api/users/:id&#39;</span><span class="op">,</span> (req<span class="op">,</span> res<span class="op">,</span> ctx) <span class="kw">=&gt;</span> {</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">res</span>(ctx<span class="op">.</span><span class="fu">status</span>(<span class="dv">204</span>))<span class="op">;</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>  })<span class="op">,</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="co">// src/mocks/server.ts</span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { setupServer } <span class="im">from</span> <span class="st">&#39;msw/node&#39;</span><span class="op">;</span></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { handlers } <span class="im">from</span> <span class="st">&#39;./handlers&#39;</span><span class="op">;</span></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> server <span class="op">=</span> <span class="fu">setupServer</span>(<span class="op">...</span>handlers)<span class="op">;</span></span></code></pre></div>
<h2 id="end-to-end-testing-with-playwright">End-to-End Testing with
Playwright</h2>
<h3 id="critical-user-journey-testing">Critical User Journey
Testing</h3>
<div class="sourceCode" id="cb25"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">// tests/e2e/user-management.spec.ts</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { test<span class="op">,</span> expect } <span class="im">from</span> <span class="st">&#39;@playwright/test&#39;</span><span class="op">;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>test<span class="op">.</span><span class="fu">describe</span>(<span class="st">&#39;User Management E2E&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  test<span class="op">.</span><span class="fu">beforeEach</span>(<span class="kw">async</span> ({ page }) <span class="kw">=&gt;</span> {</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Set up test data</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">goto</span>(<span class="st">&#39;/admin/users&#39;</span>)<span class="op">;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">waitForLoadState</span>(<span class="st">&#39;networkidle&#39;</span>)<span class="op">;</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">test</span>(<span class="st">&#39;admin can manage users end-to-end&#39;</span><span class="op">,</span> <span class="kw">async</span> ({ page }) <span class="kw">=&gt;</span> {</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify initial state</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;User Management&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;user-list&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create new user</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Add User&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByLabel</span>(<span class="st">&#39;Name&#39;</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="st">&#39;Test User&#39;</span>)<span class="op">;</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByLabel</span>(<span class="st">&#39;Email&#39;</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="st">&#39;test@example.com&#39;</span>)<span class="op">;</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByLabel</span>(<span class="st">&#39;Role&#39;</span>)<span class="op">.</span><span class="fu">selectOption</span>(<span class="st">&#39;admin&#39;</span>)<span class="op">;</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Create User&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify user creation</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;User created successfully&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Test User&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Edit user</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;user-Test User&#39;</span>)<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Edit&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByLabel</span>(<span class="st">&#39;Name&#39;</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="st">&#39;Updated User&#39;</span>)<span class="op">;</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Save Changes&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify user update</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;User updated successfully&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Updated User&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Delete user</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;user-Updated User&#39;</span>)<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Delete&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Confirm Delete&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify user deletion</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;User deleted successfully&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Updated User&#39;</span>))<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">test</span>(<span class="st">&#39;handles validation errors correctly&#39;</span><span class="op">,</span> <span class="kw">async</span> ({ page }) <span class="kw">=&gt;</span> {</span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Add User&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Try to submit empty form</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Create User&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify validation errors</span></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Name is required&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Email is required&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Fill invalid email</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByLabel</span>(<span class="st">&#39;Email&#39;</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="st">&#39;invalid-email&#39;</span>)<span class="op">;</span></span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Create User&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Please enter a valid email&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">test</span>(<span class="st">&#39;works on mobile devices&#39;</span><span class="op">,</span> <span class="kw">async</span> ({ page }) <span class="kw">=&gt;</span> {</span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Test responsive design</span></span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">setViewportSize</span>({ width<span class="op">:</span> <span class="dv">375</span><span class="op">,</span> height<span class="op">:</span> <span class="dv">667</span> })<span class="op">;</span></span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify mobile layout</span></span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;mobile-menu-button&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;desktop-navigation&#39;</span>))<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Test mobile interactions</span></span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;mobile-menu-button&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-72"><a href="#cb25-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;mobile-menu&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-73"><a href="#cb25-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-74"><a href="#cb25-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Users&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-75"><a href="#cb25-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;user-list&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-76"><a href="#cb25-76" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb25-77"><a href="#cb25-77" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-78"><a href="#cb25-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">test</span>(<span class="st">&#39;handles slow network conditions&#39;</span><span class="op">,</span> <span class="kw">async</span> ({ page }) <span class="kw">=&gt;</span> {</span>
<span id="cb25-79"><a href="#cb25-79" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Simulate slow 3G network</span></span>
<span id="cb25-80"><a href="#cb25-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">route</span>(<span class="st">&#39;**/api/**&#39;</span><span class="op">,</span> <span class="kw">async</span> route <span class="kw">=&gt;</span> {</span>
<span id="cb25-81"><a href="#cb25-81" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">new</span> <span class="bu">Promise</span>(resolve <span class="kw">=&gt;</span> <span class="pp">setTimeout</span>(resolve<span class="op">,</span> <span class="dv">2000</span>))<span class="op">;</span></span>
<span id="cb25-82"><a href="#cb25-82" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> route<span class="op">.</span><span class="fu">continue</span>()<span class="op">;</span></span>
<span id="cb25-83"><a href="#cb25-83" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb25-84"><a href="#cb25-84" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-85"><a href="#cb25-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Add User&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-86"><a href="#cb25-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByLabel</span>(<span class="st">&#39;Name&#39;</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="st">&#39;Slow Network User&#39;</span>)<span class="op">;</span></span>
<span id="cb25-87"><a href="#cb25-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByLabel</span>(<span class="st">&#39;Email&#39;</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="st">&#39;slow@example.com&#39;</span>)<span class="op">;</span></span>
<span id="cb25-88"><a href="#cb25-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Create User&#39;</span>)<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb25-89"><a href="#cb25-89" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-90"><a href="#cb25-90" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify loading state</span></span>
<span id="cb25-91"><a href="#cb25-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByTestId</span>(<span class="st">&#39;loading-spinner&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb25-92"><a href="#cb25-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-93"><a href="#cb25-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify eventual success</span></span>
<span id="cb25-94"><a href="#cb25-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;User created successfully&#39;</span>))<span class="op">.</span><span class="fu">toBeVisible</span>({</span>
<span id="cb25-95"><a href="#cb25-95" aria-hidden="true" tabindex="-1"></a>      timeout<span class="op">:</span> <span class="dv">10000</span><span class="op">,</span></span>
<span id="cb25-96"><a href="#cb25-96" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb25-97"><a href="#cb25-97" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb25-98"><a href="#cb25-98" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="cross-browser-testing-configuration">Cross-Browser Testing
Configuration</h3>
<div class="sourceCode" id="cb26"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">// playwright.config.ts</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { defineConfig<span class="op">,</span> devices } <span class="im">from</span> <span class="st">&#39;@playwright/test&#39;</span><span class="op">;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="fu">defineConfig</span>({</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  testDir<span class="op">:</span> <span class="st">&#39;./tests/e2e&#39;</span><span class="op">,</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  fullyParallel<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  forbidOnly<span class="op">:</span> <span class="op">!!</span><span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">CI</span><span class="op">,</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  retries<span class="op">:</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">CI</span> <span class="op">?</span> <span class="dv">2</span> <span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  workers<span class="op">:</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">CI</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dt">undefined</span><span class="op">,</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  reporter<span class="op">:</span> [</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    [<span class="st">&#39;html&#39;</span>]<span class="op">,</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    [<span class="st">&#39;junit&#39;</span><span class="op">,</span> { outputFile<span class="op">:</span> <span class="st">&#39;test-results/junit.xml&#39;</span> }]<span class="op">,</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    [<span class="st">&#39;github&#39;</span>]<span class="op">,</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  use<span class="op">:</span> {</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    baseURL<span class="op">:</span> <span class="st">&#39;http://localhost:3000&#39;</span><span class="op">,</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    trace<span class="op">:</span> <span class="st">&#39;on-first-retry&#39;</span><span class="op">,</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    screenshot<span class="op">:</span> <span class="st">&#39;only-on-failure&#39;</span><span class="op">,</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    video<span class="op">:</span> <span class="st">&#39;retain-on-failure&#39;</span><span class="op">,</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  projects<span class="op">:</span> [</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;chromium&#39;</span><span class="op">,</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>      use<span class="op">:</span> { <span class="op">...</span>devices[<span class="st">&#39;Desktop Chrome&#39;</span>] }<span class="op">,</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;firefox&#39;</span><span class="op">,</span></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>      use<span class="op">:</span> { <span class="op">...</span>devices[<span class="st">&#39;Desktop Firefox&#39;</span>] }<span class="op">,</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;webkit&#39;</span><span class="op">,</span></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>      use<span class="op">:</span> { <span class="op">...</span>devices[<span class="st">&#39;Desktop Safari&#39;</span>] }<span class="op">,</span></span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;Mobile Chrome&#39;</span><span class="op">,</span></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>      use<span class="op">:</span> { <span class="op">...</span>devices[<span class="st">&#39;Pixel 5&#39;</span>] }<span class="op">,</span></span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;Mobile Safari&#39;</span><span class="op">,</span></span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>      use<span class="op">:</span> { <span class="op">...</span>devices[<span class="st">&#39;iPhone 12&#39;</span>] }<span class="op">,</span></span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>  webServer<span class="op">:</span> {</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>    command<span class="op">:</span> <span class="st">&#39;npm run dev&#39;</span><span class="op">,</span></span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>    url<span class="op">:</span> <span class="st">&#39;http://localhost:3000&#39;</span><span class="op">,</span></span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>    reuseExistingServer<span class="op">:</span> <span class="op">!</span><span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">CI</span><span class="op">,</span></span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h2 id="visual-regression-testing">Visual Regression Testing</h2>
<h3 id="storybook-chromatic-setup">Storybook + Chromatic Setup</h3>
<div class="sourceCode" id="cb27"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">// .storybook/main.ts</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="im">type</span> { StorybookConfig } <span class="im">from</span> <span class="st">&#39;@storybook/react-vite&#39;</span><span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> config<span class="op">:</span> StorybookConfig <span class="op">=</span> {</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  stories<span class="op">:</span> [<span class="st">&#39;../src/**/*.stories.@(js|jsx|ts|tsx|mdx)&#39;</span>]<span class="op">,</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  addons<span class="op">:</span> [</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;@storybook/addon-essentials&#39;</span><span class="op">,</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;@storybook/addon-a11y&#39;</span><span class="op">,</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;@storybook/addon-design-tokens&#39;</span><span class="op">,</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;@chromatic-com/storybook&#39;</span><span class="op">,</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  framework<span class="op">:</span> {</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    name<span class="op">:</span> <span class="st">&#39;@storybook/react-vite&#39;</span><span class="op">,</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    options<span class="op">:</span> {}<span class="op">,</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  features<span class="op">:</span> {</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    buildStoriesJson<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  docs<span class="op">:</span> {</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    autodocs<span class="op">:</span> <span class="st">&#39;tag&#39;</span><span class="op">,</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> config<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">// src/components/UserCard/UserCard.stories.ts</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="im">type</span> { Meta<span class="op">,</span> StoryObj } <span class="im">from</span> <span class="st">&#39;@storybook/react&#39;</span><span class="op">;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { UserCard } <span class="im">from</span> <span class="st">&#39;./UserCard&#39;</span><span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> meta<span class="op">:</span> Meta<span class="op">&lt;</span><span class="kw">typeof</span> UserCard<span class="op">&gt;</span> <span class="op">=</span> {</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  title<span class="op">:</span> <span class="st">&#39;Components/UserCard&#39;</span><span class="op">,</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  component<span class="op">:</span> UserCard<span class="op">,</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  parameters<span class="op">:</span> {</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    layout<span class="op">:</span> <span class="st">&#39;centered&#39;</span><span class="op">,</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    docs<span class="op">:</span> {</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> {</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>        component<span class="op">:</span> <span class="st">&#39;A card component for displaying user information with optional edit and delete actions.&#39;</span><span class="op">,</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  tags<span class="op">:</span> [<span class="st">&#39;autodocs&#39;</span>]<span class="op">,</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  argTypes<span class="op">:</span> {</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    canEdit<span class="op">:</span> {</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>      control<span class="op">:</span> <span class="st">&#39;boolean&#39;</span><span class="op">,</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> <span class="st">&#39;Whether the user can be edited&#39;</span><span class="op">,</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    canDelete<span class="op">:</span> {</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>      control<span class="op">:</span> <span class="st">&#39;boolean&#39;</span><span class="op">,</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> <span class="st">&#39;Whether the user can be deleted&#39;</span><span class="op">,</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> meta<span class="op">;</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Story <span class="op">=</span> StoryObj<span class="op">&lt;</span><span class="kw">typeof</span> meta<span class="op">&gt;;</span></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> Default<span class="op">:</span> Story <span class="op">=</span> {</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>  args<span class="op">:</span> {</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>    user<span class="op">:</span> {</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>      id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;John Doe&#39;</span><span class="op">,</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>      email<span class="op">:</span> <span class="st">&#39;john@example.com&#39;</span><span class="op">,</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>      avatar<span class="op">:</span> <span class="st">&#39;/avatars/john.jpg&#39;</span><span class="op">,</span></span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>    onEdit<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Edit clicked&#39;</span>)<span class="op">,</span></span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>    onDelete<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Delete clicked&#39;</span>)<span class="op">,</span></span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> WithActions<span class="op">:</span> Story <span class="op">=</span> {</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>  args<span class="op">:</span> {</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">,</span></span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>    canEdit<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>    canDelete<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> ReadOnly<span class="op">:</span> Story <span class="op">=</span> {</span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>  args<span class="op">:</span> {</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">,</span></span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>    canEdit<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>    canDelete<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> LongName<span class="op">:</span> Story <span class="op">=</span> {</span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>  args<span class="op">:</span> {</span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">,</span></span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>    user<span class="op">:</span> {</span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">.</span><span class="at">user</span><span class="op">,</span></span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;Extraordinarily Long Name That Might Cause Layout Issues&#39;</span><span class="op">,</span></span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> NoAvatar<span class="op">:</span> Story <span class="op">=</span> {</span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a>  args<span class="op">:</span> {</span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">,</span></span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a>    user<span class="op">:</span> {</span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">.</span><span class="at">user</span><span class="op">,</span></span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a>      avatar<span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a><span class="co">// Test different states</span></span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> LoadingState<span class="op">:</span> Story <span class="op">=</span> {</span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>  args<span class="op">:</span> {</span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">,</span></span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a>    user<span class="op">:</span> {</span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">.</span><span class="at">user</span><span class="op">,</span></span>
<span id="cb28-87"><a href="#cb28-87" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;Loading...&#39;</span><span class="op">,</span></span>
<span id="cb28-88"><a href="#cb28-88" aria-hidden="true" tabindex="-1"></a>      email<span class="op">:</span> <span class="st">&#39;Loading...&#39;</span><span class="op">,</span></span>
<span id="cb28-89"><a href="#cb28-89" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-90"><a href="#cb28-90" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-91"><a href="#cb28-91" aria-hidden="true" tabindex="-1"></a>  parameters<span class="op">:</span> {</span>
<span id="cb28-92"><a href="#cb28-92" aria-hidden="true" tabindex="-1"></a>    chromatic<span class="op">:</span> { delay<span class="op">:</span> <span class="dv">300</span> }<span class="op">,</span></span>
<span id="cb28-93"><a href="#cb28-93" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-94"><a href="#cb28-94" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb28-95"><a href="#cb28-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-96"><a href="#cb28-96" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> ErrorState<span class="op">:</span> Story <span class="op">=</span> {</span>
<span id="cb28-97"><a href="#cb28-97" aria-hidden="true" tabindex="-1"></a>  args<span class="op">:</span> {</span>
<span id="cb28-98"><a href="#cb28-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">,</span></span>
<span id="cb28-99"><a href="#cb28-99" aria-hidden="true" tabindex="-1"></a>    user<span class="op">:</span> {</span>
<span id="cb28-100"><a href="#cb28-100" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span>Default<span class="op">.</span><span class="at">args</span><span class="op">.</span><span class="at">user</span><span class="op">,</span></span>
<span id="cb28-101"><a href="#cb28-101" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;Error loading user&#39;</span><span class="op">,</span></span>
<span id="cb28-102"><a href="#cb28-102" aria-hidden="true" tabindex="-1"></a>      email<span class="op">:</span> <span class="st">&#39;Please try again&#39;</span><span class="op">,</span></span>
<span id="cb28-103"><a href="#cb28-103" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb28-104"><a href="#cb28-104" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb28-105"><a href="#cb28-105" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h3 id="automated-visual-testing-pipeline">Automated Visual Testing
Pipeline</h3>
<div class="sourceCode" id="cb29"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># .github/workflows/visual-testing.yml</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Visual Testing</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">visual-tests</span><span class="kw">:</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">fetch-depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup Node.js</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-node@v3</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">node-version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;18&#39;</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cache</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;npm&#39;</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install dependencies</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm ci</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Storybook</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm run build-storybook</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Publish to Chromatic</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> chromaui/action@v1</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">projectToken</span><span class="kw">:</span><span class="at"> ${{ secrets.CHROMATIC_PROJECT_TOKEN }}</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">storybookBuildDir</span><span class="kw">:</span><span class="at"> storybook-static</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">autoAcceptChanges</span><span class="kw">:</span><span class="at"> main</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">exitOnceUploaded</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<h2 id="common-testing-anti-patterns">⚠️ Common Testing
Anti-Patterns</h2>
<h3 id="anti-pattern-1-testing-implementation-details">Anti-Pattern #1:
Testing Implementation Details</h3>
<p><strong>Problem</strong>: Tests break when refactoring without
behavior changes <strong>Solution</strong>: Test behavior and outcomes,
not internal implementation</p>
<h3 id="anti-pattern-2-brittle-e2e-tests">Anti-Pattern #2: Brittle E2E
Tests</h3>
<p><strong>Problem</strong>: E2E tests fail due to minor UI changes or
timing issues <strong>Solution</strong>: Use stable selectors, wait for
conditions, implement retry logic</p>
<h3 id="anti-pattern-3-no-test-data-management">Anti-Pattern #3: No Test
Data Management</h3>
<p><strong>Problem</strong>: Tests interfere with each other due to
shared state <strong>Solution</strong>: Isolate test data, use factories
and builders for test data creation</p>
<h3 id="anti-pattern-4-over-mocking">Anti-Pattern #4: Over-Mocking</h3>
<p><strong>Problem</strong>: Mocks don’t reflect real behavior, giving
false confidence <strong>Solution</strong>: Use real implementations
where possible, mock only external dependencies</p>
<h2 id="implementation-guide-testing-setup">🛠️ Implementation Guide:
Testing Setup</h2>
<h3 id="project-setup-script">Project Setup Script</h3>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># setup-testing.sh</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Setting up comprehensive testing environment...&quot;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Install testing dependencies</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">-D</span> <span class="dt">\</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  vitest <span class="dt">\</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  @testing-library/react <span class="dt">\</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  @testing-library/jest-dom <span class="dt">\</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  @testing-library/user-event <span class="dt">\</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  msw <span class="dt">\</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  @playwright/test <span class="dt">\</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  @storybook/react-vite <span class="dt">\</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  @chromatic-com/storybook</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test configuration</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> vitest.config.ts <span class="op">&lt;&lt; &#39;EOF&#39;</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="st">import { defineConfig } from &#39;vitest/config&#39;;</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="st">import react from &#39;@vitejs/plugin-react&#39;;</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="st">export default defineConfig({</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="st">  plugins: [react()],</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a><span class="st">  test: {</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a><span class="st">    environment: &#39;jsdom&#39;,</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="st">    setupFiles: [&#39;./src/test/setup.ts&#39;],</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a><span class="st">    globals: true,</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a><span class="st">  },</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a><span class="st">});</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test setup file</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> src/test</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> src/test/setup.ts <span class="op">&lt;&lt; &#39;EOF&#39;</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a><span class="st">import &#39;@testing-library/jest-dom&#39;;</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a><span class="st">import { server } from &#39;../mocks/server&#39;;</span></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a><span class="st">beforeAll(() =&gt; server.listen());</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a><span class="st">afterEach(() =&gt; server.resetHandlers());</span></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a><span class="st">afterAll(() =&gt; server.close());</span></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Create MSW setup</span></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> src/mocks</span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> src/mocks/server.ts <span class="op">&lt;&lt; &#39;EOF&#39;</span></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a><span class="st">import { setupServer } from &#39;msw/node&#39;;</span></span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a><span class="st">import { handlers } from &#39;./handlers&#39;;</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a><span class="st">export const server = setupServer(...handlers);</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Playwright browsers</span></span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> playwright install</span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Testing environment setup complete!&quot;</span></span></code></pre></div>
<h3 id="testing-standards-document">Testing Standards Document</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Testing Standards and Guidelines</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> TestingStandards <span class="op">=</span> {</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  coverage<span class="op">:</span> {</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    statements<span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    branches<span class="op">:</span> <span class="dv">70</span><span class="op">,</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    functions<span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    lines<span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  conventions<span class="op">:</span> {</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    testFiles<span class="op">:</span> <span class="st">&#39;*.test.ts|*.spec.ts&#39;</span><span class="op">,</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    testLocation<span class="op">:</span> <span class="st">&#39;co-located with source files&#39;</span><span class="op">,</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    naming<span class="op">:</span> <span class="st">&#39;describe what the test does, not what it tests&#39;</span><span class="op">,</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    structure<span class="op">:</span> <span class="st">&#39;Arrange, Act, Assert&#39;</span><span class="op">,</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  requirements<span class="op">:</span> {</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    unitTests<span class="op">:</span> <span class="st">&#39;All business logic and utilities&#39;</span><span class="op">,</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    integrationTests<span class="op">:</span> <span class="st">&#39;Critical user flows&#39;</span><span class="op">,</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    e2eTests<span class="op">:</span> <span class="st">&#39;Happy path and error scenarios&#39;</span><span class="op">,</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    visualTests<span class="op">:</span> <span class="st">&#39;All UI components&#39;</span><span class="op">,</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  antiPatterns<span class="op">:</span> [</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Testing implementation details&#39;</span><span class="op">,</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Shared test state&#39;</span><span class="op">,</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Magic values in tests&#39;</span><span class="op">,</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Overly complex test setup&#39;</span><span class="op">,</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<hr />
<h1 id="chapter-4-testing-implementation-mastery">Chapter 4: Testing
Implementation Mastery 🟡</h1>
<p><em>Pages 29-36</em></p>
<h2 id="test-driven-development-in-practice">Test-Driven Development in
Practice</h2>
<p>Test-Driven Development (TDD) isn’t just about writing tests
first—it’s about designing better software through the discipline of
thinking about behavior before implementation.</p>
<h3 id="key-insight-tdd-as-a-design-tool">💡 Key Insight: TDD as a
Design Tool</h3>
<p>TDD forces you to: - <strong>Define clear interfaces</strong> before
implementation - <strong>Think about error cases</strong> upfront -
<strong>Write testable code</strong> by design - <strong>Create
comprehensive examples</strong> of expected behavior</p>
<h2 id="the-tdd-cycle-red-green-refactor">The TDD Cycle:
Red-Green-Refactor</h2>
<h3 id="implementing-a-feature-with-tdd">Implementing a Feature with
TDD</h3>
<p>Let’s implement a shopping cart with discount calculation using
TDD:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Step 1: RED - Write a failing test</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;ShoppingCart&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;calculateTotal&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;should calculate total for empty cart&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> cart <span class="op">=</span> <span class="kw">new</span> <span class="fu">ShoppingCart</span>()<span class="op">;</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(cart<span class="op">.</span><span class="fu">calculateTotal</span>())<span class="op">.</span><span class="fu">toBe</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Step 2: GREEN - Minimal implementation to pass</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ShoppingCart {</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calculateTotal</span>()<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Step 3: RED - Add more specific test</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;ShoppingCart&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should calculate total for items without discounts&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cart <span class="op">=</span> <span class="kw">new</span> <span class="fu">ShoppingCart</span>()<span class="op">;</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addItem</span>({ id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Widget&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">10</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">2</span> })<span class="op">;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addItem</span>({ id<span class="op">:</span> <span class="st">&#39;2&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Gadget&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">15</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">1</span> })<span class="op">;</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(cart<span class="op">.</span><span class="fu">calculateTotal</span>())<span class="op">.</span><span class="fu">toBe</span>(<span class="dv">35</span>)<span class="op">;</span> <span class="co">// (10 * 2) + (15 * 1)</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Step 4: GREEN - Implement to pass</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> CartItem {</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  id<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  price<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  quantity<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ShoppingCart {</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> items<span class="op">:</span> CartItem[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addItem</span>(item<span class="op">:</span> CartItem)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">push</span>(item)<span class="op">;</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calculateTotal</span>()<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">reduce</span>(</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>      (total<span class="op">,</span> item) <span class="kw">=&gt;</span> total <span class="op">+</span> (item<span class="op">.</span><span class="at">price</span> <span class="op">*</span> item<span class="op">.</span><span class="at">quantity</span>)<span class="op">,</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb36"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Step 5: RED - Add discount functionality</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;ShoppingCart&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should apply percentage discounts correctly&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cart <span class="op">=</span> <span class="kw">new</span> <span class="fu">ShoppingCart</span>()<span class="op">;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addItem</span>({ id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Widget&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">100</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">1</span> })<span class="op">;</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addDiscount</span>({ type<span class="op">:</span> <span class="st">&#39;percentage&#39;</span><span class="op">,</span> value<span class="op">:</span> <span class="dv">10</span> })<span class="op">;</span> <span class="co">// 10% off</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(cart<span class="op">.</span><span class="fu">calculateTotal</span>())<span class="op">.</span><span class="fu">toBe</span>(<span class="dv">90</span>)<span class="op">;</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should apply fixed amount discounts correctly&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cart <span class="op">=</span> <span class="kw">new</span> <span class="fu">ShoppingCart</span>()<span class="op">;</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addItem</span>({ id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Widget&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">100</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">1</span> })<span class="op">;</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addDiscount</span>({ type<span class="op">:</span> <span class="st">&#39;fixed&#39;</span><span class="op">,</span> value<span class="op">:</span> <span class="dv">15</span> })<span class="op">;</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(cart<span class="op">.</span><span class="fu">calculateTotal</span>())<span class="op">.</span><span class="fu">toBe</span>(<span class="dv">85</span>)<span class="op">;</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should not apply discount below zero&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cart <span class="op">=</span> <span class="kw">new</span> <span class="fu">ShoppingCart</span>()<span class="op">;</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addItem</span>({ id<span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span> name<span class="op">:</span> <span class="st">&#39;Widget&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">10</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">1</span> })<span class="op">;</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>    cart<span class="op">.</span><span class="fu">addDiscount</span>({ type<span class="op">:</span> <span class="st">&#39;fixed&#39;</span><span class="op">,</span> value<span class="op">:</span> <span class="dv">20</span> })<span class="op">;</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(cart<span class="op">.</span><span class="fu">calculateTotal</span>())<span class="op">.</span><span class="fu">toBe</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb37"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Step 6: GREEN - Implement discount logic</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> Discount {</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  type<span class="op">:</span> <span class="st">&#39;percentage&#39;</span> <span class="op">|</span> <span class="st">&#39;fixed&#39;</span><span class="op">;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  value<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ShoppingCart {</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> items<span class="op">:</span> CartItem[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> discounts<span class="op">:</span> Discount[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addItem</span>(item<span class="op">:</span> CartItem)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">push</span>(item)<span class="op">;</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addDiscount</span>(discount<span class="op">:</span> Discount)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">discounts</span><span class="op">.</span><span class="fu">push</span>(discount)<span class="op">;</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calculateTotal</span>()<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> subtotal <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">reduce</span>(</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>      (total<span class="op">,</span> item) <span class="kw">=&gt;</span> total <span class="op">+</span> (item<span class="op">.</span><span class="at">price</span> <span class="op">*</span> item<span class="op">.</span><span class="at">quantity</span>)<span class="op">,</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> discountAmount <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">discounts</span><span class="op">.</span><span class="fu">reduce</span>((totalDiscount<span class="op">,</span> discount) <span class="kw">=&gt;</span> {</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (discount<span class="op">.</span><span class="at">type</span> <span class="op">===</span> <span class="st">&#39;percentage&#39;</span>) {</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> totalDiscount <span class="op">+</span> (subtotal <span class="op">*</span> discount<span class="op">.</span><span class="at">value</span> <span class="op">/</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> totalDiscount <span class="op">+</span> discount<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> subtotal <span class="op">-</span> discountAmount)<span class="op">;</span></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb38"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Step 7: REFACTOR - Improve design</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ShoppingCart {</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> items<span class="op">:</span> CartItem[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> discounts<span class="op">:</span> Discount[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addItem</span>(item<span class="op">:</span> CartItem)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">push</span>(item)<span class="op">;</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addDiscount</span>(discount<span class="op">:</span> Discount)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">discounts</span><span class="op">.</span><span class="fu">push</span>(discount)<span class="op">;</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calculateTotal</span>()<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> subtotal <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateSubtotal</span>()<span class="op">;</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> discountAmount <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateDiscountAmount</span>(subtotal)<span class="op">;</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> subtotal <span class="op">-</span> discountAmount)<span class="op">;</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">calculateSubtotal</span>()<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">reduce</span>(</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>      (total<span class="op">,</span> item) <span class="kw">=&gt;</span> total <span class="op">+</span> (item<span class="op">.</span><span class="at">price</span> <span class="op">*</span> item<span class="op">.</span><span class="at">quantity</span>)<span class="op">,</span></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">calculateDiscountAmount</span>(subtotal<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">discounts</span><span class="op">.</span><span class="fu">reduce</span>((totalDiscount<span class="op">,</span> discount) <span class="kw">=&gt;</span> {</span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> totalDiscount <span class="op">+</span> <span class="kw">this</span><span class="op">.</span><span class="fu">applyDiscount</span>(discount<span class="op">,</span> subtotal)<span class="op">;</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">applyDiscount</span>(discount<span class="op">:</span> Discount<span class="op">,</span> amount<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (discount<span class="op">.</span><span class="at">type</span>) {</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;percentage&#39;</span><span class="op">:</span></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> amount <span class="op">*</span> discount<span class="op">.</span><span class="at">value</span> <span class="op">/</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;fixed&#39;</span><span class="op">:</span></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> discount<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>      <span class="cf">default</span><span class="op">:</span></span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="advanced-tdd-outside-in-development">Advanced TDD: Outside-In
Development</h3>
<div class="sourceCode" id="cb39"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Start with the highest level behavior</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;E-commerce Checkout Flow&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should complete purchase with discount&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> checkoutService <span class="op">=</span> <span class="kw">new</span> <span class="fu">CheckoutService</span>()<span class="op">;</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> order <span class="op">=</span> <span class="cf">await</span> checkoutService<span class="op">.</span><span class="fu">processOrder</span>({</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>      customerId<span class="op">:</span> <span class="st">&#39;customer-1&#39;</span><span class="op">,</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>      items<span class="op">:</span> [</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>        { productId<span class="op">:</span> <span class="st">&#39;product-1&#39;</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">2</span> }<span class="op">,</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        { productId<span class="op">:</span> <span class="st">&#39;product-2&#39;</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">1</span> }<span class="op">,</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>      discountCode<span class="op">:</span> <span class="st">&#39;SAVE10&#39;</span><span class="op">,</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>      paymentMethod<span class="op">:</span> <span class="st">&#39;credit-card&#39;</span><span class="op">,</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>      shippingAddress<span class="op">:</span> {</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>        street<span class="op">:</span> <span class="st">&#39;123 Main St&#39;</span><span class="op">,</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>        city<span class="op">:</span> <span class="st">&#39;Anytown&#39;</span><span class="op">,</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>        zip<span class="op">:</span> <span class="st">&#39;12345&#39;</span><span class="op">,</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(order<span class="op">.</span><span class="at">status</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="st">&#39;confirmed&#39;</span>)<span class="op">;</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(order<span class="op">.</span><span class="at">total</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="fl">85.99</span>)<span class="op">;</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(order<span class="op">.</span><span class="at">discountApplied</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="fl">9.50</span>)<span class="op">;</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb40"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">// This forces us to think about the interfaces</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> CheckoutRequest {</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  customerId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  items<span class="op">:</span> OrderItem[]<span class="op">;</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  discountCode<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  paymentMethod<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  shippingAddress<span class="op">:</span> Address<span class="op">;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> OrderItem {</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  productId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  quantity<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> Address {</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  street<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  city<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  zip<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> Order {</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>  id<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>  status<span class="op">:</span> <span class="st">&#39;pending&#39;</span> <span class="op">|</span> <span class="st">&#39;confirmed&#39;</span> <span class="op">|</span> <span class="st">&#39;failed&#39;</span><span class="op">;</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>  total<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>  discountApplied<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>  items<span class="op">:</span> OrderLineItem[]<span class="op">;</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>  createdAt<span class="op">:</span> <span class="bu">Date</span><span class="op">;</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="mock-strategies-and-data-management">Mock Strategies and Data
Management</h2>
<h3 id="effective-mocking-patterns">Effective Mocking Patterns</h3>
<div class="sourceCode" id="cb41"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Mock external dependencies, not internal logic</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> OrderService {</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> paymentService<span class="op">:</span> PaymentService<span class="op">,</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> inventoryService<span class="op">:</span> InventoryService<span class="op">,</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> emailService<span class="op">:</span> EmailService</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  ) {}</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">processOrder</span>(request<span class="op">:</span> OrderRequest)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>Order<span class="op">&gt;</span> {</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Validate inventory</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> availability <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">inventoryService</span><span class="op">.</span><span class="fu">checkAvailability</span>(</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>      request<span class="op">.</span><span class="at">items</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>availability<span class="op">.</span><span class="at">allAvailable</span>) {</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Some items are out of stock&#39;</span>)<span class="op">;</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Process payment</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> payment <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">paymentService</span><span class="op">.</span><span class="fu">charge</span>({</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>      amount<span class="op">:</span> request<span class="op">.</span><span class="at">total</span><span class="op">,</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>      paymentMethod<span class="op">:</span> request<span class="op">.</span><span class="at">paymentMethod</span><span class="op">,</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>payment<span class="op">.</span><span class="at">successful</span>) {</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Payment failed&#39;</span>)<span class="op">;</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create order</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> order <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createOrder</span>(request<span class="op">,</span> payment)<span class="op">;</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send confirmation</span></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">emailService</span><span class="op">.</span><span class="fu">sendOrderConfirmation</span>(order)<span class="op">;</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> order<span class="op">;</span></span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">createOrder</span>(request<span class="op">:</span> OrderRequest<span class="op">,</span> payment<span class="op">:</span> Payment)<span class="op">:</span> Order {</span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a>      id<span class="op">:</span> <span class="fu">generateOrderId</span>()<span class="op">,</span></span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>      status<span class="op">:</span> <span class="st">&#39;confirmed&#39;</span><span class="op">,</span></span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>      total<span class="op">:</span> request<span class="op">.</span><span class="at">total</span><span class="op">,</span></span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a>      items<span class="op">:</span> request<span class="op">.</span><span class="at">items</span><span class="op">,</span></span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>      paymentId<span class="op">:</span> payment<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>      createdAt<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">,</span></span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb42"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Test with focused mocks</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;OrderService&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> orderService<span class="op">:</span> OrderService<span class="op">;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> mockPaymentService<span class="op">:</span> jest<span class="op">.</span><span class="at">Mocked</span><span class="op">&lt;</span>PaymentService<span class="op">&gt;;</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> mockInventoryService<span class="op">:</span> jest<span class="op">.</span><span class="at">Mocked</span><span class="op">&lt;</span>InventoryService<span class="op">&gt;;</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> mockEmailService<span class="op">:</span> jest<span class="op">.</span><span class="at">Mocked</span><span class="op">&lt;</span>EmailService<span class="op">&gt;;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">beforeEach</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    mockPaymentService <span class="op">=</span> {</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>      charge<span class="op">:</span> jest<span class="op">.</span><span class="fu">fn</span>()<span class="op">,</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    } <span class="im">as</span> jest<span class="op">.</span><span class="at">Mocked</span><span class="op">&lt;</span>PaymentService<span class="op">&gt;;</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    mockInventoryService <span class="op">=</span> {</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>      checkAvailability<span class="op">:</span> jest<span class="op">.</span><span class="fu">fn</span>()<span class="op">,</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    } <span class="im">as</span> jest<span class="op">.</span><span class="at">Mocked</span><span class="op">&lt;</span>InventoryService<span class="op">&gt;;</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    mockEmailService <span class="op">=</span> {</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>      sendOrderConfirmation<span class="op">:</span> jest<span class="op">.</span><span class="fu">fn</span>()<span class="op">,</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    } <span class="im">as</span> jest<span class="op">.</span><span class="at">Mocked</span><span class="op">&lt;</span>EmailService<span class="op">&gt;;</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    orderService <span class="op">=</span> <span class="kw">new</span> <span class="fu">OrderService</span>(</span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>      mockPaymentService<span class="op">,</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>      mockInventoryService<span class="op">,</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>      mockEmailService</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;successful order processing&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;should process order when all services succeed&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Arrange</span></span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> orderRequest <span class="op">=</span> <span class="fu">createValidOrderRequest</span>()<span class="op">;</span></span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>      mockInventoryService<span class="op">.</span><span class="at">checkAvailability</span><span class="op">.</span><span class="fu">mockResolvedValue</span>({</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>        allAvailable<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>      mockPaymentService<span class="op">.</span><span class="at">charge</span><span class="op">.</span><span class="fu">mockResolvedValue</span>({</span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a>        id<span class="op">:</span> <span class="st">&#39;payment-123&#39;</span><span class="op">,</span></span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>        successful<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>        amount<span class="op">:</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a>      mockEmailService<span class="op">.</span><span class="at">sendOrderConfirmation</span><span class="op">.</span><span class="fu">mockResolvedValue</span>()<span class="op">;</span></span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-45"><a href="#cb42-45" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Act</span></span>
<span id="cb42-46"><a href="#cb42-46" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> order <span class="op">=</span> <span class="cf">await</span> orderService<span class="op">.</span><span class="fu">processOrder</span>(orderRequest)<span class="op">;</span></span>
<span id="cb42-47"><a href="#cb42-47" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-48"><a href="#cb42-48" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Assert</span></span>
<span id="cb42-49"><a href="#cb42-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(order<span class="op">.</span><span class="at">status</span>)<span class="op">.</span><span class="fu">toBe</span>(<span class="st">&#39;confirmed&#39;</span>)<span class="op">;</span></span>
<span id="cb42-50"><a href="#cb42-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(order<span class="op">.</span><span class="at">total</span>)<span class="op">.</span><span class="fu">toBe</span>(orderRequest<span class="op">.</span><span class="at">total</span>)<span class="op">;</span></span>
<span id="cb42-51"><a href="#cb42-51" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-52"><a href="#cb42-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(mockInventoryService<span class="op">.</span><span class="at">checkAvailability</span>)<span class="op">.</span><span class="fu">toHaveBeenCalledWith</span>(</span>
<span id="cb42-53"><a href="#cb42-53" aria-hidden="true" tabindex="-1"></a>        orderRequest<span class="op">.</span><span class="at">items</span></span>
<span id="cb42-54"><a href="#cb42-54" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb42-55"><a href="#cb42-55" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(mockPaymentService<span class="op">.</span><span class="at">charge</span>)<span class="op">.</span><span class="fu">toHaveBeenCalledWith</span>({</span>
<span id="cb42-56"><a href="#cb42-56" aria-hidden="true" tabindex="-1"></a>        amount<span class="op">:</span> orderRequest<span class="op">.</span><span class="at">total</span><span class="op">,</span></span>
<span id="cb42-57"><a href="#cb42-57" aria-hidden="true" tabindex="-1"></a>        paymentMethod<span class="op">:</span> orderRequest<span class="op">.</span><span class="at">paymentMethod</span><span class="op">,</span></span>
<span id="cb42-58"><a href="#cb42-58" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb42-59"><a href="#cb42-59" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(mockEmailService<span class="op">.</span><span class="at">sendOrderConfirmation</span>)<span class="op">.</span><span class="fu">toHaveBeenCalledWith</span>(</span>
<span id="cb42-60"><a href="#cb42-60" aria-hidden="true" tabindex="-1"></a>        order</span>
<span id="cb42-61"><a href="#cb42-61" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb42-62"><a href="#cb42-62" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb42-63"><a href="#cb42-63" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb42-64"><a href="#cb42-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-65"><a href="#cb42-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(<span class="st">&#39;error handling&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb42-66"><a href="#cb42-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;should throw error when items are out of stock&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb42-67"><a href="#cb42-67" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> orderRequest <span class="op">=</span> <span class="fu">createValidOrderRequest</span>()<span class="op">;</span></span>
<span id="cb42-68"><a href="#cb42-68" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-69"><a href="#cb42-69" aria-hidden="true" tabindex="-1"></a>      mockInventoryService<span class="op">.</span><span class="at">checkAvailability</span><span class="op">.</span><span class="fu">mockResolvedValue</span>({</span>
<span id="cb42-70"><a href="#cb42-70" aria-hidden="true" tabindex="-1"></a>        allAvailable<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb42-71"><a href="#cb42-71" aria-hidden="true" tabindex="-1"></a>        unavailableItems<span class="op">:</span> [<span class="st">&#39;item-1&#39;</span>]<span class="op">,</span></span>
<span id="cb42-72"><a href="#cb42-72" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb42-73"><a href="#cb42-73" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-74"><a href="#cb42-74" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">expect</span>(</span>
<span id="cb42-75"><a href="#cb42-75" aria-hidden="true" tabindex="-1"></a>        orderService<span class="op">.</span><span class="fu">processOrder</span>(orderRequest)</span>
<span id="cb42-76"><a href="#cb42-76" aria-hidden="true" tabindex="-1"></a>      )<span class="op">.</span><span class="at">rejects</span><span class="op">.</span><span class="fu">toThrow</span>(<span class="st">&#39;Some items are out of stock&#39;</span>)<span class="op">;</span></span>
<span id="cb42-77"><a href="#cb42-77" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-78"><a href="#cb42-78" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Verify payment was not attempted</span></span>
<span id="cb42-79"><a href="#cb42-79" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(mockPaymentService<span class="op">.</span><span class="at">charge</span>)<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toHaveBeenCalled</span>()<span class="op">;</span></span>
<span id="cb42-80"><a href="#cb42-80" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb42-81"><a href="#cb42-81" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-82"><a href="#cb42-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">it</span>(<span class="st">&#39;should throw error when payment fails&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb42-83"><a href="#cb42-83" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> orderRequest <span class="op">=</span> <span class="fu">createValidOrderRequest</span>()<span class="op">;</span></span>
<span id="cb42-84"><a href="#cb42-84" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-85"><a href="#cb42-85" aria-hidden="true" tabindex="-1"></a>      mockInventoryService<span class="op">.</span><span class="at">checkAvailability</span><span class="op">.</span><span class="fu">mockResolvedValue</span>({</span>
<span id="cb42-86"><a href="#cb42-86" aria-hidden="true" tabindex="-1"></a>        allAvailable<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb42-87"><a href="#cb42-87" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb42-88"><a href="#cb42-88" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-89"><a href="#cb42-89" aria-hidden="true" tabindex="-1"></a>      mockPaymentService<span class="op">.</span><span class="at">charge</span><span class="op">.</span><span class="fu">mockResolvedValue</span>({</span>
<span id="cb42-90"><a href="#cb42-90" aria-hidden="true" tabindex="-1"></a>        id<span class="op">:</span> <span class="st">&#39;payment-123&#39;</span><span class="op">,</span></span>
<span id="cb42-91"><a href="#cb42-91" aria-hidden="true" tabindex="-1"></a>        successful<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb42-92"><a href="#cb42-92" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> <span class="st">&#39;Insufficient funds&#39;</span><span class="op">,</span></span>
<span id="cb42-93"><a href="#cb42-93" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb42-94"><a href="#cb42-94" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-95"><a href="#cb42-95" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="fu">expect</span>(</span>
<span id="cb42-96"><a href="#cb42-96" aria-hidden="true" tabindex="-1"></a>        orderService<span class="op">.</span><span class="fu">processOrder</span>(orderRequest)</span>
<span id="cb42-97"><a href="#cb42-97" aria-hidden="true" tabindex="-1"></a>      )<span class="op">.</span><span class="at">rejects</span><span class="op">.</span><span class="fu">toThrow</span>(<span class="st">&#39;Payment failed&#39;</span>)<span class="op">;</span></span>
<span id="cb42-98"><a href="#cb42-98" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb42-99"><a href="#cb42-99" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Verify email was not sent</span></span>
<span id="cb42-100"><a href="#cb42-100" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(mockEmailService<span class="op">.</span><span class="at">sendOrderConfirmation</span>)<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toHaveBeenCalled</span>()<span class="op">;</span></span>
<span id="cb42-101"><a href="#cb42-101" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb42-102"><a href="#cb42-102" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb42-103"><a href="#cb42-103" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="test-data-builders">Test Data Builders</h3>
<div class="sourceCode" id="cb43"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create flexible test data builders</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> OrderRequestBuilder {</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> request<span class="op">:</span> OrderRequest <span class="op">=</span> {</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    customerId<span class="op">:</span> <span class="st">&#39;default-customer&#39;</span><span class="op">,</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    items<span class="op">:</span> []<span class="op">,</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    total<span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    paymentMethod<span class="op">:</span> <span class="st">&#39;credit-card&#39;</span><span class="op">,</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCustomer</span>(customerId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="kw">this</span> {</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">request</span><span class="op">.</span><span class="at">customerId</span> <span class="op">=</span> customerId<span class="op">;</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withItems</span>(items<span class="op">:</span> OrderItem[])<span class="op">:</span> <span class="kw">this</span> {</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">request</span><span class="op">.</span><span class="at">items</span> <span class="op">=</span> items<span class="op">;</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">request</span><span class="op">.</span><span class="at">total</span> <span class="op">=</span> items<span class="op">.</span><span class="fu">reduce</span>(</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>      (total<span class="op">,</span> item) <span class="kw">=&gt;</span> total <span class="op">+</span> (item<span class="op">.</span><span class="at">price</span> <span class="op">*</span> item<span class="op">.</span><span class="at">quantity</span>)<span class="op">,</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withPaymentMethod</span>(method<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="kw">this</span> {</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">request</span><span class="op">.</span><span class="at">paymentMethod</span> <span class="op">=</span> method<span class="op">;</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withDiscountCode</span>(code<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="kw">this</span> {</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">request</span><span class="op">.</span><span class="at">discountCode</span> <span class="op">=</span> code<span class="op">;</span></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">build</span>()<span class="op">:</span> OrderRequest {</span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> { <span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="at">request</span> }<span class="op">;</span></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage in tests</span></span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;OrderService&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should handle orders with multiple items&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> orderRequest <span class="op">=</span> <span class="kw">new</span> <span class="fu">OrderRequestBuilder</span>()</span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withCustomer</span>(<span class="st">&#39;premium-customer&#39;</span>)</span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withItems</span>([</span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>        { productId<span class="op">:</span> <span class="st">&#39;widget&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">10</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">2</span> }<span class="op">,</span></span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>        { productId<span class="op">:</span> <span class="st">&#39;gadget&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">20</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">1</span> }<span class="op">,</span></span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a>      ])</span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withDiscountCode</span>(<span class="st">&#39;PREMIUM10&#39;</span>)</span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Test implementation...</span></span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should handle simple single-item orders&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> orderRequest <span class="op">=</span> <span class="kw">new</span> <span class="fu">OrderRequestBuilder</span>()</span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withItems</span>([</span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a>        { productId<span class="op">:</span> <span class="st">&#39;simple-product&#39;</span><span class="op">,</span> price<span class="op">:</span> <span class="dv">5</span><span class="op">,</span> quantity<span class="op">:</span> <span class="dv">1</span> }<span class="op">,</span></span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a>      ])</span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb43-60"><a href="#cb43-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-61"><a href="#cb43-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Test implementation...</span></span>
<span id="cb43-62"><a href="#cb43-62" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb43-63"><a href="#cb43-63" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h2 id="performance-testing-frontend-applications">Performance Testing
Frontend Applications</h2>
<h3 id="load-testing-react-components">Load Testing React
Components</h3>
<div class="sourceCode" id="cb44"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Performance testing utilities</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ComponentPerformanceTester {</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">static</span> <span class="kw">async</span> <span class="fu">measureRenderTime</span><span class="op">&lt;</span>T<span class="op">&gt;</span>(</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    component<span class="op">:</span> React<span class="op">.</span><span class="at">ComponentType</span><span class="op">&lt;</span>T<span class="op">&gt;,</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    props<span class="op">:</span> T<span class="op">,</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    iterations<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>PerformanceResult<span class="op">&gt;</span> {</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> times<span class="op">:</span> <span class="dt">number</span>[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> start <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> { unmount } <span class="op">=</span> <span class="fu">render</span>(React<span class="op">.</span><span class="fu">createElement</span>(component<span class="op">,</span> props))<span class="op">;</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> end <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>      times<span class="op">.</span><span class="fu">push</span>(end <span class="op">-</span> start)<span class="op">;</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unmount</span>()<span class="op">;</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>      average<span class="op">:</span> times<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> times<span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>      min<span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>times)<span class="op">,</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>      max<span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>times)<span class="op">,</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>      median<span class="op">:</span> times<span class="op">.</span><span class="fu">sort</span>()[<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(times<span class="op">.</span><span class="at">length</span> <span class="op">/</span> <span class="dv">2</span>)]<span class="op">,</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>      p95<span class="op">:</span> times<span class="op">.</span><span class="fu">sort</span>()[<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(times<span class="op">.</span><span class="at">length</span> <span class="op">*</span> <span class="fl">0.95</span>)]<span class="op">,</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>  <span class="kw">static</span> <span class="kw">async</span> <span class="fu">measureMemoryUsage</span><span class="op">&lt;</span>T<span class="op">&gt;</span>(</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>    component<span class="op">:</span> React<span class="op">.</span><span class="at">ComponentType</span><span class="op">&lt;</span>T<span class="op">&gt;,</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>    props<span class="op">:</span> T</span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>MemoryResult<span class="op">&gt;</span> {</span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="bu">performance</span><span class="op">.</span><span class="at">memory</span>) {</span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Memory measurement not available&#39;</span>)<span class="op">;</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> beforeMemory <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="at">memory</span><span class="op">.</span><span class="at">usedJSHeapSize</span><span class="op">;</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { unmount } <span class="op">=</span> <span class="fu">render</span>(React<span class="op">.</span><span class="fu">createElement</span>(component<span class="op">,</span> props))<span class="op">;</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> afterMemory <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="at">memory</span><span class="op">.</span><span class="at">usedJSHeapSize</span><span class="op">;</span></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unmount</span>()<span class="op">;</span></span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> afterUnmountMemory <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="at">memory</span><span class="op">.</span><span class="at">usedJSHeapSize</span><span class="op">;</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>      componentMemory<span class="op">:</span> afterMemory <span class="op">-</span> beforeMemory<span class="op">,</span></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a>      memoryLeaked<span class="op">:</span> afterUnmountMemory <span class="op">-</span> beforeMemory<span class="op">,</span></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>      totalHeapSize<span class="op">:</span> <span class="bu">performance</span><span class="op">.</span><span class="at">memory</span><span class="op">.</span><span class="at">totalJSHeapSize</span><span class="op">,</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb45"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Performance test examples</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;UserList Performance&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should render 1000 users in under 100ms (95th percentile)&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> users <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({ length<span class="op">:</span> <span class="dv">1000</span> }<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> ({</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>      id<span class="op">:</span> <span class="vs">`user-</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="vs">`User </span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>      email<span class="op">:</span> <span class="vs">`user</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">@example.com`</span><span class="op">,</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    }))<span class="op">;</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> ComponentPerformanceTester<span class="op">.</span><span class="fu">measureRenderTime</span>(</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>      UserList<span class="op">,</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>      { users }<span class="op">,</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>      <span class="dv">50</span> <span class="co">// 50 iterations</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(result<span class="op">.</span><span class="at">p95</span>)<span class="op">.</span><span class="fu">toBeLessThan</span>(<span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should not leak memory when unmounting&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> users <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({ length<span class="op">:</span> <span class="dv">100</span> }<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> ({</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>      id<span class="op">:</span> <span class="vs">`user-</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="vs">`User </span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>      email<span class="op">:</span> <span class="vs">`user</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">@example.com`</span><span class="op">,</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    }))<span class="op">;</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> ComponentPerformanceTester<span class="op">.</span><span class="fu">measureMemoryUsage</span>(</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>      UserList<span class="op">,</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>      { users }</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Allow for minor GC timing variations</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(result<span class="op">.</span><span class="at">memoryLeaked</span>)<span class="op">.</span><span class="fu">toBeLessThan</span>(<span class="dv">1000</span>)<span class="op">;</span> <span class="co">// Less than 1KB leaked</span></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should handle rapid prop updates efficiently&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { rerender } <span class="op">=</span> <span class="fu">render</span>(<span class="op">&lt;</span>UserList users<span class="op">=</span>{[]} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> start <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Simulate rapid prop updates</span></span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">100</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> users <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({ length<span class="op">:</span> i }<span class="op">,</span> (_<span class="op">,</span> idx) <span class="kw">=&gt;</span> ({</span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>        id<span class="op">:</span> <span class="vs">`user-</span><span class="sc">${</span>idx<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="vs">`User </span><span class="sc">${</span>idx<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>        email<span class="op">:</span> <span class="vs">`user</span><span class="sc">${</span>idx<span class="sc">}</span><span class="vs">@example.com`</span><span class="op">,</span></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>      }))<span class="op">;</span></span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rerender</span>(<span class="op">&lt;</span>UserList users<span class="op">=</span>{users} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> end <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> totalTime <span class="op">=</span> end <span class="op">-</span> start<span class="op">;</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Should handle 100 updates in under 500ms</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(totalTime)<span class="op">.</span><span class="fu">toBeLessThan</span>(<span class="dv">500</span>)<span class="op">;</span></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="bundle-size-testing">Bundle Size Testing</h3>
<div class="sourceCode" id="cb46"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Bundle analysis testing</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;Bundle Size&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should not exceed size budgets&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> bundleStats <span class="op">=</span> <span class="cf">await</span> <span class="fu">analyzeBundleSize</span>()<span class="op">;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(bundleStats<span class="op">.</span><span class="at">initialBundle</span>)<span class="op">.</span><span class="fu">toBeLessThan</span>(<span class="dv">250</span> <span class="op">*</span> <span class="dv">1024</span>)<span class="op">;</span> <span class="co">// 250KB</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(bundleStats<span class="op">.</span><span class="at">vendorBundle</span>)<span class="op">.</span><span class="fu">toBeLessThan</span>(<span class="dv">500</span> <span class="op">*</span> <span class="dv">1024</span>)<span class="op">;</span> <span class="co">// 500KB</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(bundleStats<span class="op">.</span><span class="at">totalSize</span>)<span class="op">.</span><span class="fu">toBeLessThan</span>(<span class="dv">1024</span> <span class="op">*</span> <span class="dv">1024</span>)<span class="op">;</span> <span class="co">// 1MB</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should not import unnecessary dependencies&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dependencies <span class="op">=</span> <span class="cf">await</span> <span class="fu">analyzeImportedDependencies</span>()<span class="op">;</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for problematic imports</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(dependencies)<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toContain</span>(<span class="st">&#39;moment&#39;</span>)<span class="op">;</span> <span class="co">// Should use date-fns</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(dependencies)<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toContain</span>(<span class="st">&#39;lodash&#39;</span>)<span class="op">;</span> <span class="co">// Should use lodash-es</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(dependencies)<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toContain</span>(<span class="st">&#39;rxjs&#39;</span>)<span class="op">;</span> <span class="co">// Should not be in frontend bundle</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should properly tree-shake unused code&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> unusedExports <span class="op">=</span> <span class="cf">await</span> <span class="fu">findUnusedExports</span>()<span class="op">;</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Allow for some test utilities but not main code</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> unexpectedUnused <span class="op">=</span> unusedExports<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>      exp <span class="kw">=&gt;</span> <span class="op">!</span>exp<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;.test.&#39;</span>) <span class="op">&amp;&amp;</span> <span class="op">!</span>exp<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;.spec.&#39;</span>)</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(unexpectedUnused)<span class="op">.</span><span class="fu">toHaveLength</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h2 id="accessibility-testing-automation">Accessibility Testing
Automation</h2>
<h3 id="comprehensive-a11y-testing">Comprehensive A11y Testing</h3>
<div class="sourceCode" id="cb47"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Accessibility testing utilities</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { axe<span class="op">,</span> toHaveNoViolations } <span class="im">from</span> <span class="st">&#39;jest-axe&#39;</span><span class="op">;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>expect<span class="op">.</span><span class="fu">extend</span>(toHaveNoViolations)<span class="op">;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;UserForm Accessibility&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should have no accessibility violations&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { container } <span class="op">=</span> <span class="fu">render</span>(</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>UserForm</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>        onSubmit<span class="op">=</span>{jest<span class="op">.</span><span class="fu">fn</span>()}</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>        initialValues<span class="op">=</span>{{}}</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>      <span class="op">/&gt;</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results <span class="op">=</span> <span class="cf">await</span> <span class="fu">axe</span>(container)<span class="op">;</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(results)<span class="op">.</span><span class="fu">toHaveNoViolations</span>()<span class="op">;</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should support keyboard navigation&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">render</span>(<span class="op">&lt;</span>UserForm onSubmit<span class="op">=</span>{jest<span class="op">.</span><span class="fu">fn</span>()} initialValues<span class="op">=</span>{{}} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> nameInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Name&#39;</span>)<span class="op">;</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> emailInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByLabelText</span>(<span class="st">&#39;Email&#39;</span>)<span class="op">;</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> submitButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Submit&#39;</span>)<span class="op">;</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Test tab order</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>    nameInput<span class="op">.</span><span class="fu">focus</span>()<span class="op">;</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(nameInput)<span class="op">.</span><span class="fu">toHaveFocus</span>()<span class="op">;</span></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">tab</span>()<span class="op">;</span></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(emailInput)<span class="op">.</span><span class="fu">toHaveFocus</span>()<span class="op">;</span></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">tab</span>()<span class="op">;</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(submitButton)<span class="op">.</span><span class="fu">toHaveFocus</span>()<span class="op">;</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should announce form errors to screen readers&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { container } <span class="op">=</span> <span class="fu">render</span>(</span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>UserForm onSubmit<span class="op">=</span>{jest<span class="op">.</span><span class="fu">fn</span>()} initialValues<span class="op">=</span>{{}} <span class="op">/&gt;</span></span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> submitButton <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByText</span>(<span class="st">&#39;Submit&#39;</span>)<span class="op">;</span></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> userEvent<span class="op">.</span><span class="fu">click</span>(submitButton)<span class="op">;</span></span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for aria-live region updates</span></span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">waitFor</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> errorRegion <span class="op">=</span> container<span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&#39;[aria-live=&quot;polite&quot;]&#39;</span>)<span class="op">;</span></span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expect</span>(errorRegion)<span class="op">.</span><span class="fu">toHaveTextContent</span>(<span class="st">&#39;Please fill in all required fields&#39;</span>)<span class="op">;</span></span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should have proper color contrast ratios&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { container } <span class="op">=</span> <span class="fu">render</span>(<span class="op">&lt;</span>UserForm onSubmit<span class="op">=</span>{jest<span class="op">.</span><span class="fu">fn</span>()} initialValues<span class="op">=</span>{{}} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results <span class="op">=</span> <span class="cf">await</span> <span class="fu">axe</span>(container<span class="op">,</span> {</span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a>      rules<span class="op">:</span> {</span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;color-contrast&#39;</span><span class="op">:</span> { enabled<span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(results)<span class="op">.</span><span class="fu">toHaveNoViolations</span>()<span class="op">;</span></span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should work with screen reader simulation&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">render</span>(<span class="op">&lt;</span>UserForm onSubmit<span class="op">=</span>{jest<span class="op">.</span><span class="fu">fn</span>()} initialValues<span class="op">=</span>{{}} <span class="op">/&gt;</span>)<span class="op">;</span></span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Simulate screen reader navigation</span></span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> form <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByRole</span>(<span class="st">&#39;form&#39;</span>)<span class="op">;</span></span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(form)<span class="op">.</span><span class="fu">toHaveAccessibleName</span>(<span class="st">&#39;User Information Form&#39;</span>)<span class="op">;</span></span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> nameInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByRole</span>(<span class="st">&#39;textbox&#39;</span><span class="op">,</span> { name<span class="op">:</span> <span class="ss">/name/i</span> })<span class="op">;</span></span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(nameInput)<span class="op">.</span><span class="fu">toBeRequired</span>()<span class="op">;</span></span>
<span id="cb47-73"><a href="#cb47-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(nameInput)<span class="op">.</span><span class="fu">toHaveAccessibleDescription</span>(<span class="st">&#39;Enter your full name&#39;</span>)<span class="op">;</span></span>
<span id="cb47-74"><a href="#cb47-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> emailInput <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="fu">getByRole</span>(<span class="st">&#39;textbox&#39;</span><span class="op">,</span> { name<span class="op">:</span> <span class="ss">/email/i</span> })<span class="op">;</span></span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(emailInput)<span class="op">.</span><span class="fu">toBeRequired</span>()<span class="op">;</span></span>
<span id="cb47-77"><a href="#cb47-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(emailInput)<span class="op">.</span><span class="fu">toHaveAccessibleDescription</span>(<span class="st">&#39;Enter a valid email address&#39;</span>)<span class="op">;</span></span>
<span id="cb47-78"><a href="#cb47-78" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="custom-accessibility-matchers">Custom Accessibility
Matchers</h3>
<div class="sourceCode" id="cb48"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Custom accessibility testing matchers</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">declare</span> <span class="bu">global</span> {</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="im">namespace</span> <span class="dt">jest</span> {</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">interface</span> Matchers<span class="op">&lt;</span>R<span class="op">&gt;</span> {</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">toBeAccessible</span>()<span class="op">:</span> R<span class="op">;</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">toHaveProperHeadingStructure</span>()<span class="op">:</span> R<span class="op">;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">toSupportKeyboardNavigation</span>()<span class="op">:</span> R<span class="op">;</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>expect<span class="op">.</span><span class="fu">extend</span>({</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">toBeAccessible</span>(received<span class="op">:</span> <span class="bu">HTMLElement</span>) {</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results <span class="op">=</span> <span class="cf">await</span> <span class="fu">axe</span>(received)<span class="op">;</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> pass <span class="op">=</span> results<span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>      pass<span class="op">,</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>      message<span class="op">:</span> () <span class="kw">=&gt;</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>        pass</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="st">&#39;Element is accessible&#39;</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="vs">`Element has accessibility violations:</span><span class="sc">\n${</span>results<span class="op">.</span><span class="at">violations</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">map</span>(v <span class="kw">=&gt;</span> <span class="vs">`- </span><span class="sc">${</span>v<span class="op">.</span><span class="at">description</span><span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">toHaveProperHeadingStructure</span>(received<span class="op">:</span> <span class="bu">HTMLElement</span>) {</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> headings <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(received<span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;h1, h2, h3, h4, h5, h6&#39;</span>))<span class="op">;</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> levels <span class="op">=</span> headings<span class="op">.</span><span class="fu">map</span>(h <span class="kw">=&gt;</span> <span class="pp">parseInt</span>(h<span class="op">.</span><span class="at">tagName</span><span class="op">.</span><span class="fu">charAt</span>(<span class="dv">1</span>)))<span class="op">;</span></span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> valid <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> errors<span class="op">:</span> <span class="dt">string</span>[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (levels<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>) {</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a>        pass<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a>        message<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="st">&#39;No headings found&#39;</span><span class="op">,</span></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Should start with h1</span></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (levels[<span class="dv">0</span>] <span class="op">!==</span> <span class="dv">1</span>) {</span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a>      valid <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;First heading should be h1&#39;</span>)<span class="op">;</span></span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Should not skip levels</span></span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> levels<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (levels[i] <span class="op">&gt;</span> levels[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> <span class="dv">1</span>) {</span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a>        valid <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a>        errors<span class="op">.</span><span class="fu">push</span>(<span class="vs">`Heading level skipped: h</span><span class="sc">${</span>levels[i <span class="op">-</span> <span class="dv">1</span>]<span class="sc">}</span><span class="vs"> to h</span><span class="sc">${</span>levels[i]<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb48-56"><a href="#cb48-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-57"><a href="#cb48-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb48-58"><a href="#cb48-58" aria-hidden="true" tabindex="-1"></a>      pass<span class="op">:</span> valid<span class="op">,</span></span>
<span id="cb48-59"><a href="#cb48-59" aria-hidden="true" tabindex="-1"></a>      message<span class="op">:</span> () <span class="kw">=&gt;</span></span>
<span id="cb48-60"><a href="#cb48-60" aria-hidden="true" tabindex="-1"></a>        valid</span>
<span id="cb48-61"><a href="#cb48-61" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="st">&#39;Heading structure is proper&#39;</span></span>
<span id="cb48-62"><a href="#cb48-62" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="vs">`Heading structure issues:</span><span class="sc">\n${</span>errors<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb48-63"><a href="#cb48-63" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb48-64"><a href="#cb48-64" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb48-65"><a href="#cb48-65" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h2 id="common-testing-implementation-pitfalls">⚠️ Common Testing
Implementation Pitfalls</h2>
<h3 id="pitfall-1-testing-too-late-in-development">Pitfall #1: Testing
Too Late in Development</h3>
<p><strong>Problem</strong>: Writing tests after implementation leads to
tests that confirm existing bugs <strong>Solution</strong>: Write tests
first (TDD) or immediately after each function</p>
<h3 id="pitfall-2-ignoring-test-performance">Pitfall #2: Ignoring Test
Performance</h3>
<p><strong>Problem</strong>: Slow tests discourage running them
frequently <strong>Solution</strong>: Profile test performance,
parallelize when possible, use efficient test utilities</p>
<h3 id="pitfall-3-inconsistent-test-data">Pitfall #3: Inconsistent Test
Data</h3>
<p><strong>Problem</strong>: Tests pass/fail randomly due to
inconsistent test data <strong>Solution</strong>: Use test data
builders, factories, and deterministic data generation</p>
<h3 id="pitfall-4-not-testing-edge-cases">Pitfall #4: Not Testing Edge
Cases</h3>
<p><strong>Problem</strong>: Tests only cover happy path scenarios
<strong>Solution</strong>: Systematically test boundary conditions,
error cases, and unusual inputs</p>
<h2 id="implementation-guide-tdd-workshop">🛠️ Implementation Guide: TDD
Workshop</h2>
<h3 id="hour-tdd-workshop-agenda">2-Hour TDD Workshop Agenda</h3>
<p><strong>Hour 1: TDD Fundamentals</strong> - 15 min: TDD principles
and benefits - 30 min: Hands-on TDD exercise (calculator) - 15 min:
Red-Green-Refactor discussion</p>
<p><strong>Hour 2: Real-World Application</strong> - 45 min: TDD a
feature end-to-end - 15 min: Retrospective and next steps</p>
<h3 id="tdd-kata-string-calculator">TDD Kata: String Calculator</h3>
<div class="sourceCode" id="cb49"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Kata: Implement a string calculator with TDD</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Requirements:</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Empty string returns 0</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Single number returns that number</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. Two numbers, comma separated, returns sum</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co">// 4. Any amount of numbers</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co">// 5. Handle newlines between numbers</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="co">// 6. Support different delimiters</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="co">// 7. Negative numbers throw exception</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(<span class="st">&#39;StringCalculator&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Start here and work through requirements one by one</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">it</span>(<span class="st">&#39;should return 0 for empty string&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> calculator <span class="op">=</span> <span class="kw">new</span> <span class="fu">StringCalculator</span>()<span class="op">;</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect</span>(calculator<span class="op">.</span><span class="fu">add</span>(<span class="st">&#39;&#39;</span>))<span class="op">.</span><span class="fu">toBe</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add more tests as you implement...</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This completes Part I of our frontend engineering book. We’ve covered
the foundational mindset, quality practices, and testing strategies that
separate intermediate developers from production-ready engineers.</p>
<hr />
<h1 id="part-ii-production-excellence">Part II: Production
Excellence</h1>
<p><em>Mastering the operational aspects of frontend
engineering</em></p>
<hr />
<h1 id="chapter-6-performance-monitoring-intelligence">Chapter 6:
Performance &amp; Monitoring Intelligence 🟡</h1>
<p><em>Pages 46-58</em></p>
<h2 id="the-performance-first-mindset">The Performance-First
Mindset</h2>
<p>Performance isn’t a feature you add at the end—it’s a fundamental
quality that shapes every architectural decision. In enterprise
applications, performance directly impacts business metrics: every 100ms
of delay can cost millions in revenue.</p>
<h3 id="key-insight-performance-as-a-product-feature">💡 Key Insight:
Performance as a Product Feature</h3>
<p>Performance affects: - <strong>User satisfaction</strong>: 53% of
users abandon sites taking &gt;3 seconds to load - <strong>Business
revenue</strong>: Amazon loses 1% revenue for every 100ms delay -
<strong>SEO rankings</strong>: Core Web Vitals are ranking factors -
<strong>Development velocity</strong>: Slow development tools reduce
productivity</p>
<h2 id="core-web-vitals-excellence">Core Web Vitals Excellence</h2>
<h3 id="understanding-the-modern-metrics">Understanding the Modern
Metrics</h3>
<div class="sourceCode" id="cb50"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Modern Core Web Vitals Configuration</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> CoreWebVitalsConfig {</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  lcp<span class="op">:</span> {</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    good<span class="op">:</span> <span class="dv">2500</span><span class="op">;</span>     <span class="co">// Largest Contentful Paint</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    poor<span class="op">:</span> <span class="dv">4000</span><span class="op">;</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    target<span class="op">:</span> <span class="st">&#39;hero image or main content&#39;</span><span class="op">;</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  inp<span class="op">:</span> {</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    good<span class="op">:</span> <span class="dv">200</span><span class="op">;</span>      <span class="co">// Interaction to Next Paint (replaces FID)</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    poor<span class="op">:</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    target<span class="op">:</span> <span class="st">&#39;all user interactions&#39;</span><span class="op">;</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  cls<span class="op">:</span> {</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    good<span class="op">:</span> <span class="fl">0.1</span><span class="op">;</span>      <span class="co">// Cumulative Layout Shift</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    poor<span class="op">:</span> <span class="fl">0.25</span><span class="op">;</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    target<span class="op">:</span> <span class="st">&#39;visual stability&#39;</span><span class="op">;</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Additional meaningful metrics</span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>  fcp<span class="op">:</span> {</span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>    good<span class="op">:</span> <span class="dv">1800</span><span class="op">;</span>     <span class="co">// First Contentful Paint</span></span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>    poor<span class="op">:</span> <span class="dv">3000</span><span class="op">;</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>  ttfb<span class="op">:</span> {</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>    good<span class="op">:</span> <span class="dv">800</span><span class="op">;</span>      <span class="co">// Time to First Byte</span></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>    poor<span class="op">:</span> <span class="dv">1800</span><span class="op">;</span></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="advanced-core-web-vitals-implementation">Advanced Core Web
Vitals Implementation</h3>
<div class="sourceCode" id="cb51"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Enterprise Core Web Vitals Monitoring</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> CoreWebVitalsMonitor {</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> analytics<span class="op">:</span> AnalyticsService<span class="op">;</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> performanceBudget<span class="op">:</span> PerformanceBudget<span class="op">;</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">analytics</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">AnalyticsService</span>()<span class="op">;</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">performanceBudget</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">PerformanceBudget</span>()<span class="op">;</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">initializeMonitoring</span>()<span class="op">;</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">initializeMonitoring</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Use dynamic imports for performance</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span>(<span class="st">&#39;web-vitals&#39;</span>)<span class="op">.</span><span class="fu">then</span>(({ getCLS<span class="op">,</span> getFID<span class="op">,</span> getFCP<span class="op">,</span> getLCP<span class="op">,</span> getTTFB<span class="op">,</span> onINP }) <span class="kw">=&gt;</span> {</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getCLS</span>(<span class="kw">this</span><span class="op">.</span><span class="at">handleMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getFID</span>(<span class="kw">this</span><span class="op">.</span><span class="at">handleMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span> <span class="co">// Legacy support</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">onINP</span>(<span class="kw">this</span><span class="op">.</span><span class="at">handleMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span>  <span class="co">// New standard</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getFCP</span>(<span class="kw">this</span><span class="op">.</span><span class="at">handleMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getLCP</span>(<span class="kw">this</span><span class="op">.</span><span class="at">handleMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">getTTFB</span>(<span class="kw">this</span><span class="op">.</span><span class="at">handleMetric</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>))<span class="op">;</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Monitor custom performance metrics</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">monitorCustomMetrics</span>()<span class="op">;</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">handleMetric</span>(metric<span class="op">:</span> WebVital)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> enrichedMetric <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">enrichMetric</span>(metric)<span class="op">;</span></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send to analytics</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">analytics</span><span class="op">.</span><span class="fu">track</span>(<span class="st">&#39;web_vital&#39;</span><span class="op">,</span> enrichedMetric)<span class="op">;</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check against performance budget</span></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">performanceBudget</span><span class="op">.</span><span class="fu">validateMetric</span>(enrichedMetric)<span class="op">;</span></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Alert on poor performance</span></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (enrichedMetric<span class="op">.</span><span class="at">rating</span> <span class="op">===</span> <span class="st">&#39;poor&#39;</span>) {</span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">alertPoorPerformance</span>(enrichedMetric)<span class="op">;</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Log for debugging</span></span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">logMetric</span>(enrichedMetric)<span class="op">;</span></span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">enrichMetric</span>(metric<span class="op">:</span> WebVital)<span class="op">:</span> EnrichedWebVital {</span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span>metric<span class="op">,</span></span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a>      url<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">href</span><span class="op">,</span></span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a>      userAgent<span class="op">:</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">userAgent</span><span class="op">,</span></span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a>      connection<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getConnectionInfo</span>()<span class="op">,</span></span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a>      viewport<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getViewportInfo</span>()<span class="op">,</span></span>
<span id="cb51-52"><a href="#cb51-52" aria-hidden="true" tabindex="-1"></a>      deviceType<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getDeviceType</span>()<span class="op">,</span></span>
<span id="cb51-53"><a href="#cb51-53" aria-hidden="true" tabindex="-1"></a>      timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb51-54"><a href="#cb51-54" aria-hidden="true" tabindex="-1"></a>      sessionId<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getSessionId</span>()<span class="op">,</span></span>
<span id="cb51-55"><a href="#cb51-55" aria-hidden="true" tabindex="-1"></a>      userId<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getUserId</span>()<span class="op">,</span></span>
<span id="cb51-56"><a href="#cb51-56" aria-hidden="true" tabindex="-1"></a>      buildVersion<span class="op">:</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">REACT_APP_VERSION</span><span class="op">,</span></span>
<span id="cb51-57"><a href="#cb51-57" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb51-58"><a href="#cb51-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-59"><a href="#cb51-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-60"><a href="#cb51-60" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">getConnectionInfo</span>()<span class="op">:</span> ConnectionInfo {</span>
<span id="cb51-61"><a href="#cb51-61" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> connection <span class="op">=</span> (<span class="bu">navigator</span> <span class="im">as</span> <span class="dt">any</span>)<span class="op">.</span><span class="at">connection</span><span class="op">;</span></span>
<span id="cb51-62"><a href="#cb51-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-63"><a href="#cb51-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>connection) <span class="cf">return</span> { type<span class="op">:</span> <span class="st">&#39;unknown&#39;</span> }<span class="op">;</span></span>
<span id="cb51-64"><a href="#cb51-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-65"><a href="#cb51-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb51-66"><a href="#cb51-66" aria-hidden="true" tabindex="-1"></a>      type<span class="op">:</span> connection<span class="op">.</span><span class="at">effectiveType</span><span class="op">,</span></span>
<span id="cb51-67"><a href="#cb51-67" aria-hidden="true" tabindex="-1"></a>      downlink<span class="op">:</span> connection<span class="op">.</span><span class="at">downlink</span><span class="op">,</span></span>
<span id="cb51-68"><a href="#cb51-68" aria-hidden="true" tabindex="-1"></a>      rtt<span class="op">:</span> connection<span class="op">.</span><span class="at">rtt</span><span class="op">,</span></span>
<span id="cb51-69"><a href="#cb51-69" aria-hidden="true" tabindex="-1"></a>      saveData<span class="op">:</span> connection<span class="op">.</span><span class="at">saveData</span><span class="op">,</span></span>
<span id="cb51-70"><a href="#cb51-70" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb51-71"><a href="#cb51-71" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-72"><a href="#cb51-72" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-73"><a href="#cb51-73" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">getViewportInfo</span>()<span class="op">:</span> ViewportInfo {</span>
<span id="cb51-74"><a href="#cb51-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb51-75"><a href="#cb51-75" aria-hidden="true" tabindex="-1"></a>      width<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerWidth</span><span class="op">,</span></span>
<span id="cb51-76"><a href="#cb51-76" aria-hidden="true" tabindex="-1"></a>      height<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerHeight</span><span class="op">,</span></span>
<span id="cb51-77"><a href="#cb51-77" aria-hidden="true" tabindex="-1"></a>      devicePixelRatio<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">devicePixelRatio</span><span class="op">,</span></span>
<span id="cb51-78"><a href="#cb51-78" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb51-79"><a href="#cb51-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-80"><a href="#cb51-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-81"><a href="#cb51-81" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">getDeviceType</span>()<span class="op">:</span> DeviceType {</span>
<span id="cb51-82"><a href="#cb51-82" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerWidth</span><span class="op">;</span></span>
<span id="cb51-83"><a href="#cb51-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-84"><a href="#cb51-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (width <span class="op">&lt;</span> <span class="dv">768</span>) <span class="cf">return</span> <span class="st">&#39;mobile&#39;</span><span class="op">;</span></span>
<span id="cb51-85"><a href="#cb51-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (width <span class="op">&lt;</span> <span class="dv">1024</span>) <span class="cf">return</span> <span class="st">&#39;tablet&#39;</span><span class="op">;</span></span>
<span id="cb51-86"><a href="#cb51-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&#39;desktop&#39;</span><span class="op">;</span></span>
<span id="cb51-87"><a href="#cb51-87" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-88"><a href="#cb51-88" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-89"><a href="#cb51-89" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">monitorCustomMetrics</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb51-90"><a href="#cb51-90" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Time to Interactive (TTI)</span></span>
<span id="cb51-91"><a href="#cb51-91" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">measureTimeToInteractive</span>()<span class="op">;</span></span>
<span id="cb51-92"><a href="#cb51-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-93"><a href="#cb51-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">// First CPU Idle</span></span>
<span id="cb51-94"><a href="#cb51-94" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">measureFirstCPUIdle</span>()<span class="op">;</span></span>
<span id="cb51-95"><a href="#cb51-95" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-96"><a href="#cb51-96" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Resource loading performance</span></span>
<span id="cb51-97"><a href="#cb51-97" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">monitorResourcePerformance</span>()<span class="op">;</span></span>
<span id="cb51-98"><a href="#cb51-98" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-99"><a href="#cb51-99" aria-hidden="true" tabindex="-1"></a>    <span class="co">// User interaction timing</span></span>
<span id="cb51-100"><a href="#cb51-100" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">monitorUserInteractions</span>()<span class="op">;</span></span>
<span id="cb51-101"><a href="#cb51-101" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-102"><a href="#cb51-102" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-103"><a href="#cb51-103" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">measureTimeToInteractive</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb51-104"><a href="#cb51-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Simplified TTI calculation</span></span>
<span id="cb51-105"><a href="#cb51-105" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="bu">PerformanceObserver</span>((list) <span class="kw">=&gt;</span> {</span>
<span id="cb51-106"><a href="#cb51-106" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> entries <span class="op">=</span> list<span class="op">.</span><span class="fu">getEntries</span>()<span class="op">;</span></span>
<span id="cb51-107"><a href="#cb51-107" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb51-108"><a href="#cb51-108" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Look for long tasks that might delay interactivity</span></span>
<span id="cb51-109"><a href="#cb51-109" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> longTasks <span class="op">=</span> entries<span class="op">.</span><span class="fu">filter</span>(entry <span class="kw">=&gt;</span> entry<span class="op">.</span><span class="at">duration</span> <span class="op">&gt;</span> <span class="dv">50</span>)<span class="op">;</span></span>
<span id="cb51-110"><a href="#cb51-110" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb51-111"><a href="#cb51-111" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (longTasks<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>) {</span>
<span id="cb51-112"><a href="#cb51-112" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> tti <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb51-113"><a href="#cb51-113" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb51-114"><a href="#cb51-114" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">analytics</span><span class="op">.</span><span class="fu">track</span>(<span class="st">&#39;custom_metric&#39;</span><span class="op">,</span> {</span>
<span id="cb51-115"><a href="#cb51-115" aria-hidden="true" tabindex="-1"></a>          name<span class="op">:</span> <span class="st">&#39;time_to_interactive&#39;</span><span class="op">,</span></span>
<span id="cb51-116"><a href="#cb51-116" aria-hidden="true" tabindex="-1"></a>          value<span class="op">:</span> tti<span class="op">,</span></span>
<span id="cb51-117"><a href="#cb51-117" aria-hidden="true" tabindex="-1"></a>          rating<span class="op">:</span> tti <span class="op">&lt;</span> <span class="dv">3800</span> <span class="op">?</span> <span class="st">&#39;good&#39;</span> <span class="op">:</span> tti <span class="op">&lt;</span> <span class="dv">7300</span> <span class="op">?</span> <span class="st">&#39;needs-improvement&#39;</span> <span class="op">:</span> <span class="st">&#39;poor&#39;</span><span class="op">,</span></span>
<span id="cb51-118"><a href="#cb51-118" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb51-119"><a href="#cb51-119" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb51-120"><a href="#cb51-120" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb51-121"><a href="#cb51-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-122"><a href="#cb51-122" aria-hidden="true" tabindex="-1"></a>    observer<span class="op">.</span><span class="fu">observe</span>({ entryTypes<span class="op">:</span> [<span class="st">&#39;longtask&#39;</span>] })<span class="op">;</span></span>
<span id="cb51-123"><a href="#cb51-123" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-124"><a href="#cb51-124" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-125"><a href="#cb51-125" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">monitorResourcePerformance</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb51-126"><a href="#cb51-126" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="bu">PerformanceObserver</span>((list) <span class="kw">=&gt;</span> {</span>
<span id="cb51-127"><a href="#cb51-127" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> entries <span class="op">=</span> list<span class="op">.</span><span class="fu">getEntries</span>() <span class="im">as</span> <span class="bu">PerformanceResourceTiming</span>[]<span class="op">;</span></span>
<span id="cb51-128"><a href="#cb51-128" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb51-129"><a href="#cb51-129" aria-hidden="true" tabindex="-1"></a>      entries<span class="op">.</span><span class="fu">forEach</span>((entry) <span class="kw">=&gt;</span> {</span>
<span id="cb51-130"><a href="#cb51-130" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> resourceMetric <span class="op">=</span> {</span>
<span id="cb51-131"><a href="#cb51-131" aria-hidden="true" tabindex="-1"></a>          name<span class="op">:</span> <span class="st">&#39;resource_timing&#39;</span><span class="op">,</span></span>
<span id="cb51-132"><a href="#cb51-132" aria-hidden="true" tabindex="-1"></a>          resourceName<span class="op">:</span> entry<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb51-133"><a href="#cb51-133" aria-hidden="true" tabindex="-1"></a>          duration<span class="op">:</span> entry<span class="op">.</span><span class="at">duration</span><span class="op">,</span></span>
<span id="cb51-134"><a href="#cb51-134" aria-hidden="true" tabindex="-1"></a>          transferSize<span class="op">:</span> entry<span class="op">.</span><span class="at">transferSize</span><span class="op">,</span></span>
<span id="cb51-135"><a href="#cb51-135" aria-hidden="true" tabindex="-1"></a>          initiatorType<span class="op">:</span> entry<span class="op">.</span><span class="at">initiatorType</span><span class="op">,</span></span>
<span id="cb51-136"><a href="#cb51-136" aria-hidden="true" tabindex="-1"></a>          rating<span class="op">:</span> entry<span class="op">.</span><span class="at">duration</span> <span class="op">&gt;</span> <span class="dv">1000</span> <span class="op">?</span> <span class="st">&#39;poor&#39;</span> <span class="op">:</span> <span class="st">&#39;good&#39;</span><span class="op">,</span></span>
<span id="cb51-137"><a href="#cb51-137" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb51-138"><a href="#cb51-138" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb51-139"><a href="#cb51-139" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (resourceMetric<span class="op">.</span><span class="at">rating</span> <span class="op">===</span> <span class="st">&#39;poor&#39;</span>) {</span>
<span id="cb51-140"><a href="#cb51-140" aria-hidden="true" tabindex="-1"></a>          <span class="kw">this</span><span class="op">.</span><span class="at">analytics</span><span class="op">.</span><span class="fu">track</span>(<span class="st">&#39;slow_resource&#39;</span><span class="op">,</span> resourceMetric)<span class="op">;</span></span>
<span id="cb51-141"><a href="#cb51-141" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb51-142"><a href="#cb51-142" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb51-143"><a href="#cb51-143" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb51-144"><a href="#cb51-144" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-145"><a href="#cb51-145" aria-hidden="true" tabindex="-1"></a>    observer<span class="op">.</span><span class="fu">observe</span>({ entryTypes<span class="op">:</span> [<span class="st">&#39;resource&#39;</span>] })<span class="op">;</span></span>
<span id="cb51-146"><a href="#cb51-146" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-147"><a href="#cb51-147" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-148"><a href="#cb51-148" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">alertPoorPerformance</span>(metric<span class="op">:</span> EnrichedWebVital)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb51-149"><a href="#cb51-149" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send alert to monitoring service</span></span>
<span id="cb51-150"><a href="#cb51-150" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> alert <span class="op">=</span> {</span>
<span id="cb51-151"><a href="#cb51-151" aria-hidden="true" tabindex="-1"></a>      type<span class="op">:</span> <span class="st">&#39;performance_degradation&#39;</span><span class="op">,</span></span>
<span id="cb51-152"><a href="#cb51-152" aria-hidden="true" tabindex="-1"></a>      metric<span class="op">:</span> metric<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb51-153"><a href="#cb51-153" aria-hidden="true" tabindex="-1"></a>      value<span class="op">:</span> metric<span class="op">.</span><span class="at">value</span><span class="op">,</span></span>
<span id="cb51-154"><a href="#cb51-154" aria-hidden="true" tabindex="-1"></a>      threshold<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getThreshold</span>(metric<span class="op">.</span><span class="at">name</span>)<span class="op">,</span></span>
<span id="cb51-155"><a href="#cb51-155" aria-hidden="true" tabindex="-1"></a>      context<span class="op">:</span> {</span>
<span id="cb51-156"><a href="#cb51-156" aria-hidden="true" tabindex="-1"></a>        url<span class="op">:</span> metric<span class="op">.</span><span class="at">url</span><span class="op">,</span></span>
<span id="cb51-157"><a href="#cb51-157" aria-hidden="true" tabindex="-1"></a>        deviceType<span class="op">:</span> metric<span class="op">.</span><span class="at">deviceType</span><span class="op">,</span></span>
<span id="cb51-158"><a href="#cb51-158" aria-hidden="true" tabindex="-1"></a>        connection<span class="op">:</span> metric<span class="op">.</span><span class="at">connection</span><span class="op">,</span></span>
<span id="cb51-159"><a href="#cb51-159" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb51-160"><a href="#cb51-160" aria-hidden="true" tabindex="-1"></a>      severity<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateSeverity</span>(metric)<span class="op">,</span></span>
<span id="cb51-161"><a href="#cb51-161" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb51-162"><a href="#cb51-162" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-163"><a href="#cb51-163" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send to alerting system</span></span>
<span id="cb51-164"><a href="#cb51-164" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">sendAlert</span>(alert)<span class="op">;</span></span>
<span id="cb51-165"><a href="#cb51-165" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-166"><a href="#cb51-166" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-167"><a href="#cb51-167" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">calculateSeverity</span>(metric<span class="op">:</span> EnrichedWebVital)<span class="op">:</span> <span class="st">&#39;low&#39;</span> <span class="op">|</span> <span class="st">&#39;medium&#39;</span> <span class="op">|</span> <span class="st">&#39;high&#39;</span> {</span>
<span id="cb51-168"><a href="#cb51-168" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> threshold <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getThreshold</span>(metric<span class="op">.</span><span class="at">name</span>)<span class="op">;</span></span>
<span id="cb51-169"><a href="#cb51-169" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> ratio <span class="op">=</span> metric<span class="op">.</span><span class="at">value</span> <span class="op">/</span> threshold<span class="op">;</span></span>
<span id="cb51-170"><a href="#cb51-170" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-171"><a href="#cb51-171" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (ratio <span class="op">&gt;</span> <span class="dv">2</span>) <span class="cf">return</span> <span class="st">&#39;high&#39;</span><span class="op">;</span></span>
<span id="cb51-172"><a href="#cb51-172" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (ratio <span class="op">&gt;</span> <span class="fl">1.5</span>) <span class="cf">return</span> <span class="st">&#39;medium&#39;</span><span class="op">;</span></span>
<span id="cb51-173"><a href="#cb51-173" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&#39;low&#39;</span><span class="op">;</span></span>
<span id="cb51-174"><a href="#cb51-174" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-175"><a href="#cb51-175" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="real-user-monitoring-rum-implementation">Real User Monitoring
(RUM) Implementation</h3>
<div class="sourceCode" id="cb52"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Advanced RUM with Business Intelligence</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> RealUserMonitoring {</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> eventBuffer<span class="op">:</span> PerformanceEvent[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">readonly</span> BUFFER_SIZE <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">readonly</span> FLUSH_INTERVAL <span class="op">=</span> <span class="dv">30000</span><span class="op">;</span> <span class="co">// 30 seconds</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(<span class="kw">private</span> config<span class="op">:</span> RUMConfig) {</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">startPerformanceTracking</span>()<span class="op">;</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">startBusinessMetricsTracking</span>()<span class="op">;</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">startUserExperienceTracking</span>()<span class="op">;</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">startPerformanceTracking</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track page load performance</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackPageLoad</span>()<span class="op">;</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track navigation performance</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackNavigation</span>()<span class="op">;</span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track resource loading</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackResourceLoading</span>()<span class="op">;</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track runtime performance</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackRuntimePerformance</span>()<span class="op">;</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">trackPageLoad</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;load&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> navigationTiming <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">getEntriesByType</span>(<span class="st">&#39;navigation&#39;</span>)[<span class="dv">0</span>] <span class="im">as</span> <span class="bu">PerformanceNavigationTiming</span><span class="op">;</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> pageLoadMetrics <span class="op">=</span> {</span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>        dns_lookup<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">domainLookupEnd</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">domainLookupStart</span><span class="op">,</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>        tcp_connection<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">connectEnd</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">connectStart</span><span class="op">,</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>        tls_negotiation<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">secureConnectionStart</span> <span class="op">&gt;</span> <span class="dv">0</span> </span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> navigationTiming<span class="op">.</span><span class="at">connectEnd</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">secureConnectionStart</span> </span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>        server_response<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">responseStart</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">requestStart</span><span class="op">,</span></span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>        page_download<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">responseEnd</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">responseStart</span><span class="op">,</span></span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>        dom_processing<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">domContentLoadedEventStart</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">responseEnd</span><span class="op">,</span></span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>        resource_loading<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">loadEventStart</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">domContentLoadedEventEnd</span><span class="op">,</span></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>        total_load_time<span class="op">:</span> navigationTiming<span class="op">.</span><span class="at">loadEventEnd</span> <span class="op">-</span> navigationTiming<span class="op">.</span><span class="at">navigationStart</span><span class="op">,</span></span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">recordEvent</span>(<span class="st">&#39;page_load&#39;</span><span class="op">,</span> pageLoadMetrics)<span class="op">;</span></span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">trackNavigation</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track SPA navigation performance</span></span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> navigationStart <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Listen for route changes (React Router example)</span></span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> originalPushState <span class="op">=</span> history<span class="op">.</span><span class="at">pushState</span><span class="op">;</span></span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> originalReplaceState <span class="op">=</span> history<span class="op">.</span><span class="at">replaceState</span><span class="op">;</span></span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>    history<span class="op">.</span><span class="at">pushState</span> <span class="op">=</span> <span class="kw">function</span>(<span class="op">...</span>args) {</span>
<span id="cb52-57"><a href="#cb52-57" aria-hidden="true" tabindex="-1"></a>      navigationStart <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb52-58"><a href="#cb52-58" aria-hidden="true" tabindex="-1"></a>      originalPushState<span class="op">.</span><span class="fu">apply</span>(history<span class="op">,</span> args)<span class="op">;</span></span>
<span id="cb52-59"><a href="#cb52-59" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb52-60"><a href="#cb52-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-61"><a href="#cb52-61" aria-hidden="true" tabindex="-1"></a>    history<span class="op">.</span><span class="at">replaceState</span> <span class="op">=</span> <span class="kw">function</span>(<span class="op">...</span>args) {</span>
<span id="cb52-62"><a href="#cb52-62" aria-hidden="true" tabindex="-1"></a>      navigationStart <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb52-63"><a href="#cb52-63" aria-hidden="true" tabindex="-1"></a>      originalReplaceState<span class="op">.</span><span class="fu">apply</span>(history<span class="op">,</span> args)<span class="op">;</span></span>
<span id="cb52-64"><a href="#cb52-64" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb52-65"><a href="#cb52-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-66"><a href="#cb52-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track when navigation is complete</span></span>
<span id="cb52-67"><a href="#cb52-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="bu">MutationObserver</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb52-68"><a href="#cb52-68" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> navigationTime <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>() <span class="op">-</span> navigationStart<span class="op">;</span></span>
<span id="cb52-69"><a href="#cb52-69" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb52-70"><a href="#cb52-70" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (navigationTime <span class="op">&gt;</span> <span class="dv">100</span>) { <span class="co">// Ignore micro-updates</span></span>
<span id="cb52-71"><a href="#cb52-71" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">recordEvent</span>(<span class="st">&#39;spa_navigation&#39;</span><span class="op">,</span> {</span>
<span id="cb52-72"><a href="#cb52-72" aria-hidden="true" tabindex="-1"></a>          duration<span class="op">:</span> navigationTime<span class="op">,</span></span>
<span id="cb52-73"><a href="#cb52-73" aria-hidden="true" tabindex="-1"></a>          from_url<span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="at">referrer</span><span class="op">,</span></span>
<span id="cb52-74"><a href="#cb52-74" aria-hidden="true" tabindex="-1"></a>          to_url<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">href</span><span class="op">,</span></span>
<span id="cb52-75"><a href="#cb52-75" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb52-76"><a href="#cb52-76" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb52-77"><a href="#cb52-77" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb52-78"><a href="#cb52-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-79"><a href="#cb52-79" aria-hidden="true" tabindex="-1"></a>    observer<span class="op">.</span><span class="fu">observe</span>(<span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">,</span> {</span>
<span id="cb52-80"><a href="#cb52-80" aria-hidden="true" tabindex="-1"></a>      childList<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb52-81"><a href="#cb52-81" aria-hidden="true" tabindex="-1"></a>      subtree<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb52-82"><a href="#cb52-82" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb52-83"><a href="#cb52-83" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-84"><a href="#cb52-84" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-85"><a href="#cb52-85" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">startBusinessMetricsTracking</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-86"><a href="#cb52-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track conversion funnel performance</span></span>
<span id="cb52-87"><a href="#cb52-87" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackConversionFunnel</span>()<span class="op">;</span></span>
<span id="cb52-88"><a href="#cb52-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-89"><a href="#cb52-89" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track feature usage and performance correlation</span></span>
<span id="cb52-90"><a href="#cb52-90" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackFeaturePerformance</span>()<span class="op">;</span></span>
<span id="cb52-91"><a href="#cb52-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-92"><a href="#cb52-92" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track user engagement metrics</span></span>
<span id="cb52-93"><a href="#cb52-93" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackUserEngagement</span>()<span class="op">;</span></span>
<span id="cb52-94"><a href="#cb52-94" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-95"><a href="#cb52-95" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-96"><a href="#cb52-96" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">trackConversionFunnel</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-97"><a href="#cb52-97" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> funnelSteps <span class="op">=</span> [</span>
<span id="cb52-98"><a href="#cb52-98" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;product_view&#39;</span><span class="op">,</span></span>
<span id="cb52-99"><a href="#cb52-99" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;add_to_cart&#39;</span><span class="op">,</span></span>
<span id="cb52-100"><a href="#cb52-100" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;checkout_start&#39;</span><span class="op">,</span></span>
<span id="cb52-101"><a href="#cb52-101" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;payment_info&#39;</span><span class="op">,</span></span>
<span id="cb52-102"><a href="#cb52-102" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;purchase_complete&#39;</span><span class="op">,</span></span>
<span id="cb52-103"><a href="#cb52-103" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb52-104"><a href="#cb52-104" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-105"><a href="#cb52-105" aria-hidden="true" tabindex="-1"></a>    funnelSteps<span class="op">.</span><span class="fu">forEach</span>(step <span class="kw">=&gt;</span> {</span>
<span id="cb52-106"><a href="#cb52-106" aria-hidden="true" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="vs">`custom:</span><span class="sc">${</span>step<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> (event<span class="op">:</span> <span class="bu">CustomEvent</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb52-107"><a href="#cb52-107" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> performanceContext <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getCurrentPerformanceContext</span>()<span class="op">;</span></span>
<span id="cb52-108"><a href="#cb52-108" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb52-109"><a href="#cb52-109" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">recordEvent</span>(<span class="st">&#39;funnel_step&#39;</span><span class="op">,</span> {</span>
<span id="cb52-110"><a href="#cb52-110" aria-hidden="true" tabindex="-1"></a>          step<span class="op">,</span></span>
<span id="cb52-111"><a href="#cb52-111" aria-hidden="true" tabindex="-1"></a>          performance_context<span class="op">:</span> performanceContext<span class="op">,</span></span>
<span id="cb52-112"><a href="#cb52-112" aria-hidden="true" tabindex="-1"></a>          user_context<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getUserContext</span>()<span class="op">,</span></span>
<span id="cb52-113"><a href="#cb52-113" aria-hidden="true" tabindex="-1"></a>          timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb52-114"><a href="#cb52-114" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb52-115"><a href="#cb52-115" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb52-116"><a href="#cb52-116" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb52-117"><a href="#cb52-117" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-118"><a href="#cb52-118" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-119"><a href="#cb52-119" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">getCurrentPerformanceContext</span>()<span class="op">:</span> PerformanceContext {</span>
<span id="cb52-120"><a href="#cb52-120" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> navigation <span class="op">=</span> <span class="bu">performance</span><span class="op">.</span><span class="fu">getEntriesByType</span>(<span class="st">&#39;navigation&#39;</span>)[<span class="dv">0</span>] <span class="im">as</span> <span class="bu">PerformanceNavigationTiming</span><span class="op">;</span></span>
<span id="cb52-121"><a href="#cb52-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-122"><a href="#cb52-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb52-123"><a href="#cb52-123" aria-hidden="true" tabindex="-1"></a>      connection_speed<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">estimateConnectionSpeed</span>()<span class="op">,</span></span>
<span id="cb52-124"><a href="#cb52-124" aria-hidden="true" tabindex="-1"></a>      device_memory<span class="op">:</span> (<span class="bu">navigator</span> <span class="im">as</span> <span class="dt">any</span>)<span class="op">.</span><span class="at">deviceMemory</span> <span class="op">||</span> <span class="st">&#39;unknown&#39;</span><span class="op">,</span></span>
<span id="cb52-125"><a href="#cb52-125" aria-hidden="true" tabindex="-1"></a>      cpu_cores<span class="op">:</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">hardwareConcurrency</span> <span class="op">||</span> <span class="st">&#39;unknown&#39;</span><span class="op">,</span></span>
<span id="cb52-126"><a href="#cb52-126" aria-hidden="true" tabindex="-1"></a>      page_load_time<span class="op">:</span> navigation <span class="op">?</span> navigation<span class="op">.</span><span class="at">loadEventEnd</span> <span class="op">-</span> navigation<span class="op">.</span><span class="at">navigationStart</span> <span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb52-127"><a href="#cb52-127" aria-hidden="true" tabindex="-1"></a>      current_memory_usage<span class="op">:</span> (<span class="bu">performance</span> <span class="im">as</span> <span class="dt">any</span>)<span class="op">.</span><span class="at">memory</span><span class="op">?.</span><span class="at">usedJSHeapSize</span> <span class="op">||</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb52-128"><a href="#cb52-128" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb52-129"><a href="#cb52-129" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-130"><a href="#cb52-130" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-131"><a href="#cb52-131" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">startUserExperienceTracking</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-132"><a href="#cb52-132" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track user frustration signals</span></span>
<span id="cb52-133"><a href="#cb52-133" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackFrustrationSignals</span>()<span class="op">;</span></span>
<span id="cb52-134"><a href="#cb52-134" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-135"><a href="#cb52-135" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track successful task completion</span></span>
<span id="cb52-136"><a href="#cb52-136" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackTaskCompletion</span>()<span class="op">;</span></span>
<span id="cb52-137"><a href="#cb52-137" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-138"><a href="#cb52-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track accessibility usage</span></span>
<span id="cb52-139"><a href="#cb52-139" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">trackAccessibilityUsage</span>()<span class="op">;</span></span>
<span id="cb52-140"><a href="#cb52-140" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-141"><a href="#cb52-141" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-142"><a href="#cb52-142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">trackFrustrationSignals</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-143"><a href="#cb52-143" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> rapidClicks <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-144"><a href="#cb52-144" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> lastClickTime <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-145"><a href="#cb52-145" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-146"><a href="#cb52-146" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb52-147"><a href="#cb52-147" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> now <span class="op">=</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb52-148"><a href="#cb52-148" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb52-149"><a href="#cb52-149" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (now <span class="op">-</span> lastClickTime <span class="op">&lt;</span> <span class="dv">500</span>) {</span>
<span id="cb52-150"><a href="#cb52-150" aria-hidden="true" tabindex="-1"></a>        rapidClicks<span class="op">++;</span></span>
<span id="cb52-151"><a href="#cb52-151" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb52-152"><a href="#cb52-152" aria-hidden="true" tabindex="-1"></a>        rapidClicks <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-153"><a href="#cb52-153" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb52-154"><a href="#cb52-154" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb52-155"><a href="#cb52-155" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (rapidClicks <span class="op">&gt;=</span> <span class="dv">3</span>) {</span>
<span id="cb52-156"><a href="#cb52-156" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">recordEvent</span>(<span class="st">&#39;user_frustration&#39;</span><span class="op">,</span> {</span>
<span id="cb52-157"><a href="#cb52-157" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;rapid_clicks&#39;</span><span class="op">,</span></span>
<span id="cb52-158"><a href="#cb52-158" aria-hidden="true" tabindex="-1"></a>          element<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">target</span><span class="op">?.</span><span class="at">tagName</span><span class="op">,</span></span>
<span id="cb52-159"><a href="#cb52-159" aria-hidden="true" tabindex="-1"></a>          performance_context<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getCurrentPerformanceContext</span>()<span class="op">,</span></span>
<span id="cb52-160"><a href="#cb52-160" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb52-161"><a href="#cb52-161" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb52-162"><a href="#cb52-162" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb52-163"><a href="#cb52-163" aria-hidden="true" tabindex="-1"></a>      lastClickTime <span class="op">=</span> now<span class="op">;</span></span>
<span id="cb52-164"><a href="#cb52-164" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb52-165"><a href="#cb52-165" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-166"><a href="#cb52-166" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track rage clicks</span></span>
<span id="cb52-167"><a href="#cb52-167" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> clickCount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-168"><a href="#cb52-168" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> clickTimer<span class="op">:</span> NodeJS<span class="op">.</span><span class="at">Timeout</span><span class="op">;</span></span>
<span id="cb52-169"><a href="#cb52-169" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-170"><a href="#cb52-170" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb52-171"><a href="#cb52-171" aria-hidden="true" tabindex="-1"></a>      clickCount<span class="op">++;</span></span>
<span id="cb52-172"><a href="#cb52-172" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb52-173"><a href="#cb52-173" aria-hidden="true" tabindex="-1"></a>      <span class="pp">clearTimeout</span>(clickTimer)<span class="op">;</span></span>
<span id="cb52-174"><a href="#cb52-174" aria-hidden="true" tabindex="-1"></a>      clickTimer <span class="op">=</span> <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb52-175"><a href="#cb52-175" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (clickCount <span class="op">&gt;=</span> <span class="dv">5</span>) {</span>
<span id="cb52-176"><a href="#cb52-176" aria-hidden="true" tabindex="-1"></a>          <span class="kw">this</span><span class="op">.</span><span class="fu">recordEvent</span>(<span class="st">&#39;user_frustration&#39;</span><span class="op">,</span> {</span>
<span id="cb52-177"><a href="#cb52-177" aria-hidden="true" tabindex="-1"></a>            type<span class="op">:</span> <span class="st">&#39;rage_clicks&#39;</span><span class="op">,</span></span>
<span id="cb52-178"><a href="#cb52-178" aria-hidden="true" tabindex="-1"></a>            click_count<span class="op">:</span> clickCount<span class="op">,</span></span>
<span id="cb52-179"><a href="#cb52-179" aria-hidden="true" tabindex="-1"></a>            element<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">target</span><span class="op">?.</span><span class="at">tagName</span><span class="op">,</span></span>
<span id="cb52-180"><a href="#cb52-180" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb52-181"><a href="#cb52-181" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb52-182"><a href="#cb52-182" aria-hidden="true" tabindex="-1"></a>        clickCount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-183"><a href="#cb52-183" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb52-184"><a href="#cb52-184" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb52-185"><a href="#cb52-185" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-186"><a href="#cb52-186" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-187"><a href="#cb52-187" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">recordEvent</span>(type<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> data<span class="op">:</span> <span class="dt">any</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-188"><a href="#cb52-188" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> event<span class="op">:</span> PerformanceEvent <span class="op">=</span> {</span>
<span id="cb52-189"><a href="#cb52-189" aria-hidden="true" tabindex="-1"></a>      <span class="kw">type</span><span class="op">,</span></span>
<span id="cb52-190"><a href="#cb52-190" aria-hidden="true" tabindex="-1"></a>      data<span class="op">,</span></span>
<span id="cb52-191"><a href="#cb52-191" aria-hidden="true" tabindex="-1"></a>      timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb52-192"><a href="#cb52-192" aria-hidden="true" tabindex="-1"></a>      url<span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">href</span><span class="op">,</span></span>
<span id="cb52-193"><a href="#cb52-193" aria-hidden="true" tabindex="-1"></a>      user_id<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getUserId</span>()<span class="op">,</span></span>
<span id="cb52-194"><a href="#cb52-194" aria-hidden="true" tabindex="-1"></a>      session_id<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getSessionId</span>()<span class="op">,</span></span>
<span id="cb52-195"><a href="#cb52-195" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb52-196"><a href="#cb52-196" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-197"><a href="#cb52-197" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">eventBuffer</span><span class="op">.</span><span class="fu">push</span>(<span class="bu">event</span>)<span class="op">;</span></span>
<span id="cb52-198"><a href="#cb52-198" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-199"><a href="#cb52-199" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">eventBuffer</span><span class="op">.</span><span class="at">length</span> <span class="op">&gt;=</span> <span class="kw">this</span><span class="op">.</span><span class="at">BUFFER_SIZE</span>) {</span>
<span id="cb52-200"><a href="#cb52-200" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">flushEvents</span>()<span class="op">;</span></span>
<span id="cb52-201"><a href="#cb52-201" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb52-202"><a href="#cb52-202" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-203"><a href="#cb52-203" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-204"><a href="#cb52-204" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">flushEvents</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb52-205"><a href="#cb52-205" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">eventBuffer</span><span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb52-206"><a href="#cb52-206" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-207"><a href="#cb52-207" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> events <span class="op">=</span> [<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="at">eventBuffer</span>]<span class="op">;</span></span>
<span id="cb52-208"><a href="#cb52-208" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">eventBuffer</span> <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb52-209"><a href="#cb52-209" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-210"><a href="#cb52-210" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send to analytics service</span></span>
<span id="cb52-211"><a href="#cb52-211" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fetch</span>(<span class="st">&#39;/api/analytics/performance&#39;</span><span class="op">,</span> {</span>
<span id="cb52-212"><a href="#cb52-212" aria-hidden="true" tabindex="-1"></a>      method<span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb52-213"><a href="#cb52-213" aria-hidden="true" tabindex="-1"></a>      headers<span class="op">:</span> { <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span> }<span class="op">,</span></span>
<span id="cb52-214"><a href="#cb52-214" aria-hidden="true" tabindex="-1"></a>      body<span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ events })<span class="op">,</span></span>
<span id="cb52-215"><a href="#cb52-215" aria-hidden="true" tabindex="-1"></a>    })<span class="op">.</span><span class="fu">catch</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb52-216"><a href="#cb52-216" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Silently handle failures to avoid affecting user experience</span></span>
<span id="cb52-217"><a href="#cb52-217" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb52-218"><a href="#cb52-218" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-219"><a href="#cb52-219" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="advanced-performance-optimization-techniques">Advanced
Performance Optimization Techniques</h2>
<h3 id="intelligent-resource-loading">Intelligent Resource Loading</h3>
<div class="sourceCode" id="cb53"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Smart preloading based on user behavior</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> IntelligentPreloader {</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> preloadQueue<span class="op">:</span> PreloadTask[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> userBehaviorPattern<span class="op">:</span> UserBehaviorPattern<span class="op">;</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> networkCondition<span class="op">:</span> NetworkCondition<span class="op">;</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">userBehaviorPattern</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">UserBehaviorAnalyzer</span>()<span class="op">;</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">networkCondition</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">NetworkConditionDetector</span>()<span class="op">;</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">startIntelligentPreloading</span>()<span class="op">;</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">startIntelligentPreloading</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Preload based on user behavior patterns</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">preloadBasedOnBehavior</span>()<span class="op">;</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Preload based on intersection observer</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">preloadOnViewportApproach</span>()<span class="op">;</span></span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Preload based on hover/focus intent</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">preloadOnUserIntent</span>()<span class="op">;</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">preloadBasedOnBehavior</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> predictedRoutes <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">userBehaviorPattern</span><span class="op">.</span><span class="fu">predictNextRoutes</span>()<span class="op">;</span></span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>    predictedRoutes<span class="op">.</span><span class="fu">forEach</span>(route <span class="kw">=&gt;</span> {</span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (route<span class="op">.</span><span class="at">probability</span> <span class="op">&gt;</span> <span class="fl">0.7</span> <span class="op">&amp;&amp;</span> <span class="kw">this</span><span class="op">.</span><span class="at">networkCondition</span><span class="op">.</span><span class="fu">isFast</span>()) {</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">preloadRoute</span>(route<span class="op">.</span><span class="at">path</span><span class="op">,</span> <span class="st">&#39;high&#39;</span>)<span class="op">;</span></span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (route<span class="op">.</span><span class="at">probability</span> <span class="op">&gt;</span> <span class="fl">0.4</span> <span class="op">&amp;&amp;</span> <span class="kw">this</span><span class="op">.</span><span class="at">networkCondition</span><span class="op">.</span><span class="fu">isModerate</span>()) {</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">preloadRoute</span>(route<span class="op">.</span><span class="at">path</span><span class="op">,</span> <span class="st">&#39;low&#39;</span>)<span class="op">;</span></span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb53-34"><a href="#cb53-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-35"><a href="#cb53-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-36"><a href="#cb53-36" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">preloadOnViewportApproach</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb53-37"><a href="#cb53-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(</span>
<span id="cb53-38"><a href="#cb53-38" aria-hidden="true" tabindex="-1"></a>      (entries) <span class="kw">=&gt;</span> {</span>
<span id="cb53-39"><a href="#cb53-39" aria-hidden="true" tabindex="-1"></a>        entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb53-40"><a href="#cb53-40" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (entry<span class="op">.</span><span class="at">isIntersecting</span>) {</span>
<span id="cb53-41"><a href="#cb53-41" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> preloadHref <span class="op">=</span> entry<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="fu">getAttribute</span>(<span class="st">&#39;data-preload&#39;</span>)<span class="op">;</span></span>
<span id="cb53-42"><a href="#cb53-42" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (preloadHref) {</span>
<span id="cb53-43"><a href="#cb53-43" aria-hidden="true" tabindex="-1"></a>              <span class="kw">this</span><span class="op">.</span><span class="fu">preloadRoute</span>(preloadHref<span class="op">,</span> <span class="st">&#39;medium&#39;</span>)<span class="op">;</span></span>
<span id="cb53-44"><a href="#cb53-44" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb53-45"><a href="#cb53-45" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb53-46"><a href="#cb53-46" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb53-47"><a href="#cb53-47" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb53-48"><a href="#cb53-48" aria-hidden="true" tabindex="-1"></a>      { rootMargin<span class="op">:</span> <span class="st">&#39;50px&#39;</span> }</span>
<span id="cb53-49"><a href="#cb53-49" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb53-50"><a href="#cb53-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-51"><a href="#cb53-51" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;[data-preload]&#39;</span>)<span class="op">.</span><span class="fu">forEach</span>(element <span class="kw">=&gt;</span> {</span>
<span id="cb53-52"><a href="#cb53-52" aria-hidden="true" tabindex="-1"></a>      observer<span class="op">.</span><span class="fu">observe</span>(element)<span class="op">;</span></span>
<span id="cb53-53"><a href="#cb53-53" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb53-54"><a href="#cb53-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-55"><a href="#cb53-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-56"><a href="#cb53-56" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">preloadOnUserIntent</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb53-57"><a href="#cb53-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> hoverTimer<span class="op">:</span> NodeJS<span class="op">.</span><span class="at">Timeout</span><span class="op">;</span></span>
<span id="cb53-58"><a href="#cb53-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-59"><a href="#cb53-59" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;mouseover&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb53-60"><a href="#cb53-60" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> link <span class="op">=</span> (<span class="bu">event</span><span class="op">.</span><span class="at">target</span> <span class="im">as</span> <span class="bu">Element</span>)<span class="op">.</span><span class="fu">closest</span>(<span class="st">&#39;a[href]&#39;</span>) <span class="im">as</span> <span class="bu">HTMLAnchorElement</span><span class="op">;</span></span>
<span id="cb53-61"><a href="#cb53-61" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb53-62"><a href="#cb53-62" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (link <span class="op">&amp;&amp;</span> link<span class="op">.</span><span class="at">hostname</span> <span class="op">===</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">hostname</span>) {</span>
<span id="cb53-63"><a href="#cb53-63" aria-hidden="true" tabindex="-1"></a>        hoverTimer <span class="op">=</span> <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb53-64"><a href="#cb53-64" aria-hidden="true" tabindex="-1"></a>          <span class="kw">this</span><span class="op">.</span><span class="fu">preloadRoute</span>(link<span class="op">.</span><span class="at">href</span><span class="op">,</span> <span class="st">&#39;high&#39;</span>)<span class="op">;</span></span>
<span id="cb53-65"><a href="#cb53-65" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span> <span class="dv">65</span>)<span class="op">;</span> <span class="co">// Average time for intentional hover</span></span>
<span id="cb53-66"><a href="#cb53-66" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb53-67"><a href="#cb53-67" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb53-68"><a href="#cb53-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-69"><a href="#cb53-69" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;mouseout&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb53-70"><a href="#cb53-70" aria-hidden="true" tabindex="-1"></a>      <span class="pp">clearTimeout</span>(hoverTimer)<span class="op">;</span></span>
<span id="cb53-71"><a href="#cb53-71" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb53-72"><a href="#cb53-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-73"><a href="#cb53-73" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Preload on focus for keyboard users</span></span>
<span id="cb53-74"><a href="#cb53-74" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;focusin&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb53-75"><a href="#cb53-75" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> link <span class="op">=</span> <span class="bu">event</span><span class="op">.</span><span class="at">target</span> <span class="im">as</span> <span class="bu">HTMLAnchorElement</span><span class="op">;</span></span>
<span id="cb53-76"><a href="#cb53-76" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb53-77"><a href="#cb53-77" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (link<span class="op">.</span><span class="at">tagName</span> <span class="op">===</span> <span class="st">&#39;A&#39;</span> <span class="op">&amp;&amp;</span> link<span class="op">.</span><span class="at">hostname</span> <span class="op">===</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">hostname</span>) {</span>
<span id="cb53-78"><a href="#cb53-78" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">preloadRoute</span>(link<span class="op">.</span><span class="at">href</span><span class="op">,</span> <span class="st">&#39;medium&#39;</span>)<span class="op">;</span></span>
<span id="cb53-79"><a href="#cb53-79" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb53-80"><a href="#cb53-80" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb53-81"><a href="#cb53-81" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-82"><a href="#cb53-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-83"><a href="#cb53-83" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">preloadRoute</span>(path<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> priority<span class="op">:</span> <span class="st">&#39;low&#39;</span> <span class="op">|</span> <span class="st">&#39;medium&#39;</span> <span class="op">|</span> <span class="st">&#39;high&#39;</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb53-84"><a href="#cb53-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="fu">isAlreadyPreloaded</span>(path)) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb53-85"><a href="#cb53-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-86"><a href="#cb53-86" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> task<span class="op">:</span> PreloadTask <span class="op">=</span> {</span>
<span id="cb53-87"><a href="#cb53-87" aria-hidden="true" tabindex="-1"></a>      path<span class="op">,</span></span>
<span id="cb53-88"><a href="#cb53-88" aria-hidden="true" tabindex="-1"></a>      priority<span class="op">,</span></span>
<span id="cb53-89"><a href="#cb53-89" aria-hidden="true" tabindex="-1"></a>      timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb53-90"><a href="#cb53-90" aria-hidden="true" tabindex="-1"></a>      networkCondition<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">networkCondition</span><span class="op">.</span><span class="fu">getCurrentCondition</span>()<span class="op">,</span></span>
<span id="cb53-91"><a href="#cb53-91" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb53-92"><a href="#cb53-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-93"><a href="#cb53-93" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">preloadQueue</span><span class="op">.</span><span class="fu">push</span>(task)<span class="op">;</span></span>
<span id="cb53-94"><a href="#cb53-94" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">processPreloadQueue</span>()<span class="op">;</span></span>
<span id="cb53-95"><a href="#cb53-95" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-96"><a href="#cb53-96" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-97"><a href="#cb53-97" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">processPreloadQueue</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb53-98"><a href="#cb53-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sort by priority and network conditions</span></span>
<span id="cb53-99"><a href="#cb53-99" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">preloadQueue</span><span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> {</span>
<span id="cb53-100"><a href="#cb53-100" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> priorityOrder <span class="op">=</span> { high<span class="op">:</span> <span class="dv">3</span><span class="op">,</span> medium<span class="op">:</span> <span class="dv">2</span><span class="op">,</span> low<span class="op">:</span> <span class="dv">1</span> }<span class="op">;</span></span>
<span id="cb53-101"><a href="#cb53-101" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> priorityOrder[b<span class="op">.</span><span class="at">priority</span>] <span class="op">-</span> priorityOrder[a<span class="op">.</span><span class="at">priority</span>]<span class="op">;</span></span>
<span id="cb53-102"><a href="#cb53-102" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb53-103"><a href="#cb53-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-104"><a href="#cb53-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Process queue based on network conditions</span></span>
<span id="cb53-105"><a href="#cb53-105" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> maxConcurrent <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">networkCondition</span><span class="op">.</span><span class="fu">isFast</span>() <span class="op">?</span> <span class="dv">3</span> <span class="op">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb53-106"><a href="#cb53-106" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> tasksToProcess <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">preloadQueue</span><span class="op">.</span><span class="fu">splice</span>(<span class="dv">0</span><span class="op">,</span> maxConcurrent)<span class="op">;</span></span>
<span id="cb53-107"><a href="#cb53-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-108"><a href="#cb53-108" aria-hidden="true" tabindex="-1"></a>    tasksToProcess<span class="op">.</span><span class="fu">forEach</span>(task <span class="kw">=&gt;</span> {</span>
<span id="cb53-109"><a href="#cb53-109" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">executePreload</span>(task)<span class="op">;</span></span>
<span id="cb53-110"><a href="#cb53-110" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb53-111"><a href="#cb53-111" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-112"><a href="#cb53-112" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-113"><a href="#cb53-113" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">executePreload</span>(task<span class="op">:</span> PreloadTask)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb53-114"><a href="#cb53-114" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create preload link</span></span>
<span id="cb53-115"><a href="#cb53-115" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> link <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&#39;link&#39;</span>)<span class="op">;</span></span>
<span id="cb53-116"><a href="#cb53-116" aria-hidden="true" tabindex="-1"></a>    link<span class="op">.</span><span class="at">rel</span> <span class="op">=</span> <span class="st">&#39;prefetch&#39;</span><span class="op">;</span></span>
<span id="cb53-117"><a href="#cb53-117" aria-hidden="true" tabindex="-1"></a>    link<span class="op">.</span><span class="at">href</span> <span class="op">=</span> task<span class="op">.</span><span class="at">path</span><span class="op">;</span></span>
<span id="cb53-118"><a href="#cb53-118" aria-hidden="true" tabindex="-1"></a>    link<span class="op">.</span><span class="at">as</span> <span class="op">=</span> <span class="st">&#39;document&#39;</span><span class="op">;</span></span>
<span id="cb53-119"><a href="#cb53-119" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-120"><a href="#cb53-120" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add to head</span></span>
<span id="cb53-121"><a href="#cb53-121" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="at">head</span><span class="op">.</span><span class="fu">appendChild</span>(link)<span class="op">;</span></span>
<span id="cb53-122"><a href="#cb53-122" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-123"><a href="#cb53-123" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track preload success</span></span>
<span id="cb53-124"><a href="#cb53-124" aria-hidden="true" tabindex="-1"></a>    link<span class="op">.</span><span class="at">onload</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb53-125"><a href="#cb53-125" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">trackPreloadSuccess</span>(task)<span class="op">;</span></span>
<span id="cb53-126"><a href="#cb53-126" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb53-127"><a href="#cb53-127" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-128"><a href="#cb53-128" aria-hidden="true" tabindex="-1"></a>    link<span class="op">.</span><span class="at">onerror</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb53-129"><a href="#cb53-129" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">trackPreloadError</span>(task)<span class="op">;</span></span>
<span id="cb53-130"><a href="#cb53-130" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb53-131"><a href="#cb53-131" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-132"><a href="#cb53-132" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="performance-budget-framework">Performance Budget Framework</h3>
<div class="sourceCode" id="cb54"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Comprehensive performance budget management</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> PerformanceBudgetManager {</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> budgets<span class="op">:</span> PerformanceBudgetConfig<span class="op">;</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> violations<span class="op">:</span> BudgetViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(budgets<span class="op">:</span> PerformanceBudgetConfig) {</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">budgets</span> <span class="op">=</span> budgets<span class="op">;</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">initializeBudgetMonitoring</span>()<span class="op">;</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">validateMetric</span>(metric<span class="op">:</span> PerformanceMetric)<span class="op">:</span> BudgetValidationResult {</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> budget <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getBudgetForMetric</span>(metric<span class="op">.</span><span class="at">name</span>)<span class="op">;</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>budget) {</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> { passed<span class="op">:</span> <span class="kw">true</span><span class="op">,</span> message<span class="op">:</span> <span class="st">&#39;No budget defined&#39;</span> }<span class="op">;</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> passed <span class="op">=</span> metric<span class="op">.</span><span class="at">value</span> <span class="op">&lt;=</span> budget<span class="op">.</span><span class="at">threshold</span><span class="op">;</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>passed) {</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> violation<span class="op">:</span> BudgetViolation <span class="op">=</span> {</span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>        metric<span class="op">:</span> metric<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>        value<span class="op">:</span> metric<span class="op">.</span><span class="at">value</span><span class="op">,</span></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>        threshold<span class="op">:</span> budget<span class="op">.</span><span class="at">threshold</span><span class="op">,</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>        overage<span class="op">:</span> metric<span class="op">.</span><span class="at">value</span> <span class="op">-</span> budget<span class="op">.</span><span class="at">threshold</span><span class="op">,</span></span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>        severity<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateSeverity</span>(metric<span class="op">.</span><span class="at">value</span><span class="op">,</span> budget<span class="op">.</span><span class="at">threshold</span>)<span class="op">,</span></span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>        timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>        context<span class="op">:</span> metric<span class="op">.</span><span class="at">context</span><span class="op">,</span></span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">push</span>(violation)<span class="op">;</span></span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">handleBudgetViolation</span>(violation)<span class="op">;</span></span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>      passed<span class="op">,</span></span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>      message<span class="op">:</span> passed </span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="st">&#39;Within budget&#39;</span> </span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="vs">`Exceeded budget by </span><span class="sc">${</span>metric<span class="op">.</span><span class="at">value</span> <span class="op">-</span> budget<span class="op">.</span><span class="at">threshold</span><span class="sc">}${</span>budget<span class="op">.</span><span class="at">unit</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a>      violation<span class="op">:</span> passed <span class="op">?</span> <span class="dt">undefined</span> <span class="op">:</span> violation<span class="op">,</span></span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">handleBudgetViolation</span>(violation<span class="op">:</span> BudgetViolation)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Log violation</span></span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">warn</span>(<span class="vs">`Performance budget violation:`</span><span class="op">,</span> violation)<span class="op">;</span></span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-48"><a href="#cb54-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send to monitoring</span></span>
<span id="cb54-49"><a href="#cb54-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">sendViolationAlert</span>(violation)<span class="op">;</span></span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Take corrective action based on severity</span></span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (violation<span class="op">.</span><span class="at">severity</span>) {</span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;critical&#39;</span><span class="op">:</span></span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">handleCriticalViolation</span>(violation)<span class="op">;</span></span>
<span id="cb54-55"><a href="#cb54-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb54-56"><a href="#cb54-56" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;high&#39;</span><span class="op">:</span></span>
<span id="cb54-57"><a href="#cb54-57" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">handleHighViolation</span>(violation)<span class="op">;</span></span>
<span id="cb54-58"><a href="#cb54-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb54-59"><a href="#cb54-59" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;medium&#39;</span><span class="op">:</span></span>
<span id="cb54-60"><a href="#cb54-60" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">handleMediumViolation</span>(violation)<span class="op">;</span></span>
<span id="cb54-61"><a href="#cb54-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb54-62"><a href="#cb54-62" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb54-63"><a href="#cb54-63" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-64"><a href="#cb54-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-65"><a href="#cb54-65" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">handleCriticalViolation</span>(violation<span class="op">:</span> BudgetViolation)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb54-66"><a href="#cb54-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">// For critical violations, implement immediate mitigations</span></span>
<span id="cb54-67"><a href="#cb54-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (violation<span class="op">.</span><span class="at">metric</span> <span class="op">===</span> <span class="st">&#39;bundle_size&#39;</span>) {</span>
<span id="cb54-68"><a href="#cb54-68" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Enable aggressive code splitting</span></span>
<span id="cb54-69"><a href="#cb54-69" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">enableAggressiveCodeSplitting</span>()<span class="op">;</span></span>
<span id="cb54-70"><a href="#cb54-70" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (violation<span class="op">.</span><span class="at">metric</span> <span class="op">===</span> <span class="st">&#39;lcp&#39;</span>) {</span>
<span id="cb54-71"><a href="#cb54-71" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Optimize critical rendering path</span></span>
<span id="cb54-72"><a href="#cb54-72" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">optimizeCriticalRenderingPath</span>()<span class="op">;</span></span>
<span id="cb54-73"><a href="#cb54-73" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb54-74"><a href="#cb54-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-75"><a href="#cb54-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-76"><a href="#cb54-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateBudgetReport</span>()<span class="op">:</span> PerformanceBudgetReport {</span>
<span id="cb54-77"><a href="#cb54-77" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> now <span class="op">=</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb54-78"><a href="#cb54-78" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> last24Hours <span class="op">=</span> now <span class="op">-</span> <span class="dv">24</span> <span class="op">*</span> <span class="dv">60</span> <span class="op">*</span> <span class="dv">60</span> <span class="op">*</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb54-79"><a href="#cb54-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-80"><a href="#cb54-80" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> recentViolations <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb54-81"><a href="#cb54-81" aria-hidden="true" tabindex="-1"></a>      v <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">timestamp</span> <span class="op">&gt;</span> last24Hours</span>
<span id="cb54-82"><a href="#cb54-82" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb54-83"><a href="#cb54-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-84"><a href="#cb54-84" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violationsByMetric <span class="op">=</span> recentViolations<span class="op">.</span><span class="fu">reduce</span>((acc<span class="op">,</span> violation) <span class="kw">=&gt;</span> {</span>
<span id="cb54-85"><a href="#cb54-85" aria-hidden="true" tabindex="-1"></a>      acc[violation<span class="op">.</span><span class="at">metric</span>] <span class="op">=</span> (acc[violation<span class="op">.</span><span class="at">metric</span>] <span class="op">||</span> <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb54-86"><a href="#cb54-86" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> acc<span class="op">;</span></span>
<span id="cb54-87"><a href="#cb54-87" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> {} <span class="im">as</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">number</span><span class="op">&gt;</span>)<span class="op">;</span></span>
<span id="cb54-88"><a href="#cb54-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-89"><a href="#cb54-89" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> severityDistribution <span class="op">=</span> recentViolations<span class="op">.</span><span class="fu">reduce</span>((acc<span class="op">,</span> violation) <span class="kw">=&gt;</span> {</span>
<span id="cb54-90"><a href="#cb54-90" aria-hidden="true" tabindex="-1"></a>      acc[violation<span class="op">.</span><span class="at">severity</span>] <span class="op">=</span> (acc[violation<span class="op">.</span><span class="at">severity</span>] <span class="op">||</span> <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb54-91"><a href="#cb54-91" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> acc<span class="op">;</span></span>
<span id="cb54-92"><a href="#cb54-92" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> {} <span class="im">as</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">number</span><span class="op">&gt;</span>)<span class="op">;</span></span>
<span id="cb54-93"><a href="#cb54-93" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-94"><a href="#cb54-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb54-95"><a href="#cb54-95" aria-hidden="true" tabindex="-1"></a>      period<span class="op">:</span> <span class="st">&#39;24 hours&#39;</span><span class="op">,</span></span>
<span id="cb54-96"><a href="#cb54-96" aria-hidden="true" tabindex="-1"></a>      totalViolations<span class="op">:</span> recentViolations<span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb54-97"><a href="#cb54-97" aria-hidden="true" tabindex="-1"></a>      violationsByMetric<span class="op">,</span></span>
<span id="cb54-98"><a href="#cb54-98" aria-hidden="true" tabindex="-1"></a>      severityDistribution<span class="op">,</span></span>
<span id="cb54-99"><a href="#cb54-99" aria-hidden="true" tabindex="-1"></a>      budgetHealth<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateBudgetHealth</span>()<span class="op">,</span></span>
<span id="cb54-100"><a href="#cb54-100" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateRecommendations</span>()<span class="op">,</span></span>
<span id="cb54-101"><a href="#cb54-101" aria-hidden="true" tabindex="-1"></a>      timestamp<span class="op">:</span> now<span class="op">,</span></span>
<span id="cb54-102"><a href="#cb54-102" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb54-103"><a href="#cb54-103" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-104"><a href="#cb54-104" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-105"><a href="#cb54-105" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">calculateBudgetHealth</span>()<span class="op">:</span> <span class="dt">number</span> {</span>
<span id="cb54-106"><a href="#cb54-106" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> totalMetrics <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(<span class="kw">this</span><span class="op">.</span><span class="at">budgets</span><span class="op">.</span><span class="at">metrics</span>)<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb54-107"><a href="#cb54-107" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violatedMetrics <span class="op">=</span> <span class="kw">new</span> <span class="bu">Set</span>(<span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">map</span>(v <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">metric</span>))<span class="op">.</span><span class="at">size</span><span class="op">;</span></span>
<span id="cb54-108"><a href="#cb54-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-109"><a href="#cb54-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((totalMetrics <span class="op">-</span> violatedMetrics) <span class="op">/</span> totalMetrics <span class="op">*</span> <span class="dv">100</span>))<span class="op">;</span></span>
<span id="cb54-110"><a href="#cb54-110" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-111"><a href="#cb54-111" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-112"><a href="#cb54-112" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateRecommendations</span>()<span class="op">:</span> BudgetRecommendation[] {</span>
<span id="cb54-113"><a href="#cb54-113" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> recommendations<span class="op">:</span> BudgetRecommendation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb54-114"><a href="#cb54-114" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-115"><a href="#cb54-115" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Analyze violation patterns</span></span>
<span id="cb54-116"><a href="#cb54-116" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> frequentViolations <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getFrequentViolations</span>()<span class="op">;</span></span>
<span id="cb54-117"><a href="#cb54-117" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-118"><a href="#cb54-118" aria-hidden="true" tabindex="-1"></a>    frequentViolations<span class="op">.</span><span class="fu">forEach</span>(metric <span class="kw">=&gt;</span> {</span>
<span id="cb54-119"><a href="#cb54-119" aria-hidden="true" tabindex="-1"></a>      <span class="cf">switch</span> (metric) {</span>
<span id="cb54-120"><a href="#cb54-120" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">&#39;lcp&#39;</span><span class="op">:</span></span>
<span id="cb54-121"><a href="#cb54-121" aria-hidden="true" tabindex="-1"></a>          recommendations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb54-122"><a href="#cb54-122" aria-hidden="true" tabindex="-1"></a>            metric<span class="op">,</span></span>
<span id="cb54-123"><a href="#cb54-123" aria-hidden="true" tabindex="-1"></a>            priority<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb54-124"><a href="#cb54-124" aria-hidden="true" tabindex="-1"></a>            action<span class="op">:</span> <span class="st">&#39;Optimize images and implement resource preloading&#39;</span><span class="op">,</span></span>
<span id="cb54-125"><a href="#cb54-125" aria-hidden="true" tabindex="-1"></a>            expectedImpact<span class="op">:</span> <span class="st">&#39;Reduce LCP by 20-30%&#39;</span><span class="op">,</span></span>
<span id="cb54-126"><a href="#cb54-126" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb54-127"><a href="#cb54-127" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span><span class="op">;</span></span>
<span id="cb54-128"><a href="#cb54-128" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb54-129"><a href="#cb54-129" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">&#39;bundle_size&#39;</span><span class="op">:</span></span>
<span id="cb54-130"><a href="#cb54-130" aria-hidden="true" tabindex="-1"></a>          recommendations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb54-131"><a href="#cb54-131" aria-hidden="true" tabindex="-1"></a>            metric<span class="op">,</span></span>
<span id="cb54-132"><a href="#cb54-132" aria-hidden="true" tabindex="-1"></a>            priority<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb54-133"><a href="#cb54-133" aria-hidden="true" tabindex="-1"></a>            action<span class="op">:</span> <span class="st">&#39;Implement code splitting and tree shaking&#39;</span><span class="op">,</span></span>
<span id="cb54-134"><a href="#cb54-134" aria-hidden="true" tabindex="-1"></a>            expectedImpact<span class="op">:</span> <span class="st">&#39;Reduce bundle size by 15-25%&#39;</span><span class="op">,</span></span>
<span id="cb54-135"><a href="#cb54-135" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb54-136"><a href="#cb54-136" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span><span class="op">;</span></span>
<span id="cb54-137"><a href="#cb54-137" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb54-138"><a href="#cb54-138" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">&#39;cls&#39;</span><span class="op">:</span></span>
<span id="cb54-139"><a href="#cb54-139" aria-hidden="true" tabindex="-1"></a>          recommendations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb54-140"><a href="#cb54-140" aria-hidden="true" tabindex="-1"></a>            metric<span class="op">,</span></span>
<span id="cb54-141"><a href="#cb54-141" aria-hidden="true" tabindex="-1"></a>            priority<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb54-142"><a href="#cb54-142" aria-hidden="true" tabindex="-1"></a>            action<span class="op">:</span> <span class="st">&#39;Add size attributes to images and reserve space for dynamic content&#39;</span><span class="op">,</span></span>
<span id="cb54-143"><a href="#cb54-143" aria-hidden="true" tabindex="-1"></a>            expectedImpact<span class="op">:</span> <span class="st">&#39;Eliminate layout shifts&#39;</span><span class="op">,</span></span>
<span id="cb54-144"><a href="#cb54-144" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb54-145"><a href="#cb54-145" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span><span class="op">;</span></span>
<span id="cb54-146"><a href="#cb54-146" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb54-147"><a href="#cb54-147" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb54-148"><a href="#cb54-148" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-149"><a href="#cb54-149" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> recommendations<span class="op">;</span></span>
<span id="cb54-150"><a href="#cb54-150" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-151"><a href="#cb54-151" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="chapter-7-security-accessibility-excellence">Chapter 7: Security
&amp; Accessibility Excellence 🔴</h1>
<p><em>Pages 59-71</em></p>
<h2 id="zero-trust-frontend-security">Zero-Trust Frontend Security</h2>
<p>Modern frontend applications are the first line of defense against
security threats. A zero-trust approach assumes that all data, users,
and devices are potentially compromised and implements defense in
depth.</p>
<h3 id="key-insight-security-as-a-continuous-process">💡 Key Insight:
Security as a Continuous Process</h3>
<p>Security isn’t a checklist item—it’s an ongoing practice that must
be: - <strong>Built into the development process</strong> from day one -
<strong>Monitored continuously</strong> in production - <strong>Updated
regularly</strong> as threats evolve - <strong>Tested
systematically</strong> with real attack scenarios</p>
<h2 id="modern-authentication-patterns">Modern Authentication
Patterns</h2>
<h3 id="webauthn-and-passwordless-authentication">WebAuthn and
Passwordless Authentication</h3>
<div class="sourceCode" id="cb55"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Advanced WebAuthn implementation</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> WebAuthnService {</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">readonly</span> rpId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">readonly</span> rpName<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(config<span class="op">:</span> WebAuthnConfig) {</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">rpId</span> <span class="op">=</span> config<span class="op">.</span><span class="at">rpId</span><span class="op">;</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">rpName</span> <span class="op">=</span> config<span class="op">.</span><span class="at">rpName</span><span class="op">;</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">registerCredential</span>(userId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> username<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>RegistrationResult<span class="op">&gt;</span> {</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Get registration options from server</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> optionsResponse <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">&#39;/api/auth/webauthn/registration/begin&#39;</span><span class="op">,</span> {</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>        method<span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">:</span> { <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span> }<span class="op">,</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>        body<span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ userId<span class="op">,</span> username })<span class="op">,</span></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>optionsResponse<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Failed to get registration options&#39;</span>)<span class="op">;</span></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> options<span class="op">:</span> PublicKeyCredentialCreationOptions <span class="op">=</span> <span class="cf">await</span> optionsResponse<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Create credential</span></span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> credential <span class="op">=</span> <span class="cf">await</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">credentials</span><span class="op">.</span><span class="fu">create</span>({</span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>        publicKey<span class="op">:</span> {</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a>          <span class="op">...</span>options<span class="op">,</span></span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>          challenge<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">base64ToArrayBuffer</span>(options<span class="op">.</span><span class="at">challenge</span> <span class="im">as</span> <span class="dt">string</span>)<span class="op">,</span></span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>          user<span class="op">:</span> {</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>options<span class="op">.</span><span class="at">user</span><span class="op">,</span></span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>            id<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">stringToArrayBuffer</span>(options<span class="op">.</span><span class="at">user</span><span class="op">.</span><span class="at">id</span> <span class="im">as</span> <span class="dt">string</span>)<span class="op">,</span></span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>          excludeCredentials<span class="op">:</span> options<span class="op">.</span><span class="at">excludeCredentials</span><span class="op">?.</span><span class="fu">map</span>(cred <span class="kw">=&gt;</span> ({</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>cred<span class="op">,</span></span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>            id<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">base64ToArrayBuffer</span>(cred<span class="op">.</span><span class="at">id</span> <span class="im">as</span> <span class="dt">string</span>)<span class="op">,</span></span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a>          }))<span class="op">,</span></span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>      }) <span class="im">as</span> PublicKeyCredential<span class="op">;</span></span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>credential) {</span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Failed to create credential&#39;</span>)<span class="op">;</span></span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Prepare credential for server</span></span>
<span id="cb55-47"><a href="#cb55-47" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> credentialData <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">prepareCredentialForServer</span>(credential)<span class="op">;</span></span>
<span id="cb55-48"><a href="#cb55-48" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-49"><a href="#cb55-49" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Complete registration on server</span></span>
<span id="cb55-50"><a href="#cb55-50" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> registrationResponse <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">&#39;/api/auth/webauthn/registration/complete&#39;</span><span class="op">,</span> {</span>
<span id="cb55-51"><a href="#cb55-51" aria-hidden="true" tabindex="-1"></a>        method<span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb55-52"><a href="#cb55-52" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">:</span> { <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span> }<span class="op">,</span></span>
<span id="cb55-53"><a href="#cb55-53" aria-hidden="true" tabindex="-1"></a>        body<span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(credentialData)<span class="op">,</span></span>
<span id="cb55-54"><a href="#cb55-54" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb55-55"><a href="#cb55-55" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-56"><a href="#cb55-56" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>registrationResponse<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb55-57"><a href="#cb55-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Failed to complete registration&#39;</span>)<span class="op">;</span></span>
<span id="cb55-58"><a href="#cb55-58" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb55-59"><a href="#cb55-59" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-60"><a href="#cb55-60" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb55-61"><a href="#cb55-61" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb55-62"><a href="#cb55-62" aria-hidden="true" tabindex="-1"></a>        credentialId<span class="op">:</span> credentialData<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb55-63"><a href="#cb55-63" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb55-64"><a href="#cb55-64" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-65"><a href="#cb55-65" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (error) {</span>
<span id="cb55-66"><a href="#cb55-66" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;WebAuthn registration failed:&#39;</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb55-67"><a href="#cb55-67" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-68"><a href="#cb55-68" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb55-69"><a href="#cb55-69" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb55-70"><a href="#cb55-70" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> error <span class="kw">instanceof</span> <span class="bu">Error</span> <span class="op">?</span> error<span class="op">.</span><span class="at">message</span> <span class="op">:</span> <span class="st">&#39;Registration failed&#39;</span><span class="op">,</span></span>
<span id="cb55-71"><a href="#cb55-71" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb55-72"><a href="#cb55-72" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb55-73"><a href="#cb55-73" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-74"><a href="#cb55-74" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-75"><a href="#cb55-75" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">authenticateWithCredential</span>()<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>AuthenticationResult<span class="op">&gt;</span> {</span>
<span id="cb55-76"><a href="#cb55-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb55-77"><a href="#cb55-77" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Get authentication options from server</span></span>
<span id="cb55-78"><a href="#cb55-78" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> optionsResponse <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">&#39;/api/auth/webauthn/authentication/begin&#39;</span><span class="op">,</span> {</span>
<span id="cb55-79"><a href="#cb55-79" aria-hidden="true" tabindex="-1"></a>        method<span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb55-80"><a href="#cb55-80" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">:</span> { <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span> }<span class="op">,</span></span>
<span id="cb55-81"><a href="#cb55-81" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb55-82"><a href="#cb55-82" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-83"><a href="#cb55-83" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>optionsResponse<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb55-84"><a href="#cb55-84" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Failed to get authentication options&#39;</span>)<span class="op">;</span></span>
<span id="cb55-85"><a href="#cb55-85" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb55-86"><a href="#cb55-86" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-87"><a href="#cb55-87" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> options<span class="op">:</span> PublicKeyCredentialRequestOptions <span class="op">=</span> <span class="cf">await</span> optionsResponse<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb55-88"><a href="#cb55-88" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-89"><a href="#cb55-89" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Get credential</span></span>
<span id="cb55-90"><a href="#cb55-90" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> credential <span class="op">=</span> <span class="cf">await</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">credentials</span><span class="op">.</span><span class="fu">get</span>({</span>
<span id="cb55-91"><a href="#cb55-91" aria-hidden="true" tabindex="-1"></a>        publicKey<span class="op">:</span> {</span>
<span id="cb55-92"><a href="#cb55-92" aria-hidden="true" tabindex="-1"></a>          <span class="op">...</span>options<span class="op">,</span></span>
<span id="cb55-93"><a href="#cb55-93" aria-hidden="true" tabindex="-1"></a>          challenge<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">base64ToArrayBuffer</span>(options<span class="op">.</span><span class="at">challenge</span> <span class="im">as</span> <span class="dt">string</span>)<span class="op">,</span></span>
<span id="cb55-94"><a href="#cb55-94" aria-hidden="true" tabindex="-1"></a>          allowCredentials<span class="op">:</span> options<span class="op">.</span><span class="at">allowCredentials</span><span class="op">?.</span><span class="fu">map</span>(cred <span class="kw">=&gt;</span> ({</span>
<span id="cb55-95"><a href="#cb55-95" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>cred<span class="op">,</span></span>
<span id="cb55-96"><a href="#cb55-96" aria-hidden="true" tabindex="-1"></a>            id<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">base64ToArrayBuffer</span>(cred<span class="op">.</span><span class="at">id</span> <span class="im">as</span> <span class="dt">string</span>)<span class="op">,</span></span>
<span id="cb55-97"><a href="#cb55-97" aria-hidden="true" tabindex="-1"></a>          }))<span class="op">,</span></span>
<span id="cb55-98"><a href="#cb55-98" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb55-99"><a href="#cb55-99" aria-hidden="true" tabindex="-1"></a>      }) <span class="im">as</span> PublicKeyCredential<span class="op">;</span></span>
<span id="cb55-100"><a href="#cb55-100" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-101"><a href="#cb55-101" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>credential) {</span>
<span id="cb55-102"><a href="#cb55-102" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Authentication cancelled&#39;</span>)<span class="op">;</span></span>
<span id="cb55-103"><a href="#cb55-103" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb55-104"><a href="#cb55-104" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-105"><a href="#cb55-105" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Prepare credential for server</span></span>
<span id="cb55-106"><a href="#cb55-106" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> credentialData <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">prepareAuthenticationForServer</span>(credential)<span class="op">;</span></span>
<span id="cb55-107"><a href="#cb55-107" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-108"><a href="#cb55-108" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Complete authentication on server</span></span>
<span id="cb55-109"><a href="#cb55-109" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> authResponse <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">&#39;/api/auth/webauthn/authentication/complete&#39;</span><span class="op">,</span> {</span>
<span id="cb55-110"><a href="#cb55-110" aria-hidden="true" tabindex="-1"></a>        method<span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb55-111"><a href="#cb55-111" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">:</span> { <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span> }<span class="op">,</span></span>
<span id="cb55-112"><a href="#cb55-112" aria-hidden="true" tabindex="-1"></a>        body<span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(credentialData)<span class="op">,</span></span>
<span id="cb55-113"><a href="#cb55-113" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb55-114"><a href="#cb55-114" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-115"><a href="#cb55-115" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>authResponse<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb55-116"><a href="#cb55-116" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Authentication failed&#39;</span>)<span class="op">;</span></span>
<span id="cb55-117"><a href="#cb55-117" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb55-118"><a href="#cb55-118" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-119"><a href="#cb55-119" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> authResponse<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb55-120"><a href="#cb55-120" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-121"><a href="#cb55-121" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb55-122"><a href="#cb55-122" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb55-123"><a href="#cb55-123" aria-hidden="true" tabindex="-1"></a>        token<span class="op">:</span> result<span class="op">.</span><span class="at">token</span><span class="op">,</span></span>
<span id="cb55-124"><a href="#cb55-124" aria-hidden="true" tabindex="-1"></a>        user<span class="op">:</span> result<span class="op">.</span><span class="at">user</span><span class="op">,</span></span>
<span id="cb55-125"><a href="#cb55-125" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb55-126"><a href="#cb55-126" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-127"><a href="#cb55-127" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (error) {</span>
<span id="cb55-128"><a href="#cb55-128" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;WebAuthn authentication failed:&#39;</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb55-129"><a href="#cb55-129" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-130"><a href="#cb55-130" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb55-131"><a href="#cb55-131" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb55-132"><a href="#cb55-132" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> error <span class="kw">instanceof</span> <span class="bu">Error</span> <span class="op">?</span> error<span class="op">.</span><span class="at">message</span> <span class="op">:</span> <span class="st">&#39;Authentication failed&#39;</span><span class="op">,</span></span>
<span id="cb55-133"><a href="#cb55-133" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb55-134"><a href="#cb55-134" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb55-135"><a href="#cb55-135" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-136"><a href="#cb55-136" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-137"><a href="#cb55-137" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">prepareCredentialForServer</span>(credential<span class="op">:</span> PublicKeyCredential)<span class="op">:</span> CredentialData {</span>
<span id="cb55-138"><a href="#cb55-138" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> response <span class="op">=</span> credential<span class="op">.</span><span class="at">response</span> <span class="im">as</span> AuthenticatorAttestationResponse<span class="op">;</span></span>
<span id="cb55-139"><a href="#cb55-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb55-140"><a href="#cb55-140" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb55-141"><a href="#cb55-141" aria-hidden="true" tabindex="-1"></a>      id<span class="op">:</span> credential<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb55-142"><a href="#cb55-142" aria-hidden="true" tabindex="-1"></a>      rawId<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(credential<span class="op">.</span><span class="at">rawId</span>)<span class="op">,</span></span>
<span id="cb55-143"><a href="#cb55-143" aria-hidden="true" tabindex="-1"></a>      response<span class="op">:</span> {</span>
<span id="cb55-144"><a href="#cb55-144" aria-hidden="true" tabindex="-1"></a>        clientDataJSON<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(response<span class="op">.</span><span class="at">clientDataJSON</span>)<span class="op">,</span></span>
<span id="cb55-145"><a href="#cb55-145" aria-hidden="true" tabindex="-1"></a>        attestationObject<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(response<span class="op">.</span><span class="at">attestationObject</span>)<span class="op">,</span></span>
<span id="cb55-146"><a href="#cb55-146" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb55-147"><a href="#cb55-147" aria-hidden="true" tabindex="-1"></a>      type<span class="op">:</span> credential<span class="op">.</span><span class="at">type</span><span class="op">,</span></span>
<span id="cb55-148"><a href="#cb55-148" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb55-149"><a href="#cb55-149" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-150"><a href="#cb55-150" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-151"><a href="#cb55-151" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">prepareAuthenticationForServer</span>(credential<span class="op">:</span> PublicKeyCredential)<span class="op">:</span> AuthenticationData {</span>
<span id="cb55-152"><a href="#cb55-152" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> response <span class="op">=</span> credential<span class="op">.</span><span class="at">response</span> <span class="im">as</span> AuthenticatorAssertionResponse<span class="op">;</span></span>
<span id="cb55-153"><a href="#cb55-153" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb55-154"><a href="#cb55-154" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb55-155"><a href="#cb55-155" aria-hidden="true" tabindex="-1"></a>      id<span class="op">:</span> credential<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb55-156"><a href="#cb55-156" aria-hidden="true" tabindex="-1"></a>      rawId<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(credential<span class="op">.</span><span class="at">rawId</span>)<span class="op">,</span></span>
<span id="cb55-157"><a href="#cb55-157" aria-hidden="true" tabindex="-1"></a>      response<span class="op">:</span> {</span>
<span id="cb55-158"><a href="#cb55-158" aria-hidden="true" tabindex="-1"></a>        clientDataJSON<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(response<span class="op">.</span><span class="at">clientDataJSON</span>)<span class="op">,</span></span>
<span id="cb55-159"><a href="#cb55-159" aria-hidden="true" tabindex="-1"></a>        authenticatorData<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(response<span class="op">.</span><span class="at">authenticatorData</span>)<span class="op">,</span></span>
<span id="cb55-160"><a href="#cb55-160" aria-hidden="true" tabindex="-1"></a>        signature<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(response<span class="op">.</span><span class="at">signature</span>)<span class="op">,</span></span>
<span id="cb55-161"><a href="#cb55-161" aria-hidden="true" tabindex="-1"></a>        userHandle<span class="op">:</span> response<span class="op">.</span><span class="at">userHandle</span> <span class="op">?</span> <span class="kw">this</span><span class="op">.</span><span class="fu">arrayBufferToBase64</span>(response<span class="op">.</span><span class="at">userHandle</span>) <span class="op">:</span> <span class="dt">null</span><span class="op">,</span></span>
<span id="cb55-162"><a href="#cb55-162" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb55-163"><a href="#cb55-163" aria-hidden="true" tabindex="-1"></a>      type<span class="op">:</span> credential<span class="op">.</span><span class="at">type</span><span class="op">,</span></span>
<span id="cb55-164"><a href="#cb55-164" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb55-165"><a href="#cb55-165" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-166"><a href="#cb55-166" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-167"><a href="#cb55-167" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Utility methods for encoding/decoding</span></span>
<span id="cb55-168"><a href="#cb55-168" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">base64ToArrayBuffer</span>(base64<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">ArrayBuffer</span> {</span>
<span id="cb55-169"><a href="#cb55-169" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> binaryString <span class="op">=</span> <span class="fu">atob</span>(base64)<span class="op">;</span></span>
<span id="cb55-170"><a href="#cb55-170" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> bytes <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>(binaryString<span class="op">.</span><span class="at">length</span>)<span class="op">;</span></span>
<span id="cb55-171"><a href="#cb55-171" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> binaryString<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb55-172"><a href="#cb55-172" aria-hidden="true" tabindex="-1"></a>      bytes[i] <span class="op">=</span> binaryString<span class="op">.</span><span class="fu">charCodeAt</span>(i)<span class="op">;</span></span>
<span id="cb55-173"><a href="#cb55-173" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb55-174"><a href="#cb55-174" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bytes<span class="op">.</span><span class="at">buffer</span><span class="op">;</span></span>
<span id="cb55-175"><a href="#cb55-175" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-176"><a href="#cb55-176" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-177"><a href="#cb55-177" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">arrayBufferToBase64</span>(buffer<span class="op">:</span> <span class="bu">ArrayBuffer</span>)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb55-178"><a href="#cb55-178" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> bytes <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>(buffer)<span class="op">;</span></span>
<span id="cb55-179"><a href="#cb55-179" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> binary <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb55-180"><a href="#cb55-180" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> bytes<span class="op">.</span><span class="at">byteLength</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb55-181"><a href="#cb55-181" aria-hidden="true" tabindex="-1"></a>      binary <span class="op">+=</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>(bytes[i])<span class="op">;</span></span>
<span id="cb55-182"><a href="#cb55-182" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb55-183"><a href="#cb55-183" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">btoa</span>(binary)<span class="op">;</span></span>
<span id="cb55-184"><a href="#cb55-184" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-185"><a href="#cb55-185" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-186"><a href="#cb55-186" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">stringToArrayBuffer</span>(str<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">ArrayBuffer</span> {</span>
<span id="cb55-187"><a href="#cb55-187" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> encoder <span class="op">=</span> <span class="kw">new</span> <span class="fu">TextEncoder</span>()<span class="op">;</span></span>
<span id="cb55-188"><a href="#cb55-188" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> encoder<span class="op">.</span><span class="fu">encode</span>(str)<span class="op">;</span></span>
<span id="cb55-189"><a href="#cb55-189" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-190"><a href="#cb55-190" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="multi-factor-authentication-mfa-implementation">Multi-Factor
Authentication (MFA) Implementation</h3>
<div class="sourceCode" id="cb56"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Comprehensive MFA system</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> MFAService {</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> authService<span class="op">:</span> AuthenticationService<span class="op">;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> totpService<span class="op">:</span> TOTPService<span class="op">;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> smsService<span class="op">:</span> SMSService<span class="op">;</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">authService</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">AuthenticationService</span>()<span class="op">;</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">totpService</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">TOTPService</span>()<span class="op">;</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">smsService</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">SMSService</span>()<span class="op">;</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">enableMFA</span>(userId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> method<span class="op">:</span> MFAMethod)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>MFASetupResult<span class="op">&gt;</span> {</span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (method) {</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;totp&#39;</span><span class="op">:</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setupTOTP</span>(userId)<span class="op">;</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;sms&#39;</span><span class="op">:</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setupSMS</span>(userId)<span class="op">;</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;email&#39;</span><span class="op">:</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setupEmail</span>(userId)<span class="op">;</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;webauthn&#39;</span><span class="op">:</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setupWebAuthn</span>(userId)<span class="op">;</span></span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">default</span><span class="op">:</span></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`Unsupported MFA method: </span><span class="sc">${</span>method<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">setupTOTP</span>(userId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>TOTPSetupResult<span class="op">&gt;</span> {</span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> secret <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">totpService</span><span class="op">.</span><span class="fu">generateSecret</span>()<span class="op">;</span></span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> qrCode <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">totpService</span><span class="op">.</span><span class="fu">generateQRCode</span>(userId<span class="op">,</span> secret)<span class="op">;</span></span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a>      method<span class="op">:</span> <span class="st">&#39;totp&#39;</span><span class="op">,</span></span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a>      secret<span class="op">,</span></span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a>      qrCode<span class="op">,</span></span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a>      backupCodes<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateBackupCodes</span>()<span class="op">,</span></span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a>      instructions<span class="op">:</span> <span class="st">&#39;Scan the QR code with your authenticator app&#39;</span><span class="op">,</span></span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">verifyMFA</span>(userId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> method<span class="op">:</span> MFAMethod<span class="op">,</span> code<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>MFAVerificationResult<span class="op">&gt;</span> {</span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> isValid <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a>      <span class="cf">switch</span> (method) {</span>
<span id="cb56-46"><a href="#cb56-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">&#39;totp&#39;</span><span class="op">:</span></span>
<span id="cb56-47"><a href="#cb56-47" aria-hidden="true" tabindex="-1"></a>          isValid <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">totpService</span><span class="op">.</span><span class="fu">verifyCode</span>(userId<span class="op">,</span> code)<span class="op">;</span></span>
<span id="cb56-48"><a href="#cb56-48" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span><span class="op">;</span></span>
<span id="cb56-49"><a href="#cb56-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">&#39;sms&#39;</span><span class="op">:</span></span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a>          isValid <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">smsService</span><span class="op">.</span><span class="fu">verifyCode</span>(userId<span class="op">,</span> code)<span class="op">;</span></span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span><span class="op">;</span></span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">&#39;email&#39;</span><span class="op">:</span></span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a>          isValid <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">emailService</span><span class="op">.</span><span class="fu">verifyCode</span>(userId<span class="op">,</span> code)<span class="op">;</span></span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span><span class="op">;</span></span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">&#39;backup&#39;</span><span class="op">:</span></span>
<span id="cb56-56"><a href="#cb56-56" aria-hidden="true" tabindex="-1"></a>          isValid <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">verifyBackupCode</span>(userId<span class="op">,</span> code)<span class="op">;</span></span>
<span id="cb56-57"><a href="#cb56-57" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span><span class="op">;</span></span>
<span id="cb56-58"><a href="#cb56-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb56-59"><a href="#cb56-59" aria-hidden="true" tabindex="-1"></a>          <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`Unsupported MFA method: </span><span class="sc">${</span>method<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb56-60"><a href="#cb56-60" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb56-61"><a href="#cb56-61" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb56-62"><a href="#cb56-62" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (isValid) {</span>
<span id="cb56-63"><a href="#cb56-63" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Generate MFA token</span></span>
<span id="cb56-64"><a href="#cb56-64" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> mfaToken <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateMFAToken</span>(userId<span class="op">,</span> method)<span class="op">;</span></span>
<span id="cb56-65"><a href="#cb56-65" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb56-66"><a href="#cb56-66" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Log successful MFA</span></span>
<span id="cb56-67"><a href="#cb56-67" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">logMFAEvent</span>(userId<span class="op">,</span> method<span class="op">,</span> <span class="st">&#39;success&#39;</span>)<span class="op">;</span></span>
<span id="cb56-68"><a href="#cb56-68" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb56-69"><a href="#cb56-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb56-70"><a href="#cb56-70" aria-hidden="true" tabindex="-1"></a>          success<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb56-71"><a href="#cb56-71" aria-hidden="true" tabindex="-1"></a>          mfaToken<span class="op">,</span></span>
<span id="cb56-72"><a href="#cb56-72" aria-hidden="true" tabindex="-1"></a>          expiresAt<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>() <span class="op">+</span> <span class="dv">30</span> <span class="op">*</span> <span class="dv">60</span> <span class="op">*</span> <span class="dv">1000</span><span class="op">,</span> <span class="co">// 30 minutes</span></span>
<span id="cb56-73"><a href="#cb56-73" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb56-74"><a href="#cb56-74" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb56-75"><a href="#cb56-75" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Log failed MFA attempt</span></span>
<span id="cb56-76"><a href="#cb56-76" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">logMFAEvent</span>(userId<span class="op">,</span> method<span class="op">,</span> <span class="st">&#39;failure&#39;</span>)<span class="op">;</span></span>
<span id="cb56-77"><a href="#cb56-77" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb56-78"><a href="#cb56-78" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb56-79"><a href="#cb56-79" aria-hidden="true" tabindex="-1"></a>          success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb56-80"><a href="#cb56-80" aria-hidden="true" tabindex="-1"></a>          error<span class="op">:</span> <span class="st">&#39;Invalid verification code&#39;</span><span class="op">,</span></span>
<span id="cb56-81"><a href="#cb56-81" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb56-82"><a href="#cb56-82" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb56-83"><a href="#cb56-83" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (error) {</span>
<span id="cb56-84"><a href="#cb56-84" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">&#39;MFA verification error:&#39;</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb56-85"><a href="#cb56-85" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb56-86"><a href="#cb56-86" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb56-87"><a href="#cb56-87" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> <span class="st">&#39;Verification failed&#39;</span><span class="op">,</span></span>
<span id="cb56-88"><a href="#cb56-88" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb56-89"><a href="#cb56-89" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb56-90"><a href="#cb56-90" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-91"><a href="#cb56-91" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-92"><a href="#cb56-92" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateBackupCodes</span>()<span class="op">:</span> <span class="dt">string</span>[] {</span>
<span id="cb56-93"><a href="#cb56-93" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> codes<span class="op">:</span> <span class="dt">string</span>[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb56-94"><a href="#cb56-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb56-95"><a href="#cb56-95" aria-hidden="true" tabindex="-1"></a>      codes<span class="op">.</span><span class="fu">push</span>(<span class="kw">this</span><span class="op">.</span><span class="fu">generateRandomCode</span>(<span class="dv">8</span>))<span class="op">;</span></span>
<span id="cb56-96"><a href="#cb56-96" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb56-97"><a href="#cb56-97" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> codes<span class="op">;</span></span>
<span id="cb56-98"><a href="#cb56-98" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-99"><a href="#cb56-99" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-100"><a href="#cb56-100" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateRandomCode</span>(length<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb56-101"><a href="#cb56-101" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> chars <span class="op">=</span> <span class="st">&#39;0123456789&#39;</span><span class="op">;</span></span>
<span id="cb56-102"><a href="#cb56-102" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> result <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb56-103"><a href="#cb56-103" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> length<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb56-104"><a href="#cb56-104" aria-hidden="true" tabindex="-1"></a>      result <span class="op">+=</span> chars<span class="op">.</span><span class="fu">charAt</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> chars<span class="op">.</span><span class="at">length</span>))<span class="op">;</span></span>
<span id="cb56-105"><a href="#cb56-105" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb56-106"><a href="#cb56-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb56-107"><a href="#cb56-107" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-108"><a href="#cb56-108" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-109"><a href="#cb56-109" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">getMFAStatus</span>(userId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>MFAStatus<span class="op">&gt;</span> {</span>
<span id="cb56-110"><a href="#cb56-110" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> enabledMethods <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getEnabledMFAMethods</span>(userId)<span class="op">;</span></span>
<span id="cb56-111"><a href="#cb56-111" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> hasBackupCodes <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">hasValidBackupCodes</span>(userId)<span class="op">;</span></span>
<span id="cb56-112"><a href="#cb56-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-113"><a href="#cb56-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb56-114"><a href="#cb56-114" aria-hidden="true" tabindex="-1"></a>      enabled<span class="op">:</span> enabledMethods<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb56-115"><a href="#cb56-115" aria-hidden="true" tabindex="-1"></a>      methods<span class="op">:</span> enabledMethods<span class="op">,</span></span>
<span id="cb56-116"><a href="#cb56-116" aria-hidden="true" tabindex="-1"></a>      hasBackupCodes<span class="op">,</span></span>
<span id="cb56-117"><a href="#cb56-117" aria-hidden="true" tabindex="-1"></a>      recommendedMethods<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getRecommendedMethods</span>(enabledMethods)<span class="op">,</span></span>
<span id="cb56-118"><a href="#cb56-118" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb56-119"><a href="#cb56-119" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-120"><a href="#cb56-120" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-121"><a href="#cb56-121" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">getRecommendedMethods</span>(enabledMethods<span class="op">:</span> MFAMethod[])<span class="op">:</span> MFAMethod[] {</span>
<span id="cb56-122"><a href="#cb56-122" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> recommendations<span class="op">:</span> MFAMethod[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb56-123"><a href="#cb56-123" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-124"><a href="#cb56-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>enabledMethods<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;totp&#39;</span>)) {</span>
<span id="cb56-125"><a href="#cb56-125" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;totp&#39;</span>)<span class="op">;</span></span>
<span id="cb56-126"><a href="#cb56-126" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb56-127"><a href="#cb56-127" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-128"><a href="#cb56-128" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>enabledMethods<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;webauthn&#39;</span>)) {</span>
<span id="cb56-129"><a href="#cb56-129" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;webauthn&#39;</span>)<span class="op">;</span></span>
<span id="cb56-130"><a href="#cb56-130" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb56-131"><a href="#cb56-131" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-132"><a href="#cb56-132" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Always recommend having backup codes</span></span>
<span id="cb56-133"><a href="#cb56-133" aria-hidden="true" tabindex="-1"></a>    recommendations<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;backup&#39;</span>)<span class="op">;</span></span>
<span id="cb56-134"><a href="#cb56-134" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-135"><a href="#cb56-135" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> recommendations<span class="op">;</span></span>
<span id="cb56-136"><a href="#cb56-136" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-137"><a href="#cb56-137" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="content-security-policy-csp-implementation">Content Security
Policy (CSP) Implementation</h2>
<div class="sourceCode" id="cb57"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Dynamic CSP management</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> CSPManager {</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> config<span class="op">:</span> CSPConfig<span class="op">;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> violations<span class="op">:</span> CSPViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(config<span class="op">:</span> CSPConfig) {</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">config</span> <span class="op">=</span> config<span class="op">;</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">initializeCSP</span>()<span class="op">;</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setupViolationReporting</span>()<span class="op">;</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">initializeCSP</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cspHeader <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">buildCSPHeader</span>()<span class="op">;</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Set CSP via meta tag (for SPAs)</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> meta <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&#39;meta&#39;</span>)<span class="op">;</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>    meta<span class="op">.</span><span class="at">httpEquiv</span> <span class="op">=</span> <span class="st">&#39;Content-Security-Policy&#39;</span><span class="op">;</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>    meta<span class="op">.</span><span class="at">content</span> <span class="op">=</span> cspHeader<span class="op">;</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="at">head</span><span class="op">.</span><span class="fu">appendChild</span>(meta)<span class="op">;</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Also report CSP violations</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setupViolationHandling</span>()<span class="op">;</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">buildCSPHeader</span>()<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> directives <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Default source</span></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>    directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`default-src </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">defaultSrc</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39; &#39;</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Script sources</span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>    directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`script-src </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">buildScriptSrc</span>()<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Style sources</span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>    directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`style-src </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">styleSrc</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39; &#39;</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Image sources</span></span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>    directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`img-src </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">imgSrc</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39; &#39;</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Font sources</span></span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a>    directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`font-src </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">fontSrc</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39; &#39;</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Connect sources (for API calls)</span></span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a>    directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`connect-src </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">connectSrc</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39; &#39;</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Frame sources</span></span>
<span id="cb57-47"><a href="#cb57-47" aria-hidden="true" tabindex="-1"></a>    directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`frame-src </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">frameSrc</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39; &#39;</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-48"><a href="#cb57-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-49"><a href="#cb57-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Report violations</span></span>
<span id="cb57-50"><a href="#cb57-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">reportUri</span>) {</span>
<span id="cb57-51"><a href="#cb57-51" aria-hidden="true" tabindex="-1"></a>      directives<span class="op">.</span><span class="fu">push</span>(<span class="vs">`report-uri </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">reportUri</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb57-52"><a href="#cb57-52" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-53"><a href="#cb57-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-54"><a href="#cb57-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> directives<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;; &#39;</span>)<span class="op">;</span></span>
<span id="cb57-55"><a href="#cb57-55" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-56"><a href="#cb57-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-57"><a href="#cb57-57" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">buildScriptSrc</span>()<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb57-58"><a href="#cb57-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sources <span class="op">=</span> [<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">scriptSrc</span>]<span class="op">;</span></span>
<span id="cb57-59"><a href="#cb57-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-60"><a href="#cb57-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add nonce for inline scripts</span></span>
<span id="cb57-61"><a href="#cb57-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">useNonce</span>) {</span>
<span id="cb57-62"><a href="#cb57-62" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> nonce <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateNonce</span>()<span class="op">;</span></span>
<span id="cb57-63"><a href="#cb57-63" aria-hidden="true" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">&#39;data-csp-nonce&#39;</span><span class="op">,</span> nonce)<span class="op">;</span></span>
<span id="cb57-64"><a href="#cb57-64" aria-hidden="true" tabindex="-1"></a>      sources<span class="op">.</span><span class="fu">push</span>(<span class="vs">`&#39;nonce-</span><span class="sc">${</span>nonce<span class="sc">}</span><span class="vs">&#39;`</span>)<span class="op">;</span></span>
<span id="cb57-65"><a href="#cb57-65" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-66"><a href="#cb57-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-67"><a href="#cb57-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add hash for specific inline scripts</span></span>
<span id="cb57-68"><a href="#cb57-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">scriptHashes</span>) {</span>
<span id="cb57-69"><a href="#cb57-69" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">scriptHashes</span><span class="op">.</span><span class="fu">forEach</span>(hash <span class="kw">=&gt;</span> {</span>
<span id="cb57-70"><a href="#cb57-70" aria-hidden="true" tabindex="-1"></a>        sources<span class="op">.</span><span class="fu">push</span>(<span class="vs">`&#39;sha256-</span><span class="sc">${</span>hash<span class="sc">}</span><span class="vs">&#39;`</span>)<span class="op">;</span></span>
<span id="cb57-71"><a href="#cb57-71" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb57-72"><a href="#cb57-72" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-73"><a href="#cb57-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-74"><a href="#cb57-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sources<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39; &#39;</span>)<span class="op">;</span></span>
<span id="cb57-75"><a href="#cb57-75" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-76"><a href="#cb57-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-77"><a href="#cb57-77" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateNonce</span>()<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb57-78"><a href="#cb57-78" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> array <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>(<span class="dv">16</span>)<span class="op">;</span></span>
<span id="cb57-79"><a href="#cb57-79" aria-hidden="true" tabindex="-1"></a>    crypto<span class="op">.</span><span class="fu">getRandomValues</span>(array)<span class="op">;</span></span>
<span id="cb57-80"><a href="#cb57-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">btoa</span>(<span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>(<span class="op">...</span>array))<span class="op">;</span></span>
<span id="cb57-81"><a href="#cb57-81" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-82"><a href="#cb57-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-83"><a href="#cb57-83" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">setupViolationHandling</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb57-84"><a href="#cb57-84" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;securitypolicyviolation&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb57-85"><a href="#cb57-85" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> violation<span class="op">:</span> CSPViolation <span class="op">=</span> {</span>
<span id="cb57-86"><a href="#cb57-86" aria-hidden="true" tabindex="-1"></a>        directive<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">violatedDirective</span><span class="op">,</span></span>
<span id="cb57-87"><a href="#cb57-87" aria-hidden="true" tabindex="-1"></a>        blockedUri<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">blockedURI</span><span class="op">,</span></span>
<span id="cb57-88"><a href="#cb57-88" aria-hidden="true" tabindex="-1"></a>        documentUri<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">documentURI</span><span class="op">,</span></span>
<span id="cb57-89"><a href="#cb57-89" aria-hidden="true" tabindex="-1"></a>        lineNumber<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">lineNumber</span><span class="op">,</span></span>
<span id="cb57-90"><a href="#cb57-90" aria-hidden="true" tabindex="-1"></a>        columnNumber<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">columnNumber</span><span class="op">,</span></span>
<span id="cb57-91"><a href="#cb57-91" aria-hidden="true" tabindex="-1"></a>        sourceFile<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">sourceFile</span><span class="op">,</span></span>
<span id="cb57-92"><a href="#cb57-92" aria-hidden="true" tabindex="-1"></a>        sample<span class="op">:</span> <span class="bu">event</span><span class="op">.</span><span class="at">sample</span><span class="op">,</span></span>
<span id="cb57-93"><a href="#cb57-93" aria-hidden="true" tabindex="-1"></a>        timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb57-94"><a href="#cb57-94" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb57-95"><a href="#cb57-95" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-96"><a href="#cb57-96" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">handleViolation</span>(violation)<span class="op">;</span></span>
<span id="cb57-97"><a href="#cb57-97" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb57-98"><a href="#cb57-98" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-99"><a href="#cb57-99" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-100"><a href="#cb57-100" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">handleViolation</span>(violation<span class="op">:</span> CSPViolation)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb57-101"><a href="#cb57-101" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">push</span>(violation)<span class="op">;</span></span>
<span id="cb57-102"><a href="#cb57-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-103"><a href="#cb57-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Log violation</span></span>
<span id="cb57-104"><a href="#cb57-104" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">warn</span>(<span class="st">&#39;CSP Violation:&#39;</span><span class="op">,</span> violation)<span class="op">;</span></span>
<span id="cb57-105"><a href="#cb57-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-106"><a href="#cb57-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send to monitoring service</span></span>
<span id="cb57-107"><a href="#cb57-107" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">reportViolation</span>(violation)<span class="op">;</span></span>
<span id="cb57-108"><a href="#cb57-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-109"><a href="#cb57-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check if this is a critical violation</span></span>
<span id="cb57-110"><a href="#cb57-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="fu">isCriticalViolation</span>(violation)) {</span>
<span id="cb57-111"><a href="#cb57-111" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">handleCriticalViolation</span>(violation)<span class="op">;</span></span>
<span id="cb57-112"><a href="#cb57-112" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-113"><a href="#cb57-113" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-114"><a href="#cb57-114" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-115"><a href="#cb57-115" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">isCriticalViolation</span>(violation<span class="op">:</span> CSPViolation)<span class="op">:</span> <span class="dt">boolean</span> {</span>
<span id="cb57-116"><a href="#cb57-116" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Script injections are always critical</span></span>
<span id="cb57-117"><a href="#cb57-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (violation<span class="op">.</span><span class="at">directive</span><span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;script-src&#39;</span>)) {</span>
<span id="cb57-118"><a href="#cb57-118" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb57-119"><a href="#cb57-119" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-120"><a href="#cb57-120" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-121"><a href="#cb57-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Inline styles from unknown sources</span></span>
<span id="cb57-122"><a href="#cb57-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (violation<span class="op">.</span><span class="at">directive</span><span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;style-src&#39;</span>) <span class="op">&amp;&amp;</span> </span>
<span id="cb57-123"><a href="#cb57-123" aria-hidden="true" tabindex="-1"></a>        violation<span class="op">.</span><span class="at">blockedUri</span><span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;data:&#39;</span>)) {</span>
<span id="cb57-124"><a href="#cb57-124" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb57-125"><a href="#cb57-125" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-126"><a href="#cb57-126" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-127"><a href="#cb57-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb57-128"><a href="#cb57-128" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-129"><a href="#cb57-129" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-130"><a href="#cb57-130" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">handleCriticalViolation</span>(violation<span class="op">:</span> CSPViolation)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb57-131"><a href="#cb57-131" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Alert security team</span></span>
<span id="cb57-132"><a href="#cb57-132" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">sendSecurityAlert</span>(violation)<span class="op">;</span></span>
<span id="cb57-133"><a href="#cb57-133" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-134"><a href="#cb57-134" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Consider blocking user session if multiple violations</span></span>
<span id="cb57-135"><a href="#cb57-135" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> recentViolations <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb57-136"><a href="#cb57-136" aria-hidden="true" tabindex="-1"></a>      v <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">timestamp</span> <span class="op">&gt;</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>() <span class="op">-</span> <span class="dv">60000</span> <span class="co">// Last minute</span></span>
<span id="cb57-137"><a href="#cb57-137" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb57-138"><a href="#cb57-138" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-139"><a href="#cb57-139" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (recentViolations<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">5</span>) {</span>
<span id="cb57-140"><a href="#cb57-140" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">initiateSecurityProtocol</span>()<span class="op">;</span></span>
<span id="cb57-141"><a href="#cb57-141" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-142"><a href="#cb57-142" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-143"><a href="#cb57-143" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-144"><a href="#cb57-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">updateCSP</span>(newConfig<span class="op">:</span> <span class="bu">Partial</span><span class="op">&lt;</span>CSPConfig<span class="op">&gt;</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb57-145"><a href="#cb57-145" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">config</span> <span class="op">=</span> { <span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">,</span> <span class="op">...</span>newConfig }<span class="op">;</span></span>
<span id="cb57-146"><a href="#cb57-146" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-147"><a href="#cb57-147" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Remove existing CSP meta tag</span></span>
<span id="cb57-148"><a href="#cb57-148" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> existingMeta <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&#39;meta[http-equiv=&quot;Content-Security-Policy&quot;]&#39;</span>)<span class="op">;</span></span>
<span id="cb57-149"><a href="#cb57-149" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (existingMeta) {</span>
<span id="cb57-150"><a href="#cb57-150" aria-hidden="true" tabindex="-1"></a>      existingMeta<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb57-151"><a href="#cb57-151" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-152"><a href="#cb57-152" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-153"><a href="#cb57-153" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Apply new CSP</span></span>
<span id="cb57-154"><a href="#cb57-154" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">initializeCSP</span>()<span class="op">;</span></span>
<span id="cb57-155"><a href="#cb57-155" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-156"><a href="#cb57-156" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="wcag-2.1-aa-compliance-framework">WCAG 2.1 AA Compliance
Framework</h2>
<h3 id="automated-accessibility-testing">Automated Accessibility
Testing</h3>
<div class="sourceCode" id="cb58"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Comprehensive accessibility testing and monitoring</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> AccessibilityMonitor {</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> violations<span class="op">:</span> AccessibilityViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> config<span class="op">:</span> AccessibilityConfig<span class="op">;</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(config<span class="op">:</span> AccessibilityConfig) {</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">config</span> <span class="op">=</span> config<span class="op">;</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">initializeMonitoring</span>()<span class="op">;</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">initializeMonitoring</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Monitor DOM changes for accessibility issues</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setupDOMObserver</span>()<span class="op">;</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Monitor user interactions for accessibility problems</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setupInteractionMonitoring</span>()<span class="op">;</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Periodic accessibility audits</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">schedulePeriodicAudits</span>()<span class="op">;</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">setupDOMObserver</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="bu">MutationObserver</span>((mutations) <span class="kw">=&gt;</span> {</span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>      mutations<span class="op">.</span><span class="fu">forEach</span>((mutation) <span class="kw">=&gt;</span> {</span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (mutation<span class="op">.</span><span class="at">type</span> <span class="op">===</span> <span class="st">&#39;childList&#39;</span>) {</span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a>          mutation<span class="op">.</span><span class="at">addedNodes</span><span class="op">.</span><span class="fu">forEach</span>((node) <span class="kw">=&gt;</span> {</span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (node<span class="op">.</span><span class="at">nodeType</span> <span class="op">===</span> <span class="bu">Node</span><span class="op">.</span><span class="cn">ELEMENT_NODE</span>) {</span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>              <span class="kw">this</span><span class="op">.</span><span class="fu">auditElement</span>(node <span class="im">as</span> <span class="bu">Element</span>)<span class="op">;</span></span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a>    observer<span class="op">.</span><span class="fu">observe</span>(<span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">,</span> {</span>
<span id="cb58-36"><a href="#cb58-36" aria-hidden="true" tabindex="-1"></a>      childList<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb58-37"><a href="#cb58-37" aria-hidden="true" tabindex="-1"></a>      subtree<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb58-38"><a href="#cb58-38" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb58-39"><a href="#cb58-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-40"><a href="#cb58-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-41"><a href="#cb58-41" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">auditElement</span>(element<span class="op">:</span> <span class="bu">Element</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>AccessibilityAuditResult<span class="op">&gt;</span> {</span>
<span id="cb58-42"><a href="#cb58-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violations<span class="op">:</span> AccessibilityViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb58-43"><a href="#cb58-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-44"><a href="#cb58-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for missing alt text on images</span></span>
<span id="cb58-45"><a href="#cb58-45" aria-hidden="true" tabindex="-1"></a>    violations<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">checkImageAltText</span>(element))<span class="op">;</span></span>
<span id="cb58-46"><a href="#cb58-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-47"><a href="#cb58-47" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for proper heading structure</span></span>
<span id="cb58-48"><a href="#cb58-48" aria-hidden="true" tabindex="-1"></a>    violations<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">checkHeadingStructure</span>(element))<span class="op">;</span></span>
<span id="cb58-49"><a href="#cb58-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-50"><a href="#cb58-50" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for keyboard accessibility</span></span>
<span id="cb58-51"><a href="#cb58-51" aria-hidden="true" tabindex="-1"></a>    violations<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">checkKeyboardAccessibility</span>(element))<span class="op">;</span></span>
<span id="cb58-52"><a href="#cb58-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-53"><a href="#cb58-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for color contrast</span></span>
<span id="cb58-54"><a href="#cb58-54" aria-hidden="true" tabindex="-1"></a>    violations<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">checkColorContrast</span>(element))<span class="op">;</span></span>
<span id="cb58-55"><a href="#cb58-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-56"><a href="#cb58-56" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for ARIA usage</span></span>
<span id="cb58-57"><a href="#cb58-57" aria-hidden="true" tabindex="-1"></a>    violations<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">checkARIAUsage</span>(element))<span class="op">;</span></span>
<span id="cb58-58"><a href="#cb58-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-59"><a href="#cb58-59" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for form accessibility</span></span>
<span id="cb58-60"><a href="#cb58-60" aria-hidden="true" tabindex="-1"></a>    violations<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">checkFormAccessibility</span>(element))<span class="op">;</span></span>
<span id="cb58-61"><a href="#cb58-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-62"><a href="#cb58-62" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Store violations</span></span>
<span id="cb58-63"><a href="#cb58-63" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>violations)<span class="op">;</span></span>
<span id="cb58-64"><a href="#cb58-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-65"><a href="#cb58-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb58-66"><a href="#cb58-66" aria-hidden="true" tabindex="-1"></a>      element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(element)<span class="op">,</span></span>
<span id="cb58-67"><a href="#cb58-67" aria-hidden="true" tabindex="-1"></a>      violations<span class="op">,</span></span>
<span id="cb58-68"><a href="#cb58-68" aria-hidden="true" tabindex="-1"></a>      passed<span class="op">:</span> violations<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb58-69"><a href="#cb58-69" aria-hidden="true" tabindex="-1"></a>      timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb58-70"><a href="#cb58-70" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb58-71"><a href="#cb58-71" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-72"><a href="#cb58-72" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-73"><a href="#cb58-73" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">checkImageAltText</span>(element<span class="op">:</span> <span class="bu">Element</span>)<span class="op">:</span> AccessibilityViolation[] {</span>
<span id="cb58-74"><a href="#cb58-74" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violations<span class="op">:</span> AccessibilityViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb58-75"><a href="#cb58-75" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> images <span class="op">=</span> element<span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;img&#39;</span>)<span class="op">;</span></span>
<span id="cb58-76"><a href="#cb58-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-77"><a href="#cb58-77" aria-hidden="true" tabindex="-1"></a>    images<span class="op">.</span><span class="fu">forEach</span>((img) <span class="kw">=&gt;</span> {</span>
<span id="cb58-78"><a href="#cb58-78" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>img<span class="op">.</span><span class="fu">hasAttribute</span>(<span class="st">&#39;alt&#39;</span>)) {</span>
<span id="cb58-79"><a href="#cb58-79" aria-hidden="true" tabindex="-1"></a>        violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-80"><a href="#cb58-80" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;missing_alt_text&#39;</span><span class="op">,</span></span>
<span id="cb58-81"><a href="#cb58-81" aria-hidden="true" tabindex="-1"></a>          severity<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb58-82"><a href="#cb58-82" aria-hidden="true" tabindex="-1"></a>          element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(img)<span class="op">,</span></span>
<span id="cb58-83"><a href="#cb58-83" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Image missing alt attribute&#39;</span><span class="op">,</span></span>
<span id="cb58-84"><a href="#cb58-84" aria-hidden="true" tabindex="-1"></a>          wcagCriterion<span class="op">:</span> <span class="st">&#39;1.1.1&#39;</span><span class="op">,</span></span>
<span id="cb58-85"><a href="#cb58-85" aria-hidden="true" tabindex="-1"></a>          suggestion<span class="op">:</span> <span class="st">&#39;Add descriptive alt text or alt=&quot;&quot; for decorative images&#39;</span><span class="op">,</span></span>
<span id="cb58-86"><a href="#cb58-86" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb58-87"><a href="#cb58-87" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (img<span class="op">.</span><span class="fu">getAttribute</span>(<span class="st">&#39;alt&#39;</span>) <span class="op">===</span> <span class="st">&#39;&#39;</span>) {</span>
<span id="cb58-88"><a href="#cb58-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Check if this is truly decorative</span></span>
<span id="cb58-89"><a href="#cb58-89" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span><span class="op">.</span><span class="fu">isDecorativeImage</span>(img)) {</span>
<span id="cb58-90"><a href="#cb58-90" aria-hidden="true" tabindex="-1"></a>          violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-91"><a href="#cb58-91" aria-hidden="true" tabindex="-1"></a>            type<span class="op">:</span> <span class="st">&#39;empty_alt_text&#39;</span><span class="op">,</span></span>
<span id="cb58-92"><a href="#cb58-92" aria-hidden="true" tabindex="-1"></a>            severity<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb58-93"><a href="#cb58-93" aria-hidden="true" tabindex="-1"></a>            element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(img)<span class="op">,</span></span>
<span id="cb58-94"><a href="#cb58-94" aria-hidden="true" tabindex="-1"></a>            description<span class="op">:</span> <span class="st">&#39;Non-decorative image with empty alt text&#39;</span><span class="op">,</span></span>
<span id="cb58-95"><a href="#cb58-95" aria-hidden="true" tabindex="-1"></a>            wcagCriterion<span class="op">:</span> <span class="st">&#39;1.1.1&#39;</span><span class="op">,</span></span>
<span id="cb58-96"><a href="#cb58-96" aria-hidden="true" tabindex="-1"></a>            suggestion<span class="op">:</span> <span class="st">&#39;Add meaningful alt text describing the image content&#39;</span><span class="op">,</span></span>
<span id="cb58-97"><a href="#cb58-97" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb58-98"><a href="#cb58-98" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb58-99"><a href="#cb58-99" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb58-100"><a href="#cb58-100" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb58-101"><a href="#cb58-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-102"><a href="#cb58-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> violations<span class="op">;</span></span>
<span id="cb58-103"><a href="#cb58-103" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-104"><a href="#cb58-104" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-105"><a href="#cb58-105" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">checkHeadingStructure</span>(element<span class="op">:</span> <span class="bu">Element</span>)<span class="op">:</span> AccessibilityViolation[] {</span>
<span id="cb58-106"><a href="#cb58-106" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violations<span class="op">:</span> AccessibilityViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb58-107"><a href="#cb58-107" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> headings <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(element<span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;h1, h2, h3, h4, h5, h6&#39;</span>))<span class="op">;</span></span>
<span id="cb58-108"><a href="#cb58-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-109"><a href="#cb58-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (headings<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>) <span class="cf">return</span> violations<span class="op">;</span></span>
<span id="cb58-110"><a href="#cb58-110" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-111"><a href="#cb58-111" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> levels <span class="op">=</span> headings<span class="op">.</span><span class="fu">map</span>(h <span class="kw">=&gt;</span> <span class="pp">parseInt</span>(h<span class="op">.</span><span class="at">tagName</span><span class="op">.</span><span class="fu">charAt</span>(<span class="dv">1</span>)))<span class="op">;</span></span>
<span id="cb58-112"><a href="#cb58-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-113"><a href="#cb58-113" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for proper heading hierarchy</span></span>
<span id="cb58-114"><a href="#cb58-114" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> levels<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb58-115"><a href="#cb58-115" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (levels[i] <span class="op">&gt;</span> levels[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> <span class="dv">1</span>) {</span>
<span id="cb58-116"><a href="#cb58-116" aria-hidden="true" tabindex="-1"></a>        violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-117"><a href="#cb58-117" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;skipped_heading_level&#39;</span><span class="op">,</span></span>
<span id="cb58-118"><a href="#cb58-118" aria-hidden="true" tabindex="-1"></a>          severity<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb58-119"><a href="#cb58-119" aria-hidden="true" tabindex="-1"></a>          element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(headings[i])<span class="op">,</span></span>
<span id="cb58-120"><a href="#cb58-120" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="vs">`Heading level skipped from h</span><span class="sc">${</span>levels[i <span class="op">-</span> <span class="dv">1</span>]<span class="sc">}</span><span class="vs"> to h</span><span class="sc">${</span>levels[i]<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb58-121"><a href="#cb58-121" aria-hidden="true" tabindex="-1"></a>          wcagCriterion<span class="op">:</span> <span class="st">&#39;1.3.1&#39;</span><span class="op">,</span></span>
<span id="cb58-122"><a href="#cb58-122" aria-hidden="true" tabindex="-1"></a>          suggestion<span class="op">:</span> <span class="st">&#39;Use heading levels sequentially without skipping&#39;</span><span class="op">,</span></span>
<span id="cb58-123"><a href="#cb58-123" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb58-124"><a href="#cb58-124" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb58-125"><a href="#cb58-125" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb58-126"><a href="#cb58-126" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-127"><a href="#cb58-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for multiple h1s</span></span>
<span id="cb58-128"><a href="#cb58-128" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> h1Count <span class="op">=</span> levels<span class="op">.</span><span class="fu">filter</span>(level <span class="kw">=&gt;</span> level <span class="op">===</span> <span class="dv">1</span>)<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb58-129"><a href="#cb58-129" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (h1Count <span class="op">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb58-130"><a href="#cb58-130" aria-hidden="true" tabindex="-1"></a>      violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-131"><a href="#cb58-131" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> <span class="st">&#39;multiple_h1&#39;</span><span class="op">,</span></span>
<span id="cb58-132"><a href="#cb58-132" aria-hidden="true" tabindex="-1"></a>        severity<span class="op">:</span> <span class="st">&#39;low&#39;</span><span class="op">,</span></span>
<span id="cb58-133"><a href="#cb58-133" aria-hidden="true" tabindex="-1"></a>        element<span class="op">:</span> <span class="st">&#39;multiple elements&#39;</span><span class="op">,</span></span>
<span id="cb58-134"><a href="#cb58-134" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&#39;Multiple h1 elements found on page&#39;</span><span class="op">,</span></span>
<span id="cb58-135"><a href="#cb58-135" aria-hidden="true" tabindex="-1"></a>        wcagCriterion<span class="op">:</span> <span class="st">&#39;1.3.1&#39;</span><span class="op">,</span></span>
<span id="cb58-136"><a href="#cb58-136" aria-hidden="true" tabindex="-1"></a>        suggestion<span class="op">:</span> <span class="st">&#39;Use only one h1 per page for main heading&#39;</span><span class="op">,</span></span>
<span id="cb58-137"><a href="#cb58-137" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb58-138"><a href="#cb58-138" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb58-139"><a href="#cb58-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-140"><a href="#cb58-140" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> violations<span class="op">;</span></span>
<span id="cb58-141"><a href="#cb58-141" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-142"><a href="#cb58-142" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-143"><a href="#cb58-143" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">checkKeyboardAccessibility</span>(element<span class="op">:</span> <span class="bu">Element</span>)<span class="op">:</span> AccessibilityViolation[] {</span>
<span id="cb58-144"><a href="#cb58-144" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violations<span class="op">:</span> AccessibilityViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb58-145"><a href="#cb58-145" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-146"><a href="#cb58-146" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for interactive elements without proper keyboard support</span></span>
<span id="cb58-147"><a href="#cb58-147" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> interactiveElements <span class="op">=</span> element<span class="op">.</span><span class="fu">querySelectorAll</span>(</span>
<span id="cb58-148"><a href="#cb58-148" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;button, a, input, select, textarea, [onclick], [onkeydown], [tabindex]&#39;</span></span>
<span id="cb58-149"><a href="#cb58-149" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb58-150"><a href="#cb58-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-151"><a href="#cb58-151" aria-hidden="true" tabindex="-1"></a>    interactiveElements<span class="op">.</span><span class="fu">forEach</span>((elem) <span class="kw">=&gt;</span> {</span>
<span id="cb58-152"><a href="#cb58-152" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check if element is focusable</span></span>
<span id="cb58-153"><a href="#cb58-153" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span><span class="op">.</span><span class="fu">isFocusable</span>(elem <span class="im">as</span> <span class="bu">HTMLElement</span>)) {</span>
<span id="cb58-154"><a href="#cb58-154" aria-hidden="true" tabindex="-1"></a>        violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-155"><a href="#cb58-155" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;not_focusable&#39;</span><span class="op">,</span></span>
<span id="cb58-156"><a href="#cb58-156" aria-hidden="true" tabindex="-1"></a>          severity<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb58-157"><a href="#cb58-157" aria-hidden="true" tabindex="-1"></a>          element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(elem)<span class="op">,</span></span>
<span id="cb58-158"><a href="#cb58-158" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Interactive element is not keyboard focusable&#39;</span><span class="op">,</span></span>
<span id="cb58-159"><a href="#cb58-159" aria-hidden="true" tabindex="-1"></a>          wcagCriterion<span class="op">:</span> <span class="st">&#39;2.1.1&#39;</span><span class="op">,</span></span>
<span id="cb58-160"><a href="#cb58-160" aria-hidden="true" tabindex="-1"></a>          suggestion<span class="op">:</span> <span class="st">&#39;Add tabindex=&quot;0&quot; or ensure element is naturally focusable&#39;</span><span class="op">,</span></span>
<span id="cb58-161"><a href="#cb58-161" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb58-162"><a href="#cb58-162" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb58-163"><a href="#cb58-163" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb58-164"><a href="#cb58-164" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check for keyboard event handlers</span></span>
<span id="cb58-165"><a href="#cb58-165" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (elem<span class="op">.</span><span class="fu">hasAttribute</span>(<span class="st">&#39;onclick&#39;</span>) <span class="op">&amp;&amp;</span> <span class="op">!</span>elem<span class="op">.</span><span class="fu">hasAttribute</span>(<span class="st">&#39;onkeydown&#39;</span>)) {</span>
<span id="cb58-166"><a href="#cb58-166" aria-hidden="true" tabindex="-1"></a>        violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-167"><a href="#cb58-167" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;missing_keyboard_handler&#39;</span><span class="op">,</span></span>
<span id="cb58-168"><a href="#cb58-168" aria-hidden="true" tabindex="-1"></a>          severity<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb58-169"><a href="#cb58-169" aria-hidden="true" tabindex="-1"></a>          element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(elem)<span class="op">,</span></span>
<span id="cb58-170"><a href="#cb58-170" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Click handler without corresponding keyboard handler&#39;</span><span class="op">,</span></span>
<span id="cb58-171"><a href="#cb58-171" aria-hidden="true" tabindex="-1"></a>          wcagCriterion<span class="op">:</span> <span class="st">&#39;2.1.1&#39;</span><span class="op">,</span></span>
<span id="cb58-172"><a href="#cb58-172" aria-hidden="true" tabindex="-1"></a>          suggestion<span class="op">:</span> <span class="st">&#39;Add onkeydown handler for Enter and Space keys&#39;</span><span class="op">,</span></span>
<span id="cb58-173"><a href="#cb58-173" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb58-174"><a href="#cb58-174" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb58-175"><a href="#cb58-175" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb58-176"><a href="#cb58-176" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-177"><a href="#cb58-177" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> violations<span class="op">;</span></span>
<span id="cb58-178"><a href="#cb58-178" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-179"><a href="#cb58-179" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-180"><a href="#cb58-180" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">checkColorContrast</span>(element<span class="op">:</span> <span class="bu">Element</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>AccessibilityViolation[]<span class="op">&gt;</span> {</span>
<span id="cb58-181"><a href="#cb58-181" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violations<span class="op">:</span> AccessibilityViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb58-182"><a href="#cb58-182" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> textElements <span class="op">=</span> element<span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;*&#39;</span>)<span class="op">;</span></span>
<span id="cb58-183"><a href="#cb58-183" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-184"><a href="#cb58-184" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> elem <span class="kw">of</span> textElements) {</span>
<span id="cb58-185"><a href="#cb58-185" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (elem<span class="op">.</span><span class="at">textContent</span><span class="op">?.</span><span class="fu">trim</span>()) {</span>
<span id="cb58-186"><a href="#cb58-186" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> styles <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">getComputedStyle</span>(elem)<span class="op">;</span></span>
<span id="cb58-187"><a href="#cb58-187" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> foreground <span class="op">=</span> styles<span class="op">.</span><span class="at">color</span><span class="op">;</span></span>
<span id="cb58-188"><a href="#cb58-188" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> background <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getEffectiveBackgroundColor</span>(elem <span class="im">as</span> <span class="bu">HTMLElement</span>)<span class="op">;</span></span>
<span id="cb58-189"><a href="#cb58-189" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb58-190"><a href="#cb58-190" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> contrastRatio <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateContrastRatio</span>(foreground<span class="op">,</span> background)<span class="op">;</span></span>
<span id="cb58-191"><a href="#cb58-191" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> fontSize <span class="op">=</span> <span class="pp">parseFloat</span>(styles<span class="op">.</span><span class="at">fontSize</span>)<span class="op">;</span></span>
<span id="cb58-192"><a href="#cb58-192" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> fontWeight <span class="op">=</span> styles<span class="op">.</span><span class="at">fontWeight</span><span class="op">;</span></span>
<span id="cb58-193"><a href="#cb58-193" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb58-194"><a href="#cb58-194" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> isLargeText <span class="op">=</span> fontSize <span class="op">&gt;=</span> <span class="dv">18</span> <span class="op">||</span> (fontSize <span class="op">&gt;=</span> <span class="dv">14</span> <span class="op">&amp;&amp;</span> (fontWeight <span class="op">===</span> <span class="st">&#39;bold&#39;</span> <span class="op">||</span> fontWeight <span class="op">&gt;=</span> <span class="st">&#39;700&#39;</span>))<span class="op">;</span></span>
<span id="cb58-195"><a href="#cb58-195" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> minimumRatio <span class="op">=</span> isLargeText <span class="op">?</span> <span class="dv">3</span> <span class="op">:</span> <span class="fl">4.5</span><span class="op">;</span></span>
<span id="cb58-196"><a href="#cb58-196" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb58-197"><a href="#cb58-197" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (contrastRatio <span class="op">&lt;</span> minimumRatio) {</span>
<span id="cb58-198"><a href="#cb58-198" aria-hidden="true" tabindex="-1"></a>          violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-199"><a href="#cb58-199" aria-hidden="true" tabindex="-1"></a>            type<span class="op">:</span> <span class="st">&#39;insufficient_color_contrast&#39;</span><span class="op">,</span></span>
<span id="cb58-200"><a href="#cb58-200" aria-hidden="true" tabindex="-1"></a>            severity<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb58-201"><a href="#cb58-201" aria-hidden="true" tabindex="-1"></a>            element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(elem)<span class="op">,</span></span>
<span id="cb58-202"><a href="#cb58-202" aria-hidden="true" tabindex="-1"></a>            description<span class="op">:</span> <span class="vs">`Color contrast ratio </span><span class="sc">${</span>contrastRatio<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> is below minimum </span><span class="sc">${</span>minimumRatio<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb58-203"><a href="#cb58-203" aria-hidden="true" tabindex="-1"></a>            wcagCriterion<span class="op">:</span> <span class="st">&#39;1.4.3&#39;</span><span class="op">,</span></span>
<span id="cb58-204"><a href="#cb58-204" aria-hidden="true" tabindex="-1"></a>            suggestion<span class="op">:</span> <span class="st">&#39;Increase contrast between text and background colors&#39;</span><span class="op">,</span></span>
<span id="cb58-205"><a href="#cb58-205" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb58-206"><a href="#cb58-206" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb58-207"><a href="#cb58-207" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb58-208"><a href="#cb58-208" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb58-209"><a href="#cb58-209" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-210"><a href="#cb58-210" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> violations<span class="op">;</span></span>
<span id="cb58-211"><a href="#cb58-211" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-212"><a href="#cb58-212" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-213"><a href="#cb58-213" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">checkARIAUsage</span>(element<span class="op">:</span> <span class="bu">Element</span>)<span class="op">:</span> AccessibilityViolation[] {</span>
<span id="cb58-214"><a href="#cb58-214" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violations<span class="op">:</span> AccessibilityViolation[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb58-215"><a href="#cb58-215" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> ariaElements <span class="op">=</span> element<span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;[aria-*]&#39;</span>)<span class="op">;</span></span>
<span id="cb58-216"><a href="#cb58-216" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-217"><a href="#cb58-217" aria-hidden="true" tabindex="-1"></a>    ariaElements<span class="op">.</span><span class="fu">forEach</span>((elem) <span class="kw">=&gt;</span> {</span>
<span id="cb58-218"><a href="#cb58-218" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check for valid ARIA attributes</span></span>
<span id="cb58-219"><a href="#cb58-219" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> ariaAttributes <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(elem<span class="op">.</span><span class="at">attributes</span>)</span>
<span id="cb58-220"><a href="#cb58-220" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">filter</span>(attr <span class="kw">=&gt;</span> attr<span class="op">.</span><span class="at">name</span><span class="op">.</span><span class="fu">startsWith</span>(<span class="st">&#39;aria-&#39;</span>))<span class="op">;</span></span>
<span id="cb58-221"><a href="#cb58-221" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb58-222"><a href="#cb58-222" aria-hidden="true" tabindex="-1"></a>      ariaAttributes<span class="op">.</span><span class="fu">forEach</span>((attr) <span class="kw">=&gt;</span> {</span>
<span id="cb58-223"><a href="#cb58-223" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span><span class="op">.</span><span class="fu">isValidARIAAttribute</span>(attr<span class="op">.</span><span class="at">name</span>)) {</span>
<span id="cb58-224"><a href="#cb58-224" aria-hidden="true" tabindex="-1"></a>          violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-225"><a href="#cb58-225" aria-hidden="true" tabindex="-1"></a>            type<span class="op">:</span> <span class="st">&#39;invalid_aria_attribute&#39;</span><span class="op">,</span></span>
<span id="cb58-226"><a href="#cb58-226" aria-hidden="true" tabindex="-1"></a>            severity<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb58-227"><a href="#cb58-227" aria-hidden="true" tabindex="-1"></a>            element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(elem)<span class="op">,</span></span>
<span id="cb58-228"><a href="#cb58-228" aria-hidden="true" tabindex="-1"></a>            description<span class="op">:</span> <span class="vs">`Invalid ARIA attribute: </span><span class="sc">${</span>attr<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb58-229"><a href="#cb58-229" aria-hidden="true" tabindex="-1"></a>            wcagCriterion<span class="op">:</span> <span class="st">&#39;4.1.2&#39;</span><span class="op">,</span></span>
<span id="cb58-230"><a href="#cb58-230" aria-hidden="true" tabindex="-1"></a>            suggestion<span class="op">:</span> <span class="st">&#39;Remove invalid ARIA attribute or use correct syntax&#39;</span><span class="op">,</span></span>
<span id="cb58-231"><a href="#cb58-231" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb58-232"><a href="#cb58-232" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb58-233"><a href="#cb58-233" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb58-234"><a href="#cb58-234" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb58-235"><a href="#cb58-235" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check for ARIA label accessibility</span></span>
<span id="cb58-236"><a href="#cb58-236" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (elem<span class="op">.</span><span class="fu">hasAttribute</span>(<span class="st">&#39;aria-label&#39;</span>) <span class="op">&amp;&amp;</span> <span class="op">!</span>elem<span class="op">.</span><span class="fu">getAttribute</span>(<span class="st">&#39;aria-label&#39;</span>)<span class="op">?.</span><span class="fu">trim</span>()) {</span>
<span id="cb58-237"><a href="#cb58-237" aria-hidden="true" tabindex="-1"></a>        violations<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb58-238"><a href="#cb58-238" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;empty_aria_label&#39;</span><span class="op">,</span></span>
<span id="cb58-239"><a href="#cb58-239" aria-hidden="true" tabindex="-1"></a>          severity<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb58-240"><a href="#cb58-240" aria-hidden="true" tabindex="-1"></a>          element<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getElementSelector</span>(elem)<span class="op">,</span></span>
<span id="cb58-241"><a href="#cb58-241" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Empty aria-label attribute&#39;</span><span class="op">,</span></span>
<span id="cb58-242"><a href="#cb58-242" aria-hidden="true" tabindex="-1"></a>          wcagCriterion<span class="op">:</span> <span class="st">&#39;4.1.2&#39;</span><span class="op">,</span></span>
<span id="cb58-243"><a href="#cb58-243" aria-hidden="true" tabindex="-1"></a>          suggestion<span class="op">:</span> <span class="st">&#39;Provide meaningful aria-label text or remove attribute&#39;</span><span class="op">,</span></span>
<span id="cb58-244"><a href="#cb58-244" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb58-245"><a href="#cb58-245" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb58-246"><a href="#cb58-246" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb58-247"><a href="#cb58-247" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-248"><a href="#cb58-248" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> violations<span class="op">;</span></span>
<span id="cb58-249"><a href="#cb58-249" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-250"><a href="#cb58-250" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-251"><a href="#cb58-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateAccessibilityReport</span>()<span class="op">:</span> AccessibilityReport {</span>
<span id="cb58-252"><a href="#cb58-252" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violationsByType <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">groupViolationsByType</span>()<span class="op">;</span></span>
<span id="cb58-253"><a href="#cb58-253" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violationsBySeverity <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">groupViolationsBySeverity</span>()<span class="op">;</span></span>
<span id="cb58-254"><a href="#cb58-254" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> wcagCompliance <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateWCAGCompliance</span>()<span class="op">;</span></span>
<span id="cb58-255"><a href="#cb58-255" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-256"><a href="#cb58-256" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb58-257"><a href="#cb58-257" aria-hidden="true" tabindex="-1"></a>      timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb58-258"><a href="#cb58-258" aria-hidden="true" tabindex="-1"></a>      totalViolations<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb58-259"><a href="#cb58-259" aria-hidden="true" tabindex="-1"></a>      violationsByType<span class="op">,</span></span>
<span id="cb58-260"><a href="#cb58-260" aria-hidden="true" tabindex="-1"></a>      violationsBySeverity<span class="op">,</span></span>
<span id="cb58-261"><a href="#cb58-261" aria-hidden="true" tabindex="-1"></a>      wcagCompliance<span class="op">,</span></span>
<span id="cb58-262"><a href="#cb58-262" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateRecommendations</span>()<span class="op">,</span></span>
<span id="cb58-263"><a href="#cb58-263" aria-hidden="true" tabindex="-1"></a>      auditScore<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateAuditScore</span>()<span class="op">,</span></span>
<span id="cb58-264"><a href="#cb58-264" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb58-265"><a href="#cb58-265" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-266"><a href="#cb58-266" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-267"><a href="#cb58-267" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">calculateWCAGCompliance</span>()<span class="op">:</span> WCAGComplianceReport {</span>
<span id="cb58-268"><a href="#cb58-268" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> criteriaViolations <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">reduce</span>((acc<span class="op">,</span> violation) <span class="kw">=&gt;</span> {</span>
<span id="cb58-269"><a href="#cb58-269" aria-hidden="true" tabindex="-1"></a>      acc[violation<span class="op">.</span><span class="at">wcagCriterion</span>] <span class="op">=</span> (acc[violation<span class="op">.</span><span class="at">wcagCriterion</span>] <span class="op">||</span> <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb58-270"><a href="#cb58-270" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> acc<span class="op">;</span></span>
<span id="cb58-271"><a href="#cb58-271" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> {} <span class="im">as</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">number</span><span class="op">&gt;</span>)<span class="op">;</span></span>
<span id="cb58-272"><a href="#cb58-272" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-273"><a href="#cb58-273" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> totalCriteria <span class="op">=</span> <span class="dv">50</span><span class="op">;</span> <span class="co">// WCAG 2.1 AA has ~50 success criteria</span></span>
<span id="cb58-274"><a href="#cb58-274" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> violatedCriteria <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(criteriaViolations)<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb58-275"><a href="#cb58-275" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> compliancePercentage <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((totalCriteria <span class="op">-</span> violatedCriteria) <span class="op">/</span> totalCriteria <span class="op">*</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb58-276"><a href="#cb58-276" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-277"><a href="#cb58-277" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb58-278"><a href="#cb58-278" aria-hidden="true" tabindex="-1"></a>      level<span class="op">:</span> compliancePercentage <span class="op">&gt;=</span> <span class="dv">100</span> <span class="op">?</span> <span class="st">&#39;AA&#39;</span> <span class="op">:</span> compliancePercentage <span class="op">&gt;=</span> <span class="dv">90</span> <span class="op">?</span> <span class="st">&#39;A&#39;</span> <span class="op">:</span> <span class="st">&#39;Non-compliant&#39;</span><span class="op">,</span></span>
<span id="cb58-279"><a href="#cb58-279" aria-hidden="true" tabindex="-1"></a>      percentage<span class="op">:</span> compliancePercentage<span class="op">,</span></span>
<span id="cb58-280"><a href="#cb58-280" aria-hidden="true" tabindex="-1"></a>      violatedCriteria<span class="op">:</span> criteriaViolations<span class="op">,</span></span>
<span id="cb58-281"><a href="#cb58-281" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb58-282"><a href="#cb58-282" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-283"><a href="#cb58-283" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="automated-accessibility-testing-in-cicd">Automated Accessibility
Testing in CI/CD</h3>
<div class="sourceCode" id="cb59"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">// CI/CD accessibility testing integration</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> AccessibilityCIIntegration {</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">static</span> <span class="kw">async</span> <span class="fu">runAccessibilityTests</span>()<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>AccessibilityTestResult<span class="op">&gt;</span> {</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> axe <span class="op">=</span> <span class="cf">await</span> <span class="im">import</span>(<span class="st">&#39;axe-core&#39;</span>)<span class="op">;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Configure axe for CI environment</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    axe<span class="op">.</span><span class="fu">configure</span>({</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>      tags<span class="op">:</span> [<span class="st">&#39;wcag2a&#39;</span><span class="op">,</span> <span class="st">&#39;wcag2aa&#39;</span><span class="op">,</span> <span class="st">&#39;wcag21aa&#39;</span>]<span class="op">,</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>      rules<span class="op">:</span> {</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;color-contrast&#39;</span><span class="op">:</span> { enabled<span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;focus-order-semantics&#39;</span><span class="op">:</span> { enabled<span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;keyboard-navigation&#39;</span><span class="op">:</span> { enabled<span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Run tests on multiple pages</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> pages <span class="op">=</span> [</span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;/&#39;</span><span class="op">,</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;/login&#39;</span><span class="op">,</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;/dashboard&#39;</span><span class="op">,</span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;/profile&#39;</span><span class="op">,</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;/settings&#39;</span><span class="op">,</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results<span class="op">:</span> PageAccessibilityResult[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> page <span class="kw">of</span> pages) {</span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">testPage</span>(page)<span class="op">;</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>      results<span class="op">.</span><span class="fu">push</span>(result)<span class="op">;</span></span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> overallResult <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">aggregateResults</span>(results)<span class="op">;</span></span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Fail CI if accessibility violations exceed threshold</span></span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (overallResult<span class="op">.</span><span class="at">criticalViolations</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">||</span> overallResult<span class="op">.</span><span class="at">totalViolations</span> <span class="op">&gt;</span> <span class="dv">10</span>) {</span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`Accessibility tests failed: </span><span class="sc">${</span>overallResult<span class="op">.</span><span class="at">totalViolations</span><span class="sc">}</span><span class="vs"> violations found`</span>)<span class="op">;</span></span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overallResult<span class="op">;</span></span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb59-41"><a href="#cb59-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-42"><a href="#cb59-42" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">static</span> <span class="kw">async</span> <span class="fu">testPage</span>(url<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>PageAccessibilityResult<span class="op">&gt;</span> {</span>
<span id="cb59-43"><a href="#cb59-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">// In real CI, this would use a headless browser</span></span>
<span id="cb59-44"><a href="#cb59-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> page <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">loadPage</span>(url)<span class="op">;</span></span>
<span id="cb59-45"><a href="#cb59-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> axeResults <span class="op">=</span> <span class="cf">await</span> axe<span class="op">.</span><span class="fu">run</span>(page)<span class="op">;</span></span>
<span id="cb59-46"><a href="#cb59-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-47"><a href="#cb59-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb59-48"><a href="#cb59-48" aria-hidden="true" tabindex="-1"></a>      url<span class="op">,</span></span>
<span id="cb59-49"><a href="#cb59-49" aria-hidden="true" tabindex="-1"></a>      violations<span class="op">:</span> axeResults<span class="op">.</span><span class="at">violations</span><span class="op">.</span><span class="fu">map</span>(violation <span class="kw">=&gt;</span> ({</span>
<span id="cb59-50"><a href="#cb59-50" aria-hidden="true" tabindex="-1"></a>        id<span class="op">:</span> violation<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb59-51"><a href="#cb59-51" aria-hidden="true" tabindex="-1"></a>        impact<span class="op">:</span> violation<span class="op">.</span><span class="at">impact</span><span class="op">,</span></span>
<span id="cb59-52"><a href="#cb59-52" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> violation<span class="op">.</span><span class="at">description</span><span class="op">,</span></span>
<span id="cb59-53"><a href="#cb59-53" aria-hidden="true" tabindex="-1"></a>        help<span class="op">:</span> violation<span class="op">.</span><span class="at">help</span><span class="op">,</span></span>
<span id="cb59-54"><a href="#cb59-54" aria-hidden="true" tabindex="-1"></a>        helpUrl<span class="op">:</span> violation<span class="op">.</span><span class="at">helpUrl</span><span class="op">,</span></span>
<span id="cb59-55"><a href="#cb59-55" aria-hidden="true" tabindex="-1"></a>        nodes<span class="op">:</span> violation<span class="op">.</span><span class="at">nodes</span><span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb59-56"><a href="#cb59-56" aria-hidden="true" tabindex="-1"></a>      }))<span class="op">,</span></span>
<span id="cb59-57"><a href="#cb59-57" aria-hidden="true" tabindex="-1"></a>      passes<span class="op">:</span> axeResults<span class="op">.</span><span class="at">passes</span><span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb59-58"><a href="#cb59-58" aria-hidden="true" tabindex="-1"></a>      incomplete<span class="op">:</span> axeResults<span class="op">.</span><span class="at">incomplete</span><span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb59-59"><a href="#cb59-59" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb59-60"><a href="#cb59-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb59-61"><a href="#cb59-61" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="chapter-8-documentation-knowledge-management">Chapter 8:
Documentation &amp; Knowledge Management 🟡</h1>
<p><em>Pages 72-79</em></p>
<h2 id="living-documentation-systems">Living Documentation Systems</h2>
<p>Documentation in enterprise environments must be more than static
files—it needs to be a living system that evolves with the codebase and
provides value to multiple stakeholders.</p>
<h3 id="key-insight-documentation-as-code">💡 Key Insight: Documentation
as Code</h3>
<p>Effective documentation: - <strong>Lives with the code</strong> in
version control - <strong>Updates automatically</strong> through CI/CD -
<strong>Serves multiple audiences</strong> with appropriate detail
levels - <strong>Enables self-service</strong> reducing support
burden</p>
<h2 id="automated-documentation-generation">Automated Documentation
Generation</h2>
<h3 id="api-documentation-with-openapi">API Documentation with
OpenAPI</h3>
<div class="sourceCode" id="cb60"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Automated API documentation generation</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> APIDocumentationGenerator {</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> openAPISpec<span class="op">:</span> OpenAPISpec<span class="op">;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> routes<span class="op">:</span> RouteDefinition[]<span class="op">;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">openAPISpec</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">initializeSpec</span>()<span class="op">;</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">routes</span> <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">initializeSpec</span>()<span class="op">:</span> OpenAPISpec {</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>      openapi<span class="op">:</span> <span class="st">&#39;3.0.3&#39;</span><span class="op">,</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>      info<span class="op">:</span> {</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>        title<span class="op">:</span> <span class="st">&#39;Enterprise API&#39;</span><span class="op">,</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>        version<span class="op">:</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">API_VERSION</span> <span class="op">||</span> <span class="st">&#39;1.0.0&#39;</span><span class="op">,</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&#39;Comprehensive API for enterprise operations&#39;</span><span class="op">,</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>        contact<span class="op">:</span> {</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>          name<span class="op">:</span> <span class="st">&#39;API Support&#39;</span><span class="op">,</span></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>          email<span class="op">:</span> <span class="st">&#39;api-support@company.com&#39;</span><span class="op">,</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>          url<span class="op">:</span> <span class="st">&#39;https://developer.company.com&#39;</span><span class="op">,</span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>      servers<span class="op">:</span> [</span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>          url<span class="op">:</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">API_BASE_URL</span> <span class="op">||</span> <span class="st">&#39;https://api.company.com&#39;</span><span class="op">,</span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Production server&#39;</span><span class="op">,</span></span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>          url<span class="op">:</span> <span class="st">&#39;https://staging-api.company.com&#39;</span><span class="op">,</span></span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Staging server&#39;</span><span class="op">,</span></span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb60-34"><a href="#cb60-34" aria-hidden="true" tabindex="-1"></a>      paths<span class="op">:</span> {}<span class="op">,</span></span>
<span id="cb60-35"><a href="#cb60-35" aria-hidden="true" tabindex="-1"></a>      components<span class="op">:</span> {</span>
<span id="cb60-36"><a href="#cb60-36" aria-hidden="true" tabindex="-1"></a>        schemas<span class="op">:</span> {}<span class="op">,</span></span>
<span id="cb60-37"><a href="#cb60-37" aria-hidden="true" tabindex="-1"></a>        securitySchemes<span class="op">:</span> {</span>
<span id="cb60-38"><a href="#cb60-38" aria-hidden="true" tabindex="-1"></a>          bearerAuth<span class="op">:</span> {</span>
<span id="cb60-39"><a href="#cb60-39" aria-hidden="true" tabindex="-1"></a>            type<span class="op">:</span> <span class="st">&#39;http&#39;</span><span class="op">,</span></span>
<span id="cb60-40"><a href="#cb60-40" aria-hidden="true" tabindex="-1"></a>            scheme<span class="op">:</span> <span class="st">&#39;bearer&#39;</span><span class="op">,</span></span>
<span id="cb60-41"><a href="#cb60-41" aria-hidden="true" tabindex="-1"></a>            bearerFormat<span class="op">:</span> <span class="st">&#39;JWT&#39;</span><span class="op">,</span></span>
<span id="cb60-42"><a href="#cb60-42" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb60-43"><a href="#cb60-43" aria-hidden="true" tabindex="-1"></a>          apiKey<span class="op">:</span> {</span>
<span id="cb60-44"><a href="#cb60-44" aria-hidden="true" tabindex="-1"></a>            type<span class="op">:</span> <span class="st">&#39;apiKey&#39;</span><span class="op">,</span></span>
<span id="cb60-45"><a href="#cb60-45" aria-hidden="true" tabindex="-1"></a>            <span class="kw">in</span><span class="op">:</span> <span class="st">&#39;header&#39;</span><span class="op">,</span></span>
<span id="cb60-46"><a href="#cb60-46" aria-hidden="true" tabindex="-1"></a>            name<span class="op">:</span> <span class="st">&#39;X-API-Key&#39;</span><span class="op">,</span></span>
<span id="cb60-47"><a href="#cb60-47" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb60-48"><a href="#cb60-48" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-49"><a href="#cb60-49" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb60-50"><a href="#cb60-50" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb60-51"><a href="#cb60-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-52"><a href="#cb60-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-53"><a href="#cb60-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addRoute</span>(route<span class="op">:</span> RouteDefinition)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb60-54"><a href="#cb60-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">routes</span><span class="op">.</span><span class="fu">push</span>(route)<span class="op">;</span></span>
<span id="cb60-55"><a href="#cb60-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">updateOpenAPISpec</span>(route)<span class="op">;</span></span>
<span id="cb60-56"><a href="#cb60-56" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-57"><a href="#cb60-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-58"><a href="#cb60-58" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">updateOpenAPISpec</span>(route<span class="op">:</span> RouteDefinition)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb60-59"><a href="#cb60-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> pathItem <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createPathItem</span>(route)<span class="op">;</span></span>
<span id="cb60-60"><a href="#cb60-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-61"><a href="#cb60-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span><span class="op">.</span><span class="at">openAPISpec</span><span class="op">.</span><span class="at">paths</span>[route<span class="op">.</span><span class="at">path</span>]) {</span>
<span id="cb60-62"><a href="#cb60-62" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">openAPISpec</span><span class="op">.</span><span class="at">paths</span>[route<span class="op">.</span><span class="at">path</span>] <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb60-63"><a href="#cb60-63" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb60-64"><a href="#cb60-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-65"><a href="#cb60-65" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">openAPISpec</span><span class="op">.</span><span class="at">paths</span>[route<span class="op">.</span><span class="at">path</span>][route<span class="op">.</span><span class="at">method</span><span class="op">.</span><span class="fu">toLowerCase</span>()] <span class="op">=</span> pathItem<span class="op">;</span></span>
<span id="cb60-66"><a href="#cb60-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-67"><a href="#cb60-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add schemas for request/response bodies</span></span>
<span id="cb60-68"><a href="#cb60-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (route<span class="op">.</span><span class="at">requestSchema</span>) {</span>
<span id="cb60-69"><a href="#cb60-69" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">addSchema</span>(route<span class="op">.</span><span class="at">requestSchema</span><span class="op">.</span><span class="at">name</span><span class="op">,</span> route<span class="op">.</span><span class="at">requestSchema</span><span class="op">.</span><span class="at">schema</span>)<span class="op">;</span></span>
<span id="cb60-70"><a href="#cb60-70" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb60-71"><a href="#cb60-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-72"><a href="#cb60-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (route<span class="op">.</span><span class="at">responseSchema</span>) {</span>
<span id="cb60-73"><a href="#cb60-73" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">addSchema</span>(route<span class="op">.</span><span class="at">responseSchema</span><span class="op">.</span><span class="at">name</span><span class="op">,</span> route<span class="op">.</span><span class="at">responseSchema</span><span class="op">.</span><span class="at">schema</span>)<span class="op">;</span></span>
<span id="cb60-74"><a href="#cb60-74" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb60-75"><a href="#cb60-75" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-76"><a href="#cb60-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-77"><a href="#cb60-77" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">createPathItem</span>(route<span class="op">:</span> RouteDefinition)<span class="op">:</span> PathItemObject {</span>
<span id="cb60-78"><a href="#cb60-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb60-79"><a href="#cb60-79" aria-hidden="true" tabindex="-1"></a>      summary<span class="op">:</span> route<span class="op">.</span><span class="at">summary</span><span class="op">,</span></span>
<span id="cb60-80"><a href="#cb60-80" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> route<span class="op">.</span><span class="at">description</span><span class="op">,</span></span>
<span id="cb60-81"><a href="#cb60-81" aria-hidden="true" tabindex="-1"></a>      tags<span class="op">:</span> route<span class="op">.</span><span class="at">tags</span><span class="op">,</span></span>
<span id="cb60-82"><a href="#cb60-82" aria-hidden="true" tabindex="-1"></a>      parameters<span class="op">:</span> route<span class="op">.</span><span class="at">parameters</span><span class="op">?.</span><span class="fu">map</span>(param <span class="kw">=&gt;</span> ({</span>
<span id="cb60-83"><a href="#cb60-83" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> param<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb60-84"><a href="#cb60-84" aria-hidden="true" tabindex="-1"></a>        <span class="kw">in</span><span class="op">:</span> param<span class="op">.</span><span class="at">in</span><span class="op">,</span></span>
<span id="cb60-85"><a href="#cb60-85" aria-hidden="true" tabindex="-1"></a>        required<span class="op">:</span> param<span class="op">.</span><span class="at">required</span><span class="op">,</span></span>
<span id="cb60-86"><a href="#cb60-86" aria-hidden="true" tabindex="-1"></a>        schema<span class="op">:</span> param<span class="op">.</span><span class="at">schema</span><span class="op">,</span></span>
<span id="cb60-87"><a href="#cb60-87" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> param<span class="op">.</span><span class="at">description</span><span class="op">,</span></span>
<span id="cb60-88"><a href="#cb60-88" aria-hidden="true" tabindex="-1"></a>        example<span class="op">:</span> param<span class="op">.</span><span class="at">example</span><span class="op">,</span></span>
<span id="cb60-89"><a href="#cb60-89" aria-hidden="true" tabindex="-1"></a>      }))<span class="op">,</span></span>
<span id="cb60-90"><a href="#cb60-90" aria-hidden="true" tabindex="-1"></a>      requestBody<span class="op">:</span> route<span class="op">.</span><span class="at">requestSchema</span> <span class="op">?</span> {</span>
<span id="cb60-91"><a href="#cb60-91" aria-hidden="true" tabindex="-1"></a>        required<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb60-92"><a href="#cb60-92" aria-hidden="true" tabindex="-1"></a>        content<span class="op">:</span> {</span>
<span id="cb60-93"><a href="#cb60-93" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;application/json&#39;</span><span class="op">:</span> {</span>
<span id="cb60-94"><a href="#cb60-94" aria-hidden="true" tabindex="-1"></a>            schema<span class="op">:</span> { $ref<span class="op">:</span> <span class="vs">`#/components/schemas/</span><span class="sc">${</span>route<span class="op">.</span><span class="at">requestSchema</span><span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">`</span> }<span class="op">,</span></span>
<span id="cb60-95"><a href="#cb60-95" aria-hidden="true" tabindex="-1"></a>            examples<span class="op">:</span> route<span class="op">.</span><span class="at">requestExamples</span><span class="op">,</span></span>
<span id="cb60-96"><a href="#cb60-96" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb60-97"><a href="#cb60-97" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-98"><a href="#cb60-98" aria-hidden="true" tabindex="-1"></a>      } <span class="op">:</span> <span class="dt">undefined</span><span class="op">,</span></span>
<span id="cb60-99"><a href="#cb60-99" aria-hidden="true" tabindex="-1"></a>      responses<span class="op">:</span> {</span>
<span id="cb60-100"><a href="#cb60-100" aria-hidden="true" tabindex="-1"></a>        [route<span class="op">.</span><span class="at">successStatus</span> <span class="op">||</span> <span class="dv">200</span>]<span class="op">:</span> {</span>
<span id="cb60-101"><a href="#cb60-101" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> route<span class="op">.</span><span class="at">successDescription</span> <span class="op">||</span> <span class="st">&#39;Successful operation&#39;</span><span class="op">,</span></span>
<span id="cb60-102"><a href="#cb60-102" aria-hidden="true" tabindex="-1"></a>          content<span class="op">:</span> route<span class="op">.</span><span class="at">responseSchema</span> <span class="op">?</span> {</span>
<span id="cb60-103"><a href="#cb60-103" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;application/json&#39;</span><span class="op">:</span> {</span>
<span id="cb60-104"><a href="#cb60-104" aria-hidden="true" tabindex="-1"></a>              schema<span class="op">:</span> { $ref<span class="op">:</span> <span class="vs">`#/components/schemas/</span><span class="sc">${</span>route<span class="op">.</span><span class="at">responseSchema</span><span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">`</span> }<span class="op">,</span></span>
<span id="cb60-105"><a href="#cb60-105" aria-hidden="true" tabindex="-1"></a>              examples<span class="op">:</span> route<span class="op">.</span><span class="at">responseExamples</span><span class="op">,</span></span>
<span id="cb60-106"><a href="#cb60-106" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb60-107"><a href="#cb60-107" aria-hidden="true" tabindex="-1"></a>          } <span class="op">:</span> <span class="dt">undefined</span><span class="op">,</span></span>
<span id="cb60-108"><a href="#cb60-108" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-109"><a href="#cb60-109" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;400&#39;</span><span class="op">:</span> {</span>
<span id="cb60-110"><a href="#cb60-110" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Bad Request&#39;</span><span class="op">,</span></span>
<span id="cb60-111"><a href="#cb60-111" aria-hidden="true" tabindex="-1"></a>          content<span class="op">:</span> {</span>
<span id="cb60-112"><a href="#cb60-112" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;application/json&#39;</span><span class="op">:</span> {</span>
<span id="cb60-113"><a href="#cb60-113" aria-hidden="true" tabindex="-1"></a>              schema<span class="op">:</span> { $ref<span class="op">:</span> <span class="st">&#39;#/components/schemas/ErrorResponse&#39;</span> }<span class="op">,</span></span>
<span id="cb60-114"><a href="#cb60-114" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb60-115"><a href="#cb60-115" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb60-116"><a href="#cb60-116" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-117"><a href="#cb60-117" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;401&#39;</span><span class="op">:</span> {</span>
<span id="cb60-118"><a href="#cb60-118" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Unauthorized&#39;</span><span class="op">,</span></span>
<span id="cb60-119"><a href="#cb60-119" aria-hidden="true" tabindex="-1"></a>          content<span class="op">:</span> {</span>
<span id="cb60-120"><a href="#cb60-120" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;application/json&#39;</span><span class="op">:</span> {</span>
<span id="cb60-121"><a href="#cb60-121" aria-hidden="true" tabindex="-1"></a>              schema<span class="op">:</span> { $ref<span class="op">:</span> <span class="st">&#39;#/components/schemas/ErrorResponse&#39;</span> }<span class="op">,</span></span>
<span id="cb60-122"><a href="#cb60-122" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb60-123"><a href="#cb60-123" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb60-124"><a href="#cb60-124" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-125"><a href="#cb60-125" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;500&#39;</span><span class="op">:</span> {</span>
<span id="cb60-126"><a href="#cb60-126" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> <span class="st">&#39;Internal Server Error&#39;</span><span class="op">,</span></span>
<span id="cb60-127"><a href="#cb60-127" aria-hidden="true" tabindex="-1"></a>          content<span class="op">:</span> {</span>
<span id="cb60-128"><a href="#cb60-128" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;application/json&#39;</span><span class="op">:</span> {</span>
<span id="cb60-129"><a href="#cb60-129" aria-hidden="true" tabindex="-1"></a>              schema<span class="op">:</span> { $ref<span class="op">:</span> <span class="st">&#39;#/components/schemas/ErrorResponse&#39;</span> }<span class="op">,</span></span>
<span id="cb60-130"><a href="#cb60-130" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb60-131"><a href="#cb60-131" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb60-132"><a href="#cb60-132" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb60-133"><a href="#cb60-133" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb60-134"><a href="#cb60-134" aria-hidden="true" tabindex="-1"></a>      security<span class="op">:</span> route<span class="op">.</span><span class="at">requiresAuth</span> <span class="op">?</span> [{ bearerAuth<span class="op">:</span> [] }] <span class="op">:</span> <span class="dt">undefined</span><span class="op">,</span></span>
<span id="cb60-135"><a href="#cb60-135" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb60-136"><a href="#cb60-136" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-137"><a href="#cb60-137" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-138"><a href="#cb60-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateDocumentation</span>()<span class="op">:</span> GeneratedDocumentation {</span>
<span id="cb60-139"><a href="#cb60-139" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate static HTML documentation</span></span>
<span id="cb60-140"><a href="#cb60-140" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> html <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateHTML</span>()<span class="op">;</span></span>
<span id="cb60-141"><a href="#cb60-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-142"><a href="#cb60-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate Postman collection</span></span>
<span id="cb60-143"><a href="#cb60-143" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> postmanCollection <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generatePostmanCollection</span>()<span class="op">;</span></span>
<span id="cb60-144"><a href="#cb60-144" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-145"><a href="#cb60-145" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate SDK code samples</span></span>
<span id="cb60-146"><a href="#cb60-146" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> codeSamples <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateCodeSamples</span>()<span class="op">;</span></span>
<span id="cb60-147"><a href="#cb60-147" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-148"><a href="#cb60-148" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb60-149"><a href="#cb60-149" aria-hidden="true" tabindex="-1"></a>      openAPISpec<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">openAPISpec</span><span class="op">,</span></span>
<span id="cb60-150"><a href="#cb60-150" aria-hidden="true" tabindex="-1"></a>      html<span class="op">,</span></span>
<span id="cb60-151"><a href="#cb60-151" aria-hidden="true" tabindex="-1"></a>      postmanCollection<span class="op">,</span></span>
<span id="cb60-152"><a href="#cb60-152" aria-hidden="true" tabindex="-1"></a>      codeSamples<span class="op">,</span></span>
<span id="cb60-153"><a href="#cb60-153" aria-hidden="true" tabindex="-1"></a>      lastGenerated<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb60-154"><a href="#cb60-154" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb60-155"><a href="#cb60-155" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-156"><a href="#cb60-156" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-157"><a href="#cb60-157" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateHTML</span>()<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb60-158"><a href="#cb60-158" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Use Redoc or Swagger UI to generate static HTML</span></span>
<span id="cb60-159"><a href="#cb60-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb60-160"><a href="#cb60-160" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;!DOCTYPE html&gt;</span></span>
<span id="cb60-161"><a href="#cb60-161" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;html&gt;</span></span>
<span id="cb60-162"><a href="#cb60-162" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;head&gt;</span></span>
<span id="cb60-163"><a href="#cb60-163" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;title&gt;API Documentation&lt;/title&gt;</span></span>
<span id="cb60-164"><a href="#cb60-164" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span id="cb60-165"><a href="#cb60-165" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span></span>
<span id="cb60-166"><a href="#cb60-166" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;link href=&quot;https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700&quot; rel=&quot;stylesheet&quot;&gt;</span></span>
<span id="cb60-167"><a href="#cb60-167" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;style&gt;</span></span>
<span id="cb60-168"><a href="#cb60-168" aria-hidden="true" tabindex="-1"></a><span class="vs">    body { margin: 0; padding: 0; }</span></span>
<span id="cb60-169"><a href="#cb60-169" aria-hidden="true" tabindex="-1"></a><span class="vs">    redoc { display: block; }</span></span>
<span id="cb60-170"><a href="#cb60-170" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/style&gt;</span></span>
<span id="cb60-171"><a href="#cb60-171" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/head&gt;</span></span>
<span id="cb60-172"><a href="#cb60-172" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;body&gt;</span></span>
<span id="cb60-173"><a href="#cb60-173" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;redoc spec-url=&#39;./openapi.json&#39;&gt;&lt;/redoc&gt;</span></span>
<span id="cb60-174"><a href="#cb60-174" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;script src=&quot;https://cdn.jsdelivr.net/npm/redoc@2.0.0/bundles/redoc.standalone.js&quot;&gt;&lt;/script&gt;</span></span>
<span id="cb60-175"><a href="#cb60-175" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/body&gt;</span></span>
<span id="cb60-176"><a href="#cb60-176" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/html&gt;`</span><span class="op">;</span></span>
<span id="cb60-177"><a href="#cb60-177" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-178"><a href="#cb60-178" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-179"><a href="#cb60-179" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateCodeSamples</span>()<span class="op">:</span> CodeSamples {</span>
<span id="cb60-180"><a href="#cb60-180" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> samples<span class="op">:</span> CodeSamples <span class="op">=</span> {</span>
<span id="cb60-181"><a href="#cb60-181" aria-hidden="true" tabindex="-1"></a>      javascript<span class="op">:</span> {}<span class="op">,</span></span>
<span id="cb60-182"><a href="#cb60-182" aria-hidden="true" tabindex="-1"></a>      python<span class="op">:</span> {}<span class="op">,</span></span>
<span id="cb60-183"><a href="#cb60-183" aria-hidden="true" tabindex="-1"></a>      curl<span class="op">:</span> {}<span class="op">,</span></span>
<span id="cb60-184"><a href="#cb60-184" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb60-185"><a href="#cb60-185" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-186"><a href="#cb60-186" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">routes</span><span class="op">.</span><span class="fu">forEach</span>(route <span class="kw">=&gt;</span> {</span>
<span id="cb60-187"><a href="#cb60-187" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> routeKey <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>route<span class="op">.</span><span class="at">method</span><span class="op">.</span><span class="fu">toUpperCase</span>()<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>route<span class="op">.</span><span class="at">path</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb60-188"><a href="#cb60-188" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb60-189"><a href="#cb60-189" aria-hidden="true" tabindex="-1"></a>      <span class="co">// JavaScript/TypeScript sample</span></span>
<span id="cb60-190"><a href="#cb60-190" aria-hidden="true" tabindex="-1"></a>      samples<span class="op">.</span><span class="at">javascript</span>[routeKey] <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateJavaScriptSample</span>(route)<span class="op">;</span></span>
<span id="cb60-191"><a href="#cb60-191" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb60-192"><a href="#cb60-192" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Python sample</span></span>
<span id="cb60-193"><a href="#cb60-193" aria-hidden="true" tabindex="-1"></a>      samples<span class="op">.</span><span class="at">python</span>[routeKey] <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generatePythonSample</span>(route)<span class="op">;</span></span>
<span id="cb60-194"><a href="#cb60-194" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb60-195"><a href="#cb60-195" aria-hidden="true" tabindex="-1"></a>      <span class="co">// cURL sample</span></span>
<span id="cb60-196"><a href="#cb60-196" aria-hidden="true" tabindex="-1"></a>      samples<span class="op">.</span><span class="at">curl</span>[routeKey] <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateCurlSample</span>(route)<span class="op">;</span></span>
<span id="cb60-197"><a href="#cb60-197" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb60-198"><a href="#cb60-198" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-199"><a href="#cb60-199" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> samples<span class="op">;</span></span>
<span id="cb60-200"><a href="#cb60-200" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-201"><a href="#cb60-201" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-202"><a href="#cb60-202" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateJavaScriptSample</span>(route<span class="op">:</span> RouteDefinition)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb60-203"><a href="#cb60-203" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> hasBody <span class="op">=</span> route<span class="op">.</span><span class="at">requestSchema</span> <span class="op">&amp;&amp;</span> [<span class="st">&#39;POST&#39;</span><span class="op">,</span> <span class="st">&#39;PUT&#39;</span><span class="op">,</span> <span class="st">&#39;PATCH&#39;</span>]<span class="op">.</span><span class="fu">includes</span>(route<span class="op">.</span><span class="at">method</span>)<span class="op">;</span></span>
<span id="cb60-204"><a href="#cb60-204" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-205"><a href="#cb60-205" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb60-206"><a href="#cb60-206" aria-hidden="true" tabindex="-1"></a><span class="vs">// </span><span class="sc">${</span>route<span class="op">.</span><span class="at">summary</span><span class="sc">}</span></span>
<span id="cb60-207"><a href="#cb60-207" aria-hidden="true" tabindex="-1"></a><span class="vs">const response = await fetch(&#39;</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">openAPISpec</span><span class="op">.</span><span class="at">servers</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">url</span><span class="sc">}${</span>route<span class="op">.</span><span class="at">path</span><span class="sc">}</span><span class="vs">&#39;, {</span></span>
<span id="cb60-208"><a href="#cb60-208" aria-hidden="true" tabindex="-1"></a><span class="vs">  method: &#39;</span><span class="sc">${</span>route<span class="op">.</span><span class="at">method</span><span class="sc">}</span><span class="vs">&#39;,</span></span>
<span id="cb60-209"><a href="#cb60-209" aria-hidden="true" tabindex="-1"></a><span class="vs">  headers: {</span></span>
<span id="cb60-210"><a href="#cb60-210" aria-hidden="true" tabindex="-1"></a><span class="vs">    &#39;Content-Type&#39;: &#39;application/json&#39;,</span></span>
<span id="cb60-211"><a href="#cb60-211" aria-hidden="true" tabindex="-1"></a><span class="vs">    </span><span class="sc">${</span>route<span class="op">.</span><span class="at">requiresAuth</span> <span class="op">?</span> <span class="st">&quot;&#39;Authorization&#39;: &#39;Bearer YOUR_TOKEN&#39;,&quot;</span> <span class="op">:</span> <span class="st">&#39;&#39;</span><span class="sc">}</span></span>
<span id="cb60-212"><a href="#cb60-212" aria-hidden="true" tabindex="-1"></a><span class="vs">  },</span></span>
<span id="cb60-213"><a href="#cb60-213" aria-hidden="true" tabindex="-1"></a><span class="vs">  </span><span class="sc">${</span>hasBody <span class="op">?</span> <span class="vs">`body: JSON.stringify(</span><span class="sc">${</span><span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(route<span class="op">.</span><span class="at">requestExamples</span><span class="op">?.</span><span class="at">default</span><span class="op">?.</span><span class="at">value</span> <span class="op">||</span> {}<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)<span class="sc">}</span><span class="vs">)`</span> <span class="op">:</span> <span class="st">&#39;&#39;</span><span class="sc">}</span></span>
<span id="cb60-214"><a href="#cb60-214" aria-hidden="true" tabindex="-1"></a><span class="vs">});</span></span>
<span id="cb60-215"><a href="#cb60-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-216"><a href="#cb60-216" aria-hidden="true" tabindex="-1"></a><span class="vs">const data = await response.json();</span></span>
<span id="cb60-217"><a href="#cb60-217" aria-hidden="true" tabindex="-1"></a><span class="vs">console.log(data);`</span><span class="op">;</span></span>
<span id="cb60-218"><a href="#cb60-218" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-219"><a href="#cb60-219" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="component-documentation-with-storybook">Component Documentation
with Storybook</h3>
<div class="sourceCode" id="cb61"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Automated Storybook documentation generation</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ComponentDocumentationGenerator {</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> storyTemplate<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> mdxTemplate<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">storyTemplate</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">loadStoryTemplate</span>()<span class="op">;</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">mdxTemplate</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">loadMDXTemplate</span>()<span class="op">;</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateComponentStories</span>(componentPath<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> GeneratedStories {</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> componentInfo <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeComponent</span>(componentPath)<span class="op">;</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>      stories<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateStories</span>(componentInfo)<span class="op">,</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>      mdx<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateMDX</span>(componentInfo)<span class="op">,</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>      args<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateArgTypes</span>(componentInfo)<span class="op">,</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">analyzeComponent</span>(componentPath<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> ComponentInfo {</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// In real implementation, this would use TypeScript compiler API</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// to analyze component props and extract documentation</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sourceCode <span class="op">=</span> fs<span class="op">.</span><span class="fu">readFileSync</span>(componentPath<span class="op">,</span> <span class="st">&#39;utf-8&#39;</span>)<span class="op">;</span></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">extractComponentName</span>(sourceCode)<span class="op">,</span></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a>      props<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">extractProps</span>(sourceCode)<span class="op">,</span></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">extractDescription</span>(sourceCode)<span class="op">,</span></span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a>      examples<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">extractExamples</span>(sourceCode)<span class="op">,</span></span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a>      imports<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">extractImports</span>(sourceCode)<span class="op">,</span></span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-34"><a href="#cb61-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateStories</span>(component<span class="op">:</span> ComponentInfo)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb61-37"><a href="#cb61-37" aria-hidden="true" tabindex="-1"></a><span class="vs">import type { Meta, StoryObj } from &#39;@storybook/react&#39;;</span></span>
<span id="cb61-38"><a href="#cb61-38" aria-hidden="true" tabindex="-1"></a><span class="vs">import { </span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs"> } from &#39;./</span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">&#39;;</span></span>
<span id="cb61-39"><a href="#cb61-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-40"><a href="#cb61-40" aria-hidden="true" tabindex="-1"></a><span class="vs">const meta: Meta&lt;typeof </span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">&gt; = {</span></span>
<span id="cb61-41"><a href="#cb61-41" aria-hidden="true" tabindex="-1"></a><span class="vs">  title: &#39;Components/</span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">&#39;,</span></span>
<span id="cb61-42"><a href="#cb61-42" aria-hidden="true" tabindex="-1"></a><span class="vs">  component: </span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">,</span></span>
<span id="cb61-43"><a href="#cb61-43" aria-hidden="true" tabindex="-1"></a><span class="vs">  parameters: {</span></span>
<span id="cb61-44"><a href="#cb61-44" aria-hidden="true" tabindex="-1"></a><span class="vs">    layout: &#39;centered&#39;,</span></span>
<span id="cb61-45"><a href="#cb61-45" aria-hidden="true" tabindex="-1"></a><span class="vs">    docs: {</span></span>
<span id="cb61-46"><a href="#cb61-46" aria-hidden="true" tabindex="-1"></a><span class="vs">      description: {</span></span>
<span id="cb61-47"><a href="#cb61-47" aria-hidden="true" tabindex="-1"></a><span class="vs">        component: &#39;</span><span class="sc">${</span>component<span class="op">.</span><span class="at">description</span><span class="sc">}</span><span class="vs">&#39;,</span></span>
<span id="cb61-48"><a href="#cb61-48" aria-hidden="true" tabindex="-1"></a><span class="vs">      },</span></span>
<span id="cb61-49"><a href="#cb61-49" aria-hidden="true" tabindex="-1"></a><span class="vs">    },</span></span>
<span id="cb61-50"><a href="#cb61-50" aria-hidden="true" tabindex="-1"></a><span class="vs">  },</span></span>
<span id="cb61-51"><a href="#cb61-51" aria-hidden="true" tabindex="-1"></a><span class="vs">  tags: [&#39;autodocs&#39;],</span></span>
<span id="cb61-52"><a href="#cb61-52" aria-hidden="true" tabindex="-1"></a><span class="vs">  argTypes: </span><span class="sc">${</span><span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(<span class="kw">this</span><span class="op">.</span><span class="fu">generateArgTypes</span>(component)<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)<span class="sc">}</span><span class="vs">,</span></span>
<span id="cb61-53"><a href="#cb61-53" aria-hidden="true" tabindex="-1"></a><span class="vs">};</span></span>
<span id="cb61-54"><a href="#cb61-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-55"><a href="#cb61-55" aria-hidden="true" tabindex="-1"></a><span class="vs">export default meta;</span></span>
<span id="cb61-56"><a href="#cb61-56" aria-hidden="true" tabindex="-1"></a><span class="vs">type Story = StoryObj&lt;typeof meta&gt;;</span></span>
<span id="cb61-57"><a href="#cb61-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-58"><a href="#cb61-58" aria-hidden="true" tabindex="-1"></a><span class="vs">// Default story</span></span>
<span id="cb61-59"><a href="#cb61-59" aria-hidden="true" tabindex="-1"></a><span class="vs">export const Default: Story = {</span></span>
<span id="cb61-60"><a href="#cb61-60" aria-hidden="true" tabindex="-1"></a><span class="vs">  args: </span><span class="sc">${</span><span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(<span class="kw">this</span><span class="op">.</span><span class="fu">generateDefaultArgs</span>(component)<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)<span class="sc">}</span><span class="vs">,</span></span>
<span id="cb61-61"><a href="#cb61-61" aria-hidden="true" tabindex="-1"></a><span class="vs">};</span></span>
<span id="cb61-62"><a href="#cb61-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-63"><a href="#cb61-63" aria-hidden="true" tabindex="-1"></a><span class="vs">// Generated stories for different states</span></span>
<span id="cb61-64"><a href="#cb61-64" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateStateStories</span>(component)<span class="sc">}</span></span>
<span id="cb61-65"><a href="#cb61-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-66"><a href="#cb61-66" aria-hidden="true" tabindex="-1"></a><span class="vs">// Generated stories for different props combinations</span></span>
<span id="cb61-67"><a href="#cb61-67" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generatePropsCombinationStories</span>(component)<span class="sc">}</span></span>
<span id="cb61-68"><a href="#cb61-68" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb61-69"><a href="#cb61-69" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-70"><a href="#cb61-70" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-71"><a href="#cb61-71" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateMDX</span>(component<span class="op">:</span> ComponentInfo)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb61-72"><a href="#cb61-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb61-73"><a href="#cb61-73" aria-hidden="true" tabindex="-1"></a><span class="vs">import { Canvas, Meta, Story } from &#39;@storybook/blocks&#39;;</span></span>
<span id="cb61-74"><a href="#cb61-74" aria-hidden="true" tabindex="-1"></a><span class="vs">import * as </span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">Stories from &#39;./</span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">.stories&#39;;</span></span>
<span id="cb61-75"><a href="#cb61-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-76"><a href="#cb61-76" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;Meta of={</span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">Stories} /&gt;</span></span>
<span id="cb61-77"><a href="#cb61-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-78"><a href="#cb61-78" aria-hidden="true" tabindex="-1"></a><span class="vs"># </span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span></span>
<span id="cb61-79"><a href="#cb61-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-80"><a href="#cb61-80" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>component<span class="op">.</span><span class="at">description</span><span class="sc">}</span></span>
<span id="cb61-81"><a href="#cb61-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-82"><a href="#cb61-82" aria-hidden="true" tabindex="-1"></a><span class="vs">## Usage</span></span>
<span id="cb61-83"><a href="#cb61-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-84"><a href="#cb61-84" aria-hidden="true" tabindex="-1"></a><span class="sc">\`\`\`</span><span class="vs">jsx</span></span>
<span id="cb61-85"><a href="#cb61-85" aria-hidden="true" tabindex="-1"></a><span class="vs">import { </span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs"> } from &#39;./components/</span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">&#39;;</span></span>
<span id="cb61-86"><a href="#cb61-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-87"><a href="#cb61-87" aria-hidden="true" tabindex="-1"></a><span class="vs">function MyComponent() {</span></span>
<span id="cb61-88"><a href="#cb61-88" aria-hidden="true" tabindex="-1"></a><span class="vs">  return (</span></span>
<span id="cb61-89"><a href="#cb61-89" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;</span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span></span>
<span id="cb61-90"><a href="#cb61-90" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateUsageExample</span>(component)<span class="sc">}</span></span>
<span id="cb61-91"><a href="#cb61-91" aria-hidden="true" tabindex="-1"></a><span class="vs">    /&gt;</span></span>
<span id="cb61-92"><a href="#cb61-92" aria-hidden="true" tabindex="-1"></a><span class="vs">  );</span></span>
<span id="cb61-93"><a href="#cb61-93" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb61-94"><a href="#cb61-94" aria-hidden="true" tabindex="-1"></a><span class="sc">\`\`\`</span></span>
<span id="cb61-95"><a href="#cb61-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-96"><a href="#cb61-96" aria-hidden="true" tabindex="-1"></a><span class="vs">## Examples</span></span>
<span id="cb61-97"><a href="#cb61-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-98"><a href="#cb61-98" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;Canvas&gt;</span></span>
<span id="cb61-99"><a href="#cb61-99" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;Story of={</span><span class="sc">${</span>component<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">Stories.Default} /&gt;</span></span>
<span id="cb61-100"><a href="#cb61-100" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/Canvas&gt;</span></span>
<span id="cb61-101"><a href="#cb61-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-102"><a href="#cb61-102" aria-hidden="true" tabindex="-1"></a><span class="vs">### Props</span></span>
<span id="cb61-103"><a href="#cb61-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-104"><a href="#cb61-104" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generatePropsDocumentation</span>(component)<span class="sc">}</span></span>
<span id="cb61-105"><a href="#cb61-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-106"><a href="#cb61-106" aria-hidden="true" tabindex="-1"></a><span class="vs">### Accessibility</span></span>
<span id="cb61-107"><a href="#cb61-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-108"><a href="#cb61-108" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateAccessibilityDocumentation</span>(component)<span class="sc">}</span></span>
<span id="cb61-109"><a href="#cb61-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-110"><a href="#cb61-110" aria-hidden="true" tabindex="-1"></a><span class="vs">### Design Tokens</span></span>
<span id="cb61-111"><a href="#cb61-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-112"><a href="#cb61-112" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateDesignTokensDocumentation</span>(component)<span class="sc">}</span></span>
<span id="cb61-113"><a href="#cb61-113" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb61-114"><a href="#cb61-114" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-115"><a href="#cb61-115" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-116"><a href="#cb61-116" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generatePropsDocumentation</span>(component<span class="op">:</span> ComponentInfo)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb61-117"><a href="#cb61-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> component<span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="fu">map</span>(prop <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb61-118"><a href="#cb61-118" aria-hidden="true" tabindex="-1"></a><span class="vs">#### </span><span class="sc">${</span>prop<span class="op">.</span><span class="at">name</span><span class="sc">}</span></span>
<span id="cb61-119"><a href="#cb61-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-120"><a href="#cb61-120" aria-hidden="true" tabindex="-1"></a><span class="vs">- **Type:** </span><span class="sc">\`${</span>prop<span class="op">.</span><span class="at">type</span><span class="sc">}\`</span></span>
<span id="cb61-121"><a href="#cb61-121" aria-hidden="true" tabindex="-1"></a><span class="vs">- **Required:** </span><span class="sc">${</span>prop<span class="op">.</span><span class="at">required</span> <span class="op">?</span> <span class="st">&#39;Yes&#39;</span> <span class="op">:</span> <span class="st">&#39;No&#39;</span><span class="sc">}</span></span>
<span id="cb61-122"><a href="#cb61-122" aria-hidden="true" tabindex="-1"></a><span class="vs">- **Default:** </span><span class="sc">\`${</span>prop<span class="op">.</span><span class="at">defaultValue</span> <span class="op">||</span> <span class="st">&#39;undefined&#39;</span><span class="sc">}\`</span></span>
<span id="cb61-123"><a href="#cb61-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-124"><a href="#cb61-124" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>prop<span class="op">.</span><span class="at">description</span><span class="sc">}</span></span>
<span id="cb61-125"><a href="#cb61-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-126"><a href="#cb61-126" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>prop<span class="op">.</span><span class="at">examples</span> <span class="op">?</span> <span class="vs">`</span></span>
<span id="cb61-127"><a href="#cb61-127" aria-hidden="true" tabindex="-1"></a><span class="vs">**Examples:**</span></span>
<span id="cb61-128"><a href="#cb61-128" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>prop<span class="op">.</span><span class="at">examples</span><span class="op">.</span><span class="fu">map</span>(example <span class="kw">=&gt;</span> <span class="vs">`- </span><span class="sc">\`${</span>example<span class="sc">}\`</span><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)<span class="sc">}</span></span>
<span id="cb61-129"><a href="#cb61-129" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span> <span class="op">:</span> <span class="st">&#39;&#39;</span><span class="sc">}</span></span>
<span id="cb61-130"><a href="#cb61-130" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)<span class="op">;</span></span>
<span id="cb61-131"><a href="#cb61-131" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-132"><a href="#cb61-132" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-133"><a href="#cb61-133" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateAccessibilityDocumentation</span>(component<span class="op">:</span> ComponentInfo)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb61-134"><a href="#cb61-134" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb61-135"><a href="#cb61-135" aria-hidden="true" tabindex="-1"></a><span class="vs">This component follows WCAG 2.1 AA guidelines:</span></span>
<span id="cb61-136"><a href="#cb61-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-137"><a href="#cb61-137" aria-hidden="true" tabindex="-1"></a><span class="vs">- ✅ Keyboard navigation support</span></span>
<span id="cb61-138"><a href="#cb61-138" aria-hidden="true" tabindex="-1"></a><span class="vs">- ✅ Screen reader compatibility  </span></span>
<span id="cb61-139"><a href="#cb61-139" aria-hidden="true" tabindex="-1"></a><span class="vs">- ✅ High contrast mode support</span></span>
<span id="cb61-140"><a href="#cb61-140" aria-hidden="true" tabindex="-1"></a><span class="vs">- ✅ Focus management</span></span>
<span id="cb61-141"><a href="#cb61-141" aria-hidden="true" tabindex="-1"></a><span class="vs">- ✅ ARIA attributes where appropriate</span></span>
<span id="cb61-142"><a href="#cb61-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-143"><a href="#cb61-143" aria-hidden="true" tabindex="-1"></a><span class="vs">**Testing:** Use </span><span class="sc">\`</span><span class="vs">@axe-core/react</span><span class="sc">\`</span><span class="vs"> to test accessibility in your implementation.</span></span>
<span id="cb61-144"><a href="#cb61-144" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb61-145"><a href="#cb61-145" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-146"><a href="#cb61-146" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-147"><a href="#cb61-147" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">generateDesignSystemDocumentation</span>()<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>DesignSystemDocs<span class="op">&gt;</span> {</span>
<span id="cb61-148"><a href="#cb61-148" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> components <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">scanComponents</span>()<span class="op">;</span></span>
<span id="cb61-149"><a href="#cb61-149" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> tokens <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">extractDesignTokens</span>()<span class="op">;</span></span>
<span id="cb61-150"><a href="#cb61-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-151"><a href="#cb61-151" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb61-152"><a href="#cb61-152" aria-hidden="true" tabindex="-1"></a>      overview<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateOverview</span>()<span class="op">,</span></span>
<span id="cb61-153"><a href="#cb61-153" aria-hidden="true" tabindex="-1"></a>      components<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateComponentsIndex</span>(components)<span class="op">,</span></span>
<span id="cb61-154"><a href="#cb61-154" aria-hidden="true" tabindex="-1"></a>      tokens<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateTokensDocumentation</span>(tokens)<span class="op">,</span></span>
<span id="cb61-155"><a href="#cb61-155" aria-hidden="true" tabindex="-1"></a>      guidelines<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateGuidelinesDocumentation</span>()<span class="op">,</span></span>
<span id="cb61-156"><a href="#cb61-156" aria-hidden="true" tabindex="-1"></a>      migration<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateMigrationGuides</span>()<span class="op">,</span></span>
<span id="cb61-157"><a href="#cb61-157" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb61-158"><a href="#cb61-158" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-159"><a href="#cb61-159" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-160"><a href="#cb61-160" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateTokensDocumentation</span>(tokens<span class="op">:</span> DesignTokens)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb61-161"><a href="#cb61-161" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb61-162"><a href="#cb61-162" aria-hidden="true" tabindex="-1"></a><span class="vs"># Design Tokens</span></span>
<span id="cb61-163"><a href="#cb61-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-164"><a href="#cb61-164" aria-hidden="true" tabindex="-1"></a><span class="vs">Design tokens are the visual design atoms of the design system.</span></span>
<span id="cb61-165"><a href="#cb61-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-166"><a href="#cb61-166" aria-hidden="true" tabindex="-1"></a><span class="vs">## Colors</span></span>
<span id="cb61-167"><a href="#cb61-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-168"><a href="#cb61-168" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateColorTokens</span>(tokens<span class="op">.</span><span class="at">colors</span>)<span class="sc">}</span></span>
<span id="cb61-169"><a href="#cb61-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-170"><a href="#cb61-170" aria-hidden="true" tabindex="-1"></a><span class="vs">## Typography</span></span>
<span id="cb61-171"><a href="#cb61-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-172"><a href="#cb61-172" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateTypographyTokens</span>(tokens<span class="op">.</span><span class="at">typography</span>)<span class="sc">}</span></span>
<span id="cb61-173"><a href="#cb61-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-174"><a href="#cb61-174" aria-hidden="true" tabindex="-1"></a><span class="vs">## Spacing</span></span>
<span id="cb61-175"><a href="#cb61-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-176"><a href="#cb61-176" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateSpacingTokens</span>(tokens<span class="op">.</span><span class="at">spacing</span>)<span class="sc">}</span></span>
<span id="cb61-177"><a href="#cb61-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-178"><a href="#cb61-178" aria-hidden="true" tabindex="-1"></a><span class="vs">## Shadows</span></span>
<span id="cb61-179"><a href="#cb61-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-180"><a href="#cb61-180" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateShadowTokens</span>(tokens<span class="op">.</span><span class="at">shadows</span>)<span class="sc">}</span></span>
<span id="cb61-181"><a href="#cb61-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-182"><a href="#cb61-182" aria-hidden="true" tabindex="-1"></a><span class="vs">## Usage in Code</span></span>
<span id="cb61-183"><a href="#cb61-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-184"><a href="#cb61-184" aria-hidden="true" tabindex="-1"></a><span class="sc">\`\`\`</span><span class="vs">jsx</span></span>
<span id="cb61-185"><a href="#cb61-185" aria-hidden="true" tabindex="-1"></a><span class="vs">import { tokens } from &#39;@company/design-tokens&#39;;</span></span>
<span id="cb61-186"><a href="#cb61-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-187"><a href="#cb61-187" aria-hidden="true" tabindex="-1"></a><span class="vs">const MyComponent = () =&gt; (</span></span>
<span id="cb61-188"><a href="#cb61-188" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div</span></span>
<span id="cb61-189"><a href="#cb61-189" aria-hidden="true" tabindex="-1"></a><span class="vs">    style={{</span></span>
<span id="cb61-190"><a href="#cb61-190" aria-hidden="true" tabindex="-1"></a><span class="vs">      color: tokens.colors.primary[500],</span></span>
<span id="cb61-191"><a href="#cb61-191" aria-hidden="true" tabindex="-1"></a><span class="vs">      fontSize: tokens.typography.body.lg.fontSize,</span></span>
<span id="cb61-192"><a href="#cb61-192" aria-hidden="true" tabindex="-1"></a><span class="vs">      padding: tokens.spacing[4],</span></span>
<span id="cb61-193"><a href="#cb61-193" aria-hidden="true" tabindex="-1"></a><span class="vs">      boxShadow: tokens.shadows.md,</span></span>
<span id="cb61-194"><a href="#cb61-194" aria-hidden="true" tabindex="-1"></a><span class="vs">    }}</span></span>
<span id="cb61-195"><a href="#cb61-195" aria-hidden="true" tabindex="-1"></a><span class="vs">  &gt;</span></span>
<span id="cb61-196"><a href="#cb61-196" aria-hidden="true" tabindex="-1"></a><span class="vs">    Content</span></span>
<span id="cb61-197"><a href="#cb61-197" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb61-198"><a href="#cb61-198" aria-hidden="true" tabindex="-1"></a><span class="vs">);</span></span>
<span id="cb61-199"><a href="#cb61-199" aria-hidden="true" tabindex="-1"></a><span class="sc">\`\`\`</span></span>
<span id="cb61-200"><a href="#cb61-200" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb61-201"><a href="#cb61-201" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-202"><a href="#cb61-202" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="knowledge-transfer-strategies">Knowledge Transfer
Strategies</h2>
<h3 id="onboarding-documentation-framework">Onboarding Documentation
Framework</h3>
<div class="sourceCode" id="cb62"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Automated onboarding path generation</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> OnboardingDocumentationGenerator {</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> roleBasedPaths<span class="op">:</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> OnboardingPath<span class="op">&gt;;</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">roleBasedPaths</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>()<span class="op">;</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">initializeRoleBasedPaths</span>()<span class="op">;</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">initializeRoleBasedPaths</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Frontend Developer Path</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">roleBasedPaths</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;frontend-developer&#39;</span><span class="op">,</span> {</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>      role<span class="op">:</span> <span class="st">&#39;Frontend Developer&#39;</span><span class="op">,</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>      estimatedDuration<span class="op">:</span> <span class="st">&#39;2 weeks&#39;</span><span class="op">,</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>      prerequisites<span class="op">:</span> [</span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;React experience (2+ years)&#39;</span><span class="op">,</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;TypeScript knowledge&#39;</span><span class="op">,</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Git proficiency&#39;</span><span class="op">,</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>      milestones<span class="op">:</span> [</span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a>          day<span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>          title<span class="op">:</span> <span class="st">&#39;Environment Setup&#39;</span><span class="op">,</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a>          tasks<span class="op">:</span> [</span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Set up development environment&#39;</span><span class="op">,</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Clone repositories and run local setup&#39;</span><span class="op">,</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Complete security training&#39;</span><span class="op">,</span></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Join team communication channels&#39;</span><span class="op">,</span></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a>          deliverables<span class="op">:</span> [</span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Local development environment running&#39;</span><span class="op">,</span></span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;First commit to test repository&#39;</span><span class="op">,</span></span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Security training certificate&#39;</span><span class="op">,</span></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a>          day<span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a>          title<span class="op">:</span> <span class="st">&#39;Codebase Overview&#39;</span><span class="op">,</span></span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a>          tasks<span class="op">:</span> [</span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Architecture walkthrough with mentor&#39;</span><span class="op">,</span></span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Review coding standards and guidelines&#39;</span><span class="op">,</span></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Explore design system and component library&#39;</span><span class="op">,</span></span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Understand testing strategies&#39;</span><span class="op">,</span></span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a>          deliverables<span class="op">:</span> [</span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Architecture understanding quiz (80%+ score)&#39;</span><span class="op">,</span></span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Code review of sample pull request&#39;</span><span class="op">,</span></span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a>          day<span class="op">:</span> <span class="dv">3</span><span class="op">-</span><span class="dv">5</span><span class="op">,</span></span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a>          title<span class="op">:</span> <span class="st">&#39;First Feature Implementation&#39;</span><span class="op">,</span></span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a>          tasks<span class="op">:</span> [</span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Pick up first ticket (good first issue)&#39;</span><span class="op">,</span></span>
<span id="cb62-55"><a href="#cb62-55" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Implement feature following TDD practices&#39;</span><span class="op">,</span></span>
<span id="cb62-56"><a href="#cb62-56" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Write comprehensive tests&#39;</span><span class="op">,</span></span>
<span id="cb62-57"><a href="#cb62-57" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Create pull request following guidelines&#39;</span><span class="op">,</span></span>
<span id="cb62-58"><a href="#cb62-58" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-59"><a href="#cb62-59" aria-hidden="true" tabindex="-1"></a>          deliverables<span class="op">:</span> [</span>
<span id="cb62-60"><a href="#cb62-60" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Feature implementation with tests&#39;</span><span class="op">,</span></span>
<span id="cb62-61"><a href="#cb62-61" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Peer-reviewed pull request&#39;</span><span class="op">,</span></span>
<span id="cb62-62"><a href="#cb62-62" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Demo to team&#39;</span><span class="op">,</span></span>
<span id="cb62-63"><a href="#cb62-63" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-64"><a href="#cb62-64" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb62-65"><a href="#cb62-65" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb62-66"><a href="#cb62-66" aria-hidden="true" tabindex="-1"></a>          day<span class="op">:</span> <span class="dv">6</span><span class="op">-</span><span class="dv">10</span><span class="op">,</span></span>
<span id="cb62-67"><a href="#cb62-67" aria-hidden="true" tabindex="-1"></a>          title<span class="op">:</span> <span class="st">&#39;Integration and Collaboration&#39;</span><span class="op">,</span></span>
<span id="cb62-68"><a href="#cb62-68" aria-hidden="true" tabindex="-1"></a>          tasks<span class="op">:</span> [</span>
<span id="cb62-69"><a href="#cb62-69" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Participate in sprint planning&#39;</span><span class="op">,</span></span>
<span id="cb62-70"><a href="#cb62-70" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Conduct code reviews for peers&#39;</span><span class="op">,</span></span>
<span id="cb62-71"><a href="#cb62-71" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Contribute to documentation&#39;</span><span class="op">,</span></span>
<span id="cb62-72"><a href="#cb62-72" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Attend architecture discussions&#39;</span><span class="op">,</span></span>
<span id="cb62-73"><a href="#cb62-73" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-74"><a href="#cb62-74" aria-hidden="true" tabindex="-1"></a>          deliverables<span class="op">:</span> [</span>
<span id="cb62-75"><a href="#cb62-75" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Two completed features&#39;</span><span class="op">,</span></span>
<span id="cb62-76"><a href="#cb62-76" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Three meaningful code reviews&#39;</span><span class="op">,</span></span>
<span id="cb62-77"><a href="#cb62-77" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Documentation contribution&#39;</span><span class="op">,</span></span>
<span id="cb62-78"><a href="#cb62-78" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">,</span></span>
<span id="cb62-79"><a href="#cb62-79" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb62-80"><a href="#cb62-80" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb62-81"><a href="#cb62-81" aria-hidden="true" tabindex="-1"></a>      resources<span class="op">:</span> [</span>
<span id="cb62-82"><a href="#cb62-82" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb62-83"><a href="#cb62-83" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;documentation&#39;</span><span class="op">,</span></span>
<span id="cb62-84"><a href="#cb62-84" aria-hidden="true" tabindex="-1"></a>          title<span class="op">:</span> <span class="st">&#39;Frontend Architecture Guide&#39;</span><span class="op">,</span></span>
<span id="cb62-85"><a href="#cb62-85" aria-hidden="true" tabindex="-1"></a>          url<span class="op">:</span> <span class="st">&#39;/docs/architecture/frontend&#39;</span><span class="op">,</span></span>
<span id="cb62-86"><a href="#cb62-86" aria-hidden="true" tabindex="-1"></a>          importance<span class="op">:</span> <span class="st">&#39;critical&#39;</span><span class="op">,</span></span>
<span id="cb62-87"><a href="#cb62-87" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb62-88"><a href="#cb62-88" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb62-89"><a href="#cb62-89" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;video&#39;</span><span class="op">,</span></span>
<span id="cb62-90"><a href="#cb62-90" aria-hidden="true" tabindex="-1"></a>          title<span class="op">:</span> <span class="st">&#39;Codebase Walkthrough&#39;</span><span class="op">,</span></span>
<span id="cb62-91"><a href="#cb62-91" aria-hidden="true" tabindex="-1"></a>          url<span class="op">:</span> <span class="st">&#39;/videos/codebase-overview&#39;</span><span class="op">,</span></span>
<span id="cb62-92"><a href="#cb62-92" aria-hidden="true" tabindex="-1"></a>          importance<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb62-93"><a href="#cb62-93" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb62-94"><a href="#cb62-94" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb62-95"><a href="#cb62-95" aria-hidden="true" tabindex="-1"></a>          type<span class="op">:</span> <span class="st">&#39;interactive&#39;</span><span class="op">,</span></span>
<span id="cb62-96"><a href="#cb62-96" aria-hidden="true" tabindex="-1"></a>          title<span class="op">:</span> <span class="st">&#39;Code Review Simulator&#39;</span><span class="op">,</span></span>
<span id="cb62-97"><a href="#cb62-97" aria-hidden="true" tabindex="-1"></a>          url<span class="op">:</span> <span class="st">&#39;/training/code-review&#39;</span><span class="op">,</span></span>
<span id="cb62-98"><a href="#cb62-98" aria-hidden="true" tabindex="-1"></a>          importance<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb62-99"><a href="#cb62-99" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb62-100"><a href="#cb62-100" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb62-101"><a href="#cb62-101" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb62-102"><a href="#cb62-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-103"><a href="#cb62-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Similar paths for other roles...</span></span>
<span id="cb62-104"><a href="#cb62-104" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-105"><a href="#cb62-105" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-106"><a href="#cb62-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateOnboardingChecklist</span>(role<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> employeeName<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> OnboardingChecklist {</span>
<span id="cb62-107"><a href="#cb62-107" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> path <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">roleBasedPaths</span><span class="op">.</span><span class="fu">get</span>(role)<span class="op">;</span></span>
<span id="cb62-108"><a href="#cb62-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-109"><a href="#cb62-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>path) {</span>
<span id="cb62-110"><a href="#cb62-110" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`No onboarding path found for role: </span><span class="sc">${</span>role<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb62-111"><a href="#cb62-111" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb62-112"><a href="#cb62-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-113"><a href="#cb62-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb62-114"><a href="#cb62-114" aria-hidden="true" tabindex="-1"></a>      employee<span class="op">:</span> employeeName<span class="op">,</span></span>
<span id="cb62-115"><a href="#cb62-115" aria-hidden="true" tabindex="-1"></a>      role<span class="op">,</span></span>
<span id="cb62-116"><a href="#cb62-116" aria-hidden="true" tabindex="-1"></a>      startDate<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb62-117"><a href="#cb62-117" aria-hidden="true" tabindex="-1"></a>      estimatedCompletion<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateCompletionDate</span>(path<span class="op">.</span><span class="at">estimatedDuration</span>)<span class="op">,</span></span>
<span id="cb62-118"><a href="#cb62-118" aria-hidden="true" tabindex="-1"></a>      milestones<span class="op">:</span> path<span class="op">.</span><span class="at">milestones</span><span class="op">.</span><span class="fu">map</span>(milestone <span class="kw">=&gt;</span> ({</span>
<span id="cb62-119"><a href="#cb62-119" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span>milestone<span class="op">,</span></span>
<span id="cb62-120"><a href="#cb62-120" aria-hidden="true" tabindex="-1"></a>        completed<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb62-121"><a href="#cb62-121" aria-hidden="true" tabindex="-1"></a>        tasks<span class="op">:</span> milestone<span class="op">.</span><span class="at">tasks</span><span class="op">.</span><span class="fu">map</span>(task <span class="kw">=&gt;</span> ({</span>
<span id="cb62-122"><a href="#cb62-122" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> task<span class="op">,</span></span>
<span id="cb62-123"><a href="#cb62-123" aria-hidden="true" tabindex="-1"></a>          completed<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb62-124"><a href="#cb62-124" aria-hidden="true" tabindex="-1"></a>          completedDate<span class="op">:</span> <span class="dt">null</span><span class="op">,</span></span>
<span id="cb62-125"><a href="#cb62-125" aria-hidden="true" tabindex="-1"></a>          notes<span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></span>
<span id="cb62-126"><a href="#cb62-126" aria-hidden="true" tabindex="-1"></a>        }))<span class="op">,</span></span>
<span id="cb62-127"><a href="#cb62-127" aria-hidden="true" tabindex="-1"></a>        deliverables<span class="op">:</span> milestone<span class="op">.</span><span class="at">deliverables</span><span class="op">.</span><span class="fu">map</span>(deliverable <span class="kw">=&gt;</span> ({</span>
<span id="cb62-128"><a href="#cb62-128" aria-hidden="true" tabindex="-1"></a>          description<span class="op">:</span> deliverable<span class="op">,</span></span>
<span id="cb62-129"><a href="#cb62-129" aria-hidden="true" tabindex="-1"></a>          submitted<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb62-130"><a href="#cb62-130" aria-hidden="true" tabindex="-1"></a>          approved<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb62-131"><a href="#cb62-131" aria-hidden="true" tabindex="-1"></a>          feedback<span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></span>
<span id="cb62-132"><a href="#cb62-132" aria-hidden="true" tabindex="-1"></a>        }))<span class="op">,</span></span>
<span id="cb62-133"><a href="#cb62-133" aria-hidden="true" tabindex="-1"></a>      }))<span class="op">,</span></span>
<span id="cb62-134"><a href="#cb62-134" aria-hidden="true" tabindex="-1"></a>      resources<span class="op">:</span> path<span class="op">.</span><span class="at">resources</span><span class="op">,</span></span>
<span id="cb62-135"><a href="#cb62-135" aria-hidden="true" tabindex="-1"></a>      mentor<span class="op">:</span> <span class="dt">null</span><span class="op">,</span> <span class="co">// Assigned later</span></span>
<span id="cb62-136"><a href="#cb62-136" aria-hidden="true" tabindex="-1"></a>      progress<span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb62-137"><a href="#cb62-137" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb62-138"><a href="#cb62-138" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-139"><a href="#cb62-139" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-140"><a href="#cb62-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">trackProgress</span>(checklistId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> updates<span class="op">:</span> ProgressUpdate[])<span class="op">:</span> OnboardingProgress {</span>
<span id="cb62-141"><a href="#cb62-141" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> checklist <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getChecklist</span>(checklistId)<span class="op">;</span></span>
<span id="cb62-142"><a href="#cb62-142" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-143"><a href="#cb62-143" aria-hidden="true" tabindex="-1"></a>    updates<span class="op">.</span><span class="fu">forEach</span>(update <span class="kw">=&gt;</span> {</span>
<span id="cb62-144"><a href="#cb62-144" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">applyUpdate</span>(checklist<span class="op">,</span> update)<span class="op">;</span></span>
<span id="cb62-145"><a href="#cb62-145" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb62-146"><a href="#cb62-146" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-147"><a href="#cb62-147" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> progress <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateProgress</span>(checklist)<span class="op">;</span></span>
<span id="cb62-148"><a href="#cb62-148" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-149"><a href="#cb62-149" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate next steps</span></span>
<span id="cb62-150"><a href="#cb62-150" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> nextSteps <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateNextSteps</span>(checklist)<span class="op">;</span></span>
<span id="cb62-151"><a href="#cb62-151" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-152"><a href="#cb62-152" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for blockers</span></span>
<span id="cb62-153"><a href="#cb62-153" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> blockers <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">identifyBlockers</span>(checklist)<span class="op">;</span></span>
<span id="cb62-154"><a href="#cb62-154" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-155"><a href="#cb62-155" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb62-156"><a href="#cb62-156" aria-hidden="true" tabindex="-1"></a>      checklistId<span class="op">,</span></span>
<span id="cb62-157"><a href="#cb62-157" aria-hidden="true" tabindex="-1"></a>      progress<span class="op">,</span></span>
<span id="cb62-158"><a href="#cb62-158" aria-hidden="true" tabindex="-1"></a>      nextSteps<span class="op">,</span></span>
<span id="cb62-159"><a href="#cb62-159" aria-hidden="true" tabindex="-1"></a>      blockers<span class="op">,</span></span>
<span id="cb62-160"><a href="#cb62-160" aria-hidden="true" tabindex="-1"></a>      lastUpdated<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb62-161"><a href="#cb62-161" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb62-162"><a href="#cb62-162" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-163"><a href="#cb62-163" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-164"><a href="#cb62-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generatePersonalizedLearningPath</span>(</span>
<span id="cb62-165"><a href="#cb62-165" aria-hidden="true" tabindex="-1"></a>    employee<span class="op">:</span> Employee<span class="op">,</span></span>
<span id="cb62-166"><a href="#cb62-166" aria-hidden="true" tabindex="-1"></a>    role<span class="op">:</span> <span class="dt">string</span><span class="op">,</span></span>
<span id="cb62-167"><a href="#cb62-167" aria-hidden="true" tabindex="-1"></a>    skillAssessment<span class="op">:</span> SkillAssessment</span>
<span id="cb62-168"><a href="#cb62-168" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> PersonalizedLearningPath {</span>
<span id="cb62-169"><a href="#cb62-169" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> basePath <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">roleBasedPaths</span><span class="op">.</span><span class="fu">get</span>(role)<span class="op">;</span></span>
<span id="cb62-170"><a href="#cb62-170" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> skillGaps <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">identifySkillGaps</span>(skillAssessment<span class="op">,</span> role)<span class="op">;</span></span>
<span id="cb62-171"><a href="#cb62-171" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-172"><a href="#cb62-172" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb62-173"><a href="#cb62-173" aria-hidden="true" tabindex="-1"></a>      employee<span class="op">:</span> employee<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb62-174"><a href="#cb62-174" aria-hidden="true" tabindex="-1"></a>      customizedMilestones<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">customizeMilestones</span>(basePath<span class="op">?.</span><span class="at">milestones</span> <span class="op">||</span> []<span class="op">,</span> skillGaps)<span class="op">,</span></span>
<span id="cb62-175"><a href="#cb62-175" aria-hidden="true" tabindex="-1"></a>      additionalResources<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">recommendAdditionalResources</span>(skillGaps)<span class="op">,</span></span>
<span id="cb62-176"><a href="#cb62-176" aria-hidden="true" tabindex="-1"></a>      acceleratedTracks<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">identifyAcceleratedTracks</span>(skillAssessment)<span class="op">,</span></span>
<span id="cb62-177"><a href="#cb62-177" aria-hidden="true" tabindex="-1"></a>      mentorMatch<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">findOptimalMentor</span>(employee<span class="op">,</span> skillGaps)<span class="op">,</span></span>
<span id="cb62-178"><a href="#cb62-178" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb62-179"><a href="#cb62-179" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-180"><a href="#cb62-180" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="technical-decision-documentation">Technical Decision
Documentation</h3>
<div class="sourceCode" id="cb63"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Architecture Decision Records (ADRs) automation</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ArchitectureDecisionRecords {</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> adrTemplate<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> decisions<span class="op">:</span> ADR[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">adrTemplate</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">loadADRTemplate</span>()<span class="op">;</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">createADR</span>(decision<span class="op">:</span> DecisionInput)<span class="op">:</span> ADR {</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> adrNumber <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getNextADRNumber</span>()<span class="op">;</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> adr<span class="op">:</span> ADR <span class="op">=</span> {</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>      number<span class="op">:</span> adrNumber<span class="op">,</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>      title<span class="op">:</span> decision<span class="op">.</span><span class="at">title</span><span class="op">,</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>      status<span class="op">:</span> <span class="st">&#39;proposed&#39;</span><span class="op">,</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>      date<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">,</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>      deciders<span class="op">:</span> decision<span class="op">.</span><span class="at">deciders</span><span class="op">,</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>      consulted<span class="op">:</span> decision<span class="op">.</span><span class="at">consulted</span> <span class="op">||</span> []<span class="op">,</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>      informed<span class="op">:</span> decision<span class="op">.</span><span class="at">informed</span> <span class="op">||</span> []<span class="op">,</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>      context<span class="op">:</span> decision<span class="op">.</span><span class="at">context</span><span class="op">,</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>      decision<span class="op">:</span> decision<span class="op">.</span><span class="at">decision</span><span class="op">,</span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>      consequences<span class="op">:</span> decision<span class="op">.</span><span class="at">consequences</span><span class="op">,</span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>      alternatives<span class="op">:</span> decision<span class="op">.</span><span class="at">alternatives</span> <span class="op">||</span> []<span class="op">,</span></span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>      rationale<span class="op">:</span> decision<span class="op">.</span><span class="at">rationale</span><span class="op">,</span></span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>      tags<span class="op">:</span> decision<span class="op">.</span><span class="at">tags</span> <span class="op">||</span> []<span class="op">,</span></span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>      relatedADRs<span class="op">:</span> decision<span class="op">.</span><span class="at">relatedADRs</span> <span class="op">||</span> []<span class="op">,</span></span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">decisions</span><span class="op">.</span><span class="fu">push</span>(adr)<span class="op">;</span></span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">generateADRDocument</span>(adr)<span class="op">;</span></span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> adr<span class="op">;</span></span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb63-35"><a href="#cb63-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-36"><a href="#cb63-36" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">generateADRDocument</span>(adr<span class="op">:</span> ADR)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb63-37"><a href="#cb63-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb63-38"><a href="#cb63-38" aria-hidden="true" tabindex="-1"></a><span class="vs"># ADR-</span><span class="sc">${</span>adr<span class="op">.</span><span class="at">number</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">&#39;0&#39;</span>)<span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">title</span><span class="sc">}</span></span>
<span id="cb63-39"><a href="#cb63-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-40"><a href="#cb63-40" aria-hidden="true" tabindex="-1"></a><span class="vs">**Status:** </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">status</span><span class="op">.</span><span class="fu">toUpperCase</span>()<span class="sc">}</span><span class="vs">  </span></span>
<span id="cb63-41"><a href="#cb63-41" aria-hidden="true" tabindex="-1"></a><span class="vs">**Date:** </span><span class="sc">${</span><span class="kw">new</span> <span class="bu">Date</span>(adr<span class="op">.</span><span class="at">date</span>)<span class="op">.</span><span class="fu">toLocaleDateString</span>()<span class="sc">}</span><span class="vs">  </span></span>
<span id="cb63-42"><a href="#cb63-42" aria-hidden="true" tabindex="-1"></a><span class="vs">**Deciders:** </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">deciders</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;, &#39;</span>)<span class="sc">}</span><span class="vs">  </span></span>
<span id="cb63-43"><a href="#cb63-43" aria-hidden="true" tabindex="-1"></a><span class="vs">**Tags:** </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">tags</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;, &#39;</span>)<span class="sc">}</span></span>
<span id="cb63-44"><a href="#cb63-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-45"><a href="#cb63-45" aria-hidden="true" tabindex="-1"></a><span class="vs">## Context</span></span>
<span id="cb63-46"><a href="#cb63-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-47"><a href="#cb63-47" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">context</span><span class="sc">}</span></span>
<span id="cb63-48"><a href="#cb63-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-49"><a href="#cb63-49" aria-hidden="true" tabindex="-1"></a><span class="vs">## Decision</span></span>
<span id="cb63-50"><a href="#cb63-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-51"><a href="#cb63-51" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">decision</span><span class="sc">}</span></span>
<span id="cb63-52"><a href="#cb63-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-53"><a href="#cb63-53" aria-hidden="true" tabindex="-1"></a><span class="vs">## Rationale</span></span>
<span id="cb63-54"><a href="#cb63-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-55"><a href="#cb63-55" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">rationale</span><span class="sc">}</span></span>
<span id="cb63-56"><a href="#cb63-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-57"><a href="#cb63-57" aria-hidden="true" tabindex="-1"></a><span class="vs">## Consequences</span></span>
<span id="cb63-58"><a href="#cb63-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-59"><a href="#cb63-59" aria-hidden="true" tabindex="-1"></a><span class="vs">### Positive</span></span>
<span id="cb63-60"><a href="#cb63-60" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">consequences</span><span class="op">.</span><span class="at">positive</span><span class="op">?.</span><span class="fu">map</span>(c <span class="kw">=&gt;</span> <span class="vs">`- </span><span class="sc">${</span>c<span class="sc">}</span><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>) <span class="op">||</span> <span class="st">&#39;None documented&#39;</span><span class="sc">}</span></span>
<span id="cb63-61"><a href="#cb63-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-62"><a href="#cb63-62" aria-hidden="true" tabindex="-1"></a><span class="vs">### Negative</span></span>
<span id="cb63-63"><a href="#cb63-63" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">consequences</span><span class="op">.</span><span class="at">negative</span><span class="op">?.</span><span class="fu">map</span>(c <span class="kw">=&gt;</span> <span class="vs">`- </span><span class="sc">${</span>c<span class="sc">}</span><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>) <span class="op">||</span> <span class="st">&#39;None documented&#39;</span><span class="sc">}</span></span>
<span id="cb63-64"><a href="#cb63-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-65"><a href="#cb63-65" aria-hidden="true" tabindex="-1"></a><span class="vs">### Neutral</span></span>
<span id="cb63-66"><a href="#cb63-66" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">consequences</span><span class="op">.</span><span class="at">neutral</span><span class="op">?.</span><span class="fu">map</span>(c <span class="kw">=&gt;</span> <span class="vs">`- </span><span class="sc">${</span>c<span class="sc">}</span><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>) <span class="op">||</span> <span class="st">&#39;None documented&#39;</span><span class="sc">}</span></span>
<span id="cb63-67"><a href="#cb63-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-68"><a href="#cb63-68" aria-hidden="true" tabindex="-1"></a><span class="vs">## Alternatives Considered</span></span>
<span id="cb63-69"><a href="#cb63-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-70"><a href="#cb63-70" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">alternatives</span><span class="op">.</span><span class="fu">map</span>((alt<span class="op">,</span> index) <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb63-71"><a href="#cb63-71" aria-hidden="true" tabindex="-1"></a><span class="vs">### Alternative </span><span class="sc">${</span>index <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>alt<span class="op">.</span><span class="at">title</span><span class="sc">}</span></span>
<span id="cb63-72"><a href="#cb63-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-73"><a href="#cb63-73" aria-hidden="true" tabindex="-1"></a><span class="vs">**Description:** </span><span class="sc">${</span>alt<span class="op">.</span><span class="at">description</span><span class="sc">}</span></span>
<span id="cb63-74"><a href="#cb63-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-75"><a href="#cb63-75" aria-hidden="true" tabindex="-1"></a><span class="vs">**Pros:**</span></span>
<span id="cb63-76"><a href="#cb63-76" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>alt<span class="op">.</span><span class="at">pros</span><span class="op">?.</span><span class="fu">map</span>(pro <span class="kw">=&gt;</span> <span class="vs">`- </span><span class="sc">${</span>pro<span class="sc">}</span><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>) <span class="op">||</span> <span class="st">&#39;None documented&#39;</span><span class="sc">}</span></span>
<span id="cb63-77"><a href="#cb63-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-78"><a href="#cb63-78" aria-hidden="true" tabindex="-1"></a><span class="vs">**Cons:**</span></span>
<span id="cb63-79"><a href="#cb63-79" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>alt<span class="op">.</span><span class="at">cons</span><span class="op">?.</span><span class="fu">map</span>(con <span class="kw">=&gt;</span> <span class="vs">`- </span><span class="sc">${</span>con<span class="sc">}</span><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>) <span class="op">||</span> <span class="st">&#39;None documented&#39;</span><span class="sc">}</span></span>
<span id="cb63-80"><a href="#cb63-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-81"><a href="#cb63-81" aria-hidden="true" tabindex="-1"></a><span class="vs">**Why not chosen:** </span><span class="sc">${</span>alt<span class="op">.</span><span class="at">whyNotChosen</span><span class="sc">}</span></span>
<span id="cb63-82"><a href="#cb63-82" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)<span class="sc">}</span></span>
<span id="cb63-83"><a href="#cb63-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-84"><a href="#cb63-84" aria-hidden="true" tabindex="-1"></a><span class="vs">## Implementation</span></span>
<span id="cb63-85"><a href="#cb63-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-86"><a href="#cb63-86" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">implementation</span> <span class="op">||</span> <span class="st">&#39;Implementation details to be added&#39;</span><span class="sc">}</span></span>
<span id="cb63-87"><a href="#cb63-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-88"><a href="#cb63-88" aria-hidden="true" tabindex="-1"></a><span class="vs">## Validation</span></span>
<span id="cb63-89"><a href="#cb63-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-90"><a href="#cb63-90" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">validation</span> <span class="op">||</span> <span class="st">&#39;Validation criteria to be defined&#39;</span><span class="sc">}</span></span>
<span id="cb63-91"><a href="#cb63-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-92"><a href="#cb63-92" aria-hidden="true" tabindex="-1"></a><span class="vs">## Related ADRs</span></span>
<span id="cb63-93"><a href="#cb63-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-94"><a href="#cb63-94" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>adr<span class="op">.</span><span class="at">relatedADRs</span><span class="op">.</span><span class="fu">map</span>(related <span class="kw">=&gt;</span> <span class="vs">`- [ADR-</span><span class="sc">${</span>related<span class="op">.</span><span class="at">number</span><span class="sc">}</span><span class="vs">](./adr-</span><span class="sc">${</span>related<span class="op">.</span><span class="at">number</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">&#39;0&#39;</span>)<span class="sc">}</span><span class="vs">.md): </span><span class="sc">${</span>related<span class="op">.</span><span class="at">title</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)<span class="sc">}</span></span>
<span id="cb63-95"><a href="#cb63-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-96"><a href="#cb63-96" aria-hidden="true" tabindex="-1"></a><span class="vs">---</span></span>
<span id="cb63-97"><a href="#cb63-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-98"><a href="#cb63-98" aria-hidden="true" tabindex="-1"></a><span class="vs">**Consulted:** </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">consulted</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;, &#39;</span>)<span class="sc">}</span><span class="vs">  </span></span>
<span id="cb63-99"><a href="#cb63-99" aria-hidden="true" tabindex="-1"></a><span class="vs">**Informed:** </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">informed</span><span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;, &#39;</span>)<span class="sc">}</span></span>
<span id="cb63-100"><a href="#cb63-100" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb63-101"><a href="#cb63-101" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb63-102"><a href="#cb63-102" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-103"><a href="#cb63-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateADRIndex</span>()<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb63-104"><a href="#cb63-104" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sortedADRs <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">decisions</span><span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">number</span> <span class="op">-</span> a<span class="op">.</span><span class="at">number</span>)<span class="op">;</span></span>
<span id="cb63-105"><a href="#cb63-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb63-106"><a href="#cb63-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb63-107"><a href="#cb63-107" aria-hidden="true" tabindex="-1"></a><span class="vs"># Architecture Decision Records</span></span>
<span id="cb63-108"><a href="#cb63-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-109"><a href="#cb63-109" aria-hidden="true" tabindex="-1"></a><span class="vs">This directory contains all architecture decision records (ADRs) for the project.</span></span>
<span id="cb63-110"><a href="#cb63-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-111"><a href="#cb63-111" aria-hidden="true" tabindex="-1"></a><span class="vs">## Quick Reference</span></span>
<span id="cb63-112"><a href="#cb63-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-113"><a href="#cb63-113" aria-hidden="true" tabindex="-1"></a><span class="vs">| Number | Title | Status | Date |</span></span>
<span id="cb63-114"><a href="#cb63-114" aria-hidden="true" tabindex="-1"></a><span class="vs">|--------|-------|--------|------|</span></span>
<span id="cb63-115"><a href="#cb63-115" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>sortedADRs<span class="op">.</span><span class="fu">map</span>(adr <span class="kw">=&gt;</span> </span>
<span id="cb63-116"><a href="#cb63-116" aria-hidden="true" tabindex="-1"></a>  <span class="vs">`| [</span><span class="sc">${</span>adr<span class="op">.</span><span class="at">number</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">&#39;0&#39;</span>)<span class="sc">}</span><span class="vs">](./adr-</span><span class="sc">${</span>adr<span class="op">.</span><span class="at">number</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">&#39;0&#39;</span>)<span class="sc">}</span><span class="vs">.md) | </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">title</span><span class="sc">}</span><span class="vs"> | </span><span class="sc">${</span>adr<span class="op">.</span><span class="at">status</span><span class="sc">}</span><span class="vs"> | </span><span class="sc">${</span><span class="kw">new</span> <span class="bu">Date</span>(adr<span class="op">.</span><span class="at">date</span>)<span class="op">.</span><span class="fu">toLocaleDateString</span>()<span class="sc">}</span><span class="vs"> |`</span></span>
<span id="cb63-117"><a href="#cb63-117" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)<span class="sc">}</span></span>
<span id="cb63-118"><a href="#cb63-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-119"><a href="#cb63-119" aria-hidden="true" tabindex="-1"></a><span class="vs">## Status Summary</span></span>
<span id="cb63-120"><a href="#cb63-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-121"><a href="#cb63-121" aria-hidden="true" tabindex="-1"></a><span class="vs">- **Proposed:** </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">getCountByStatus</span>(<span class="st">&#39;proposed&#39;</span>)<span class="sc">}</span></span>
<span id="cb63-122"><a href="#cb63-122" aria-hidden="true" tabindex="-1"></a><span class="vs">- **Accepted:** </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">getCountByStatus</span>(<span class="st">&#39;accepted&#39;</span>)<span class="sc">}</span></span>
<span id="cb63-123"><a href="#cb63-123" aria-hidden="true" tabindex="-1"></a><span class="vs">- **Superseded:** </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">getCountByStatus</span>(<span class="st">&#39;superseded&#39;</span>)<span class="sc">}</span></span>
<span id="cb63-124"><a href="#cb63-124" aria-hidden="true" tabindex="-1"></a><span class="vs">- **Deprecated:** </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">getCountByStatus</span>(<span class="st">&#39;deprecated&#39;</span>)<span class="sc">}</span></span>
<span id="cb63-125"><a href="#cb63-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-126"><a href="#cb63-126" aria-hidden="true" tabindex="-1"></a><span class="vs">## By Category</span></span>
<span id="cb63-127"><a href="#cb63-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-128"><a href="#cb63-128" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateCategoryIndex</span>()<span class="sc">}</span></span>
<span id="cb63-129"><a href="#cb63-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-130"><a href="#cb63-130" aria-hidden="true" tabindex="-1"></a><span class="vs">## Search</span></span>
<span id="cb63-131"><a href="#cb63-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-132"><a href="#cb63-132" aria-hidden="true" tabindex="-1"></a><span class="vs">Use the following tags to find relevant ADRs:</span></span>
<span id="cb63-133"><a href="#cb63-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-134"><a href="#cb63-134" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="fu">generateTagIndex</span>()<span class="sc">}</span></span>
<span id="cb63-135"><a href="#cb63-135" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb63-136"><a href="#cb63-136" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb63-137"><a href="#cb63-137" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-138"><a href="#cb63-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">suggestRelatedADRs</span>(decision<span class="op">:</span> DecisionInput)<span class="op">:</span> ADR[] {</span>
<span id="cb63-139"><a href="#cb63-139" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">decisions</span><span class="op">.</span><span class="fu">filter</span>(adr <span class="kw">=&gt;</span> {</span>
<span id="cb63-140"><a href="#cb63-140" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check for overlapping tags</span></span>
<span id="cb63-141"><a href="#cb63-141" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> commonTags <span class="op">=</span> decision<span class="op">.</span><span class="at">tags</span><span class="op">?.</span><span class="fu">filter</span>(tag <span class="kw">=&gt;</span> adr<span class="op">.</span><span class="at">tags</span><span class="op">.</span><span class="fu">includes</span>(tag)) <span class="op">||</span> []<span class="op">;</span></span>
<span id="cb63-142"><a href="#cb63-142" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb63-143"><a href="#cb63-143" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check for similar context keywords</span></span>
<span id="cb63-144"><a href="#cb63-144" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> contextSimilarity <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateContextSimilarity</span>(decision<span class="op">.</span><span class="at">context</span><span class="op">,</span> adr<span class="op">.</span><span class="at">context</span>)<span class="op">;</span></span>
<span id="cb63-145"><a href="#cb63-145" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb63-146"><a href="#cb63-146" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check for related technology mentions</span></span>
<span id="cb63-147"><a href="#cb63-147" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> technologyOverlap <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">checkTechnologyOverlap</span>(decision<span class="op">,</span> adr)<span class="op">;</span></span>
<span id="cb63-148"><a href="#cb63-148" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb63-149"><a href="#cb63-149" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> commonTags<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">||</span> contextSimilarity <span class="op">&gt;</span> <span class="fl">0.3</span> <span class="op">||</span> technologyOverlap<span class="op">;</span></span>
<span id="cb63-150"><a href="#cb63-150" aria-hidden="true" tabindex="-1"></a>    })<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span> <span class="co">// Return top 5 related ADRs</span></span>
<span id="cb63-151"><a href="#cb63-151" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb63-152"><a href="#cb63-152" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="common-documentation-anti-patterns">⚠️ Common Documentation
Anti-Patterns</h2>
<h3 id="anti-pattern-1-documentation-debt">Anti-Pattern #1:
Documentation Debt</h3>
<p><strong>Problem</strong>: Documentation falls behind code changes and
becomes misleading <strong>Solution</strong>: Integrate documentation
updates into DoD and CI/CD</p>
<h3 id="anti-pattern-2-write-only-documentation">Anti-Pattern #2:
Write-Only Documentation</h3>
<p><strong>Problem</strong>: Documentation is written but never read or
maintained <strong>Solution</strong>: Track documentation usage and
gather feedback</p>
<h3 id="anti-pattern-3-over-documentation">Anti-Pattern #3:
Over-Documentation</h3>
<p><strong>Problem</strong>: Documenting every implementation detail
instead of focusing on decisions and why <strong>Solution</strong>:
Document decisions, architecture, and “why”, not implementation
details</p>
<h3 id="anti-pattern-4-single-audience-documentation">Anti-Pattern #4:
Single-Audience Documentation</h3>
<p><strong>Problem</strong>: All documentation written for one audience
(usually developers) <strong>Solution</strong>: Create role-specific
documentation with appropriate detail levels</p>
<hr />
<h1 id="chapter-9-team-workflow-collaboration">Chapter 9: Team Workflow
&amp; Collaboration 🟡</h1>
<p><em>Pages 80-90</em></p>
<h2 id="modern-git-workflows-for-enterprise">Modern Git Workflows for
Enterprise</h2>
<p>Git workflows in enterprise environments must balance developer
velocity with code quality, security, and compliance requirements.</p>
<h3 id="key-insight-workflow-as-code">💡 Key Insight: Workflow as
Code</h3>
<p>Modern teams treat their development workflow as infrastructure: -
<strong>Version controlled</strong> configuration - <strong>Automated
enforcement</strong> of policies - <strong>Observable and
measurable</strong> processes - <strong>Continuously improved</strong>
based on metrics</p>
<h2 id="advanced-git-flow-implementation">Advanced Git Flow
Implementation</h2>
<h3 id="git-flow-with-automated-quality-gates">Git Flow with Automated
Quality Gates</h3>
<div class="sourceCode" id="cb64"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Git workflow automation and enforcement</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> GitWorkflowManager {</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> config<span class="op">:</span> GitWorkflowConfig<span class="op">;</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> qualityGates<span class="op">:</span> QualityGate[]<span class="op">;</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(config<span class="op">:</span> GitWorkflowConfig) {</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">config</span> <span class="op">=</span> config<span class="op">;</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">qualityGates</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">initializeQualityGates</span>()<span class="op">;</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">createFeatureBranch</span>(featureName<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> baseRef<span class="op">:</span> <span class="dt">string</span> <span class="op">=</span> <span class="st">&#39;develop&#39;</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>BranchCreationResult<span class="op">&gt;</span> {</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Validate feature name follows conventions</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">validateBranchName</span>(featureName)<span class="op">;</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Ensure base branch is up to date</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">ensureBranchUpToDate</span>(baseRef)<span class="op">;</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Create feature branch</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> branchName <span class="op">=</span> <span class="vs">`feature/</span><span class="sc">${</span>featureName<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createBranch</span>(branchName<span class="op">,</span> baseRef)<span class="op">;</span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Set up branch protection</span></span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setupBranchProtection</span>(branchName)<span class="op">;</span></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Create initial commit with scaffolding</span></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createInitialCommit</span>(branchName<span class="op">,</span> featureName)<span class="op">;</span></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>        branchName<span class="op">,</span></span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a>        checkoutCommand<span class="op">:</span> <span class="vs">`git checkout </span><span class="sc">${</span>branchName<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a>        nextSteps<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateNextSteps</span>(featureName)<span class="op">,</span></span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (error) {</span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> error <span class="kw">instanceof</span> <span class="bu">Error</span> <span class="op">?</span> error<span class="op">.</span><span class="at">message</span> <span class="op">:</span> <span class="st">&#39;Branch creation failed&#39;</span><span class="op">,</span></span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">validateBranchName</span>(featureName<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> namePattern <span class="op">=</span> <span class="ss">/</span><span class="sc">^[a-z0-9-]+$</span><span class="ss">/</span><span class="op">;</span></span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>namePattern<span class="op">.</span><span class="fu">test</span>(featureName)) {</span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Feature name must contain only lowercase letters, numbers, and hyphens&#39;</span>)<span class="op">;</span></span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (featureName<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">50</span>) {</span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Feature name must be 50 characters or less&#39;</span>)<span class="op">;</span></span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (featureName<span class="op">.</span><span class="fu">startsWith</span>(<span class="st">&#39;-&#39;</span>) <span class="op">||</span> featureName<span class="op">.</span><span class="fu">endsWith</span>(<span class="st">&#39;-&#39;</span>)) {</span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Feature name cannot start or end with a hyphen&#39;</span>)<span class="op">;</span></span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">createPullRequest</span>(options<span class="op">:</span> PullRequestOptions)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>PullRequestResult<span class="op">&gt;</span> {</span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Pre-flight checks</span></span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> preflightResult <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">runPreflightChecks</span>(options<span class="op">.</span><span class="at">sourceBranch</span>)<span class="op">;</span></span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-64"><a href="#cb64-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>preflightResult<span class="op">.</span><span class="at">passed</span>) {</span>
<span id="cb64-65"><a href="#cb64-65" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb64-66"><a href="#cb64-66" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb64-67"><a href="#cb64-67" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> <span class="st">&#39;Pre-flight checks failed&#39;</span><span class="op">,</span></span>
<span id="cb64-68"><a href="#cb64-68" aria-hidden="true" tabindex="-1"></a>        failures<span class="op">:</span> preflightResult<span class="op">.</span><span class="at">failures</span><span class="op">,</span></span>
<span id="cb64-69"><a href="#cb64-69" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb64-70"><a href="#cb64-70" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-71"><a href="#cb64-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-72"><a href="#cb64-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create pull request</span></span>
<span id="cb64-73"><a href="#cb64-73" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> pr <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createPR</span>(options)<span class="op">;</span></span>
<span id="cb64-74"><a href="#cb64-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-75"><a href="#cb64-75" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add automated labels</span></span>
<span id="cb64-76"><a href="#cb64-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">addAutomatedLabels</span>(pr<span class="op">.</span><span class="at">id</span><span class="op">,</span> options<span class="op">.</span><span class="at">sourceBranch</span>)<span class="op">;</span></span>
<span id="cb64-77"><a href="#cb64-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-78"><a href="#cb64-78" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Request appropriate reviewers</span></span>
<span id="cb64-79"><a href="#cb64-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">requestReviewers</span>(pr<span class="op">.</span><span class="at">id</span><span class="op">,</span> options)<span class="op">;</span></span>
<span id="cb64-80"><a href="#cb64-80" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-81"><a href="#cb64-81" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Run automated checks</span></span>
<span id="cb64-82"><a href="#cb64-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">triggerAutomatedChecks</span>(pr<span class="op">.</span><span class="at">id</span>)<span class="op">;</span></span>
<span id="cb64-83"><a href="#cb64-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-84"><a href="#cb64-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb64-85"><a href="#cb64-85" aria-hidden="true" tabindex="-1"></a>      success<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb64-86"><a href="#cb64-86" aria-hidden="true" tabindex="-1"></a>      pullRequestId<span class="op">:</span> pr<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb64-87"><a href="#cb64-87" aria-hidden="true" tabindex="-1"></a>      url<span class="op">:</span> pr<span class="op">.</span><span class="at">url</span><span class="op">,</span></span>
<span id="cb64-88"><a href="#cb64-88" aria-hidden="true" tabindex="-1"></a>      reviewers<span class="op">:</span> pr<span class="op">.</span><span class="at">reviewers</span><span class="op">,</span></span>
<span id="cb64-89"><a href="#cb64-89" aria-hidden="true" tabindex="-1"></a>      estimatedReviewTime<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">estimateReviewTime</span>(options)<span class="op">,</span></span>
<span id="cb64-90"><a href="#cb64-90" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb64-91"><a href="#cb64-91" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-92"><a href="#cb64-92" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-93"><a href="#cb64-93" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">runPreflightChecks</span>(branchName<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>PreflightResult<span class="op">&gt;</span> {</span>
<span id="cb64-94"><a href="#cb64-94" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> checks<span class="op">:</span> PreflightCheck[] <span class="op">=</span> [</span>
<span id="cb64-95"><a href="#cb64-95" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb64-96"><a href="#cb64-96" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="st">&#39;Branch up to date&#39;</span><span class="op">,</span></span>
<span id="cb64-97"><a href="#cb64-97" aria-hidden="true" tabindex="-1"></a>        check<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">isBranchUpToDate</span>(branchName)<span class="op">,</span></span>
<span id="cb64-98"><a href="#cb64-98" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb64-99"><a href="#cb64-99" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb64-100"><a href="#cb64-100" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="st">&#39;Commits are signed&#39;</span><span class="op">,</span></span>
<span id="cb64-101"><a href="#cb64-101" aria-hidden="true" tabindex="-1"></a>        check<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">areCommitsSigned</span>(branchName)<span class="op">,</span></span>
<span id="cb64-102"><a href="#cb64-102" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb64-103"><a href="#cb64-103" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb64-104"><a href="#cb64-104" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="st">&#39;No merge commits&#39;</span><span class="op">,</span></span>
<span id="cb64-105"><a href="#cb64-105" aria-hidden="true" tabindex="-1"></a>        check<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">hasNoMergeCommits</span>(branchName)<span class="op">,</span></span>
<span id="cb64-106"><a href="#cb64-106" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb64-107"><a href="#cb64-107" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb64-108"><a href="#cb64-108" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="st">&#39;Commit messages follow convention&#39;</span><span class="op">,</span></span>
<span id="cb64-109"><a href="#cb64-109" aria-hidden="true" tabindex="-1"></a>        check<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">validateCommitMessages</span>(branchName)<span class="op">,</span></span>
<span id="cb64-110"><a href="#cb64-110" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb64-111"><a href="#cb64-111" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb64-112"><a href="#cb64-112" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="st">&#39;No large files&#39;</span><span class="op">,</span></span>
<span id="cb64-113"><a href="#cb64-113" aria-hidden="true" tabindex="-1"></a>        check<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">checkForLargeFiles</span>(branchName)<span class="op">,</span></span>
<span id="cb64-114"><a href="#cb64-114" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb64-115"><a href="#cb64-115" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb64-116"><a href="#cb64-116" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> <span class="st">&#39;No secrets in code&#39;</span><span class="op">,</span></span>
<span id="cb64-117"><a href="#cb64-117" aria-hidden="true" tabindex="-1"></a>        check<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">scanForSecrets</span>(branchName)<span class="op">,</span></span>
<span id="cb64-118"><a href="#cb64-118" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb64-119"><a href="#cb64-119" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb64-120"><a href="#cb64-120" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-121"><a href="#cb64-121" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results <span class="op">=</span> <span class="cf">await</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>(</span>
<span id="cb64-122"><a href="#cb64-122" aria-hidden="true" tabindex="-1"></a>      checks<span class="op">.</span><span class="fu">map</span>(<span class="kw">async</span> check <span class="kw">=&gt;</span> ({</span>
<span id="cb64-123"><a href="#cb64-123" aria-hidden="true" tabindex="-1"></a>        name<span class="op">:</span> check<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb64-124"><a href="#cb64-124" aria-hidden="true" tabindex="-1"></a>        passed<span class="op">:</span> <span class="cf">await</span> check<span class="op">.</span><span class="fu">check</span>()<span class="op">,</span></span>
<span id="cb64-125"><a href="#cb64-125" aria-hidden="true" tabindex="-1"></a>      }))</span>
<span id="cb64-126"><a href="#cb64-126" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb64-127"><a href="#cb64-127" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-128"><a href="#cb64-128" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> failures <span class="op">=</span> results<span class="op">.</span><span class="fu">filter</span>(result <span class="kw">=&gt;</span> <span class="op">!</span>result<span class="op">.</span><span class="at">passed</span>)<span class="op">;</span></span>
<span id="cb64-129"><a href="#cb64-129" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-130"><a href="#cb64-130" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb64-131"><a href="#cb64-131" aria-hidden="true" tabindex="-1"></a>      passed<span class="op">:</span> failures<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb64-132"><a href="#cb64-132" aria-hidden="true" tabindex="-1"></a>      failures<span class="op">:</span> failures<span class="op">.</span><span class="fu">map</span>(f <span class="kw">=&gt;</span> f<span class="op">.</span><span class="at">name</span>)<span class="op">,</span></span>
<span id="cb64-133"><a href="#cb64-133" aria-hidden="true" tabindex="-1"></a>      results<span class="op">,</span></span>
<span id="cb64-134"><a href="#cb64-134" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb64-135"><a href="#cb64-135" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-136"><a href="#cb64-136" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-137"><a href="#cb64-137" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">addAutomatedLabels</span>(prId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> branchName<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb64-138"><a href="#cb64-138" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> labels<span class="op">:</span> <span class="dt">string</span>[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb64-139"><a href="#cb64-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-140"><a href="#cb64-140" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add size label based on changes</span></span>
<span id="cb64-141"><a href="#cb64-141" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> changes <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getChangeStatistics</span>(branchName)<span class="op">;</span></span>
<span id="cb64-142"><a href="#cb64-142" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (changes<span class="op">.</span><span class="at">additions</span> <span class="op">+</span> changes<span class="op">.</span><span class="at">deletions</span> <span class="op">&gt;</span> <span class="dv">1000</span>) {</span>
<span id="cb64-143"><a href="#cb64-143" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;size/XL&#39;</span>)<span class="op">;</span></span>
<span id="cb64-144"><a href="#cb64-144" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (changes<span class="op">.</span><span class="at">additions</span> <span class="op">+</span> changes<span class="op">.</span><span class="at">deletions</span> <span class="op">&gt;</span> <span class="dv">500</span>) {</span>
<span id="cb64-145"><a href="#cb64-145" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;size/L&#39;</span>)<span class="op">;</span></span>
<span id="cb64-146"><a href="#cb64-146" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (changes<span class="op">.</span><span class="at">additions</span> <span class="op">+</span> changes<span class="op">.</span><span class="at">deletions</span> <span class="op">&gt;</span> <span class="dv">100</span>) {</span>
<span id="cb64-147"><a href="#cb64-147" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;size/M&#39;</span>)<span class="op">;</span></span>
<span id="cb64-148"><a href="#cb64-148" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb64-149"><a href="#cb64-149" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;size/S&#39;</span>)<span class="op">;</span></span>
<span id="cb64-150"><a href="#cb64-150" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-151"><a href="#cb64-151" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-152"><a href="#cb64-152" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add type labels based on file changes</span></span>
<span id="cb64-153"><a href="#cb64-153" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> changedFiles <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getChangedFiles</span>(branchName)<span class="op">;</span></span>
<span id="cb64-154"><a href="#cb64-154" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-155"><a href="#cb64-155" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (changedFiles<span class="op">.</span><span class="fu">some</span>(f <span class="kw">=&gt;</span> f<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;.test.&#39;</span>) <span class="op">||</span> f<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;.spec.&#39;</span>))) {</span>
<span id="cb64-156"><a href="#cb64-156" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;type/testing&#39;</span>)<span class="op">;</span></span>
<span id="cb64-157"><a href="#cb64-157" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-158"><a href="#cb64-158" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-159"><a href="#cb64-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (changedFiles<span class="op">.</span><span class="fu">some</span>(f <span class="kw">=&gt;</span> f<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;package.json&#39;</span>) <span class="op">||</span> f<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;yarn.lock&#39;</span>))) {</span>
<span id="cb64-160"><a href="#cb64-160" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;type/dependencies&#39;</span>)<span class="op">;</span></span>
<span id="cb64-161"><a href="#cb64-161" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-162"><a href="#cb64-162" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-163"><a href="#cb64-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (changedFiles<span class="op">.</span><span class="fu">some</span>(f <span class="kw">=&gt;</span> f<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;.md&#39;</span>))) {</span>
<span id="cb64-164"><a href="#cb64-164" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;type/documentation&#39;</span>)<span class="op">;</span></span>
<span id="cb64-165"><a href="#cb64-165" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-166"><a href="#cb64-166" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-167"><a href="#cb64-167" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (changedFiles<span class="op">.</span><span class="fu">some</span>(f <span class="kw">=&gt;</span> f<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;.css&#39;</span>) <span class="op">||</span> f<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;.scss&#39;</span>))) {</span>
<span id="cb64-168"><a href="#cb64-168" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;type/styling&#39;</span>)<span class="op">;</span></span>
<span id="cb64-169"><a href="#cb64-169" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-170"><a href="#cb64-170" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-171"><a href="#cb64-171" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add priority label based on branch naming</span></span>
<span id="cb64-172"><a href="#cb64-172" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (branchName<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;hotfix&#39;</span>) <span class="op">||</span> branchName<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;critical&#39;</span>)) {</span>
<span id="cb64-173"><a href="#cb64-173" aria-hidden="true" tabindex="-1"></a>      labels<span class="op">.</span><span class="fu">push</span>(<span class="st">&#39;priority/high&#39;</span>)<span class="op">;</span></span>
<span id="cb64-174"><a href="#cb64-174" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-175"><a href="#cb64-175" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-176"><a href="#cb64-176" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">applyLabels</span>(prId<span class="op">,</span> labels)<span class="op">;</span></span>
<span id="cb64-177"><a href="#cb64-177" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-178"><a href="#cb64-178" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-179"><a href="#cb64-179" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">requestReviewers</span>(prId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> options<span class="op">:</span> PullRequestOptions)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb64-180"><a href="#cb64-180" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> reviewers<span class="op">:</span> <span class="dt">string</span>[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb64-181"><a href="#cb64-181" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-182"><a href="#cb64-182" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Get code owners for changed files</span></span>
<span id="cb64-183"><a href="#cb64-183" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> codeOwners <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getCodeOwners</span>(options<span class="op">.</span><span class="at">sourceBranch</span>)<span class="op">;</span></span>
<span id="cb64-184"><a href="#cb64-184" aria-hidden="true" tabindex="-1"></a>    reviewers<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>codeOwners)<span class="op">;</span></span>
<span id="cb64-185"><a href="#cb64-185" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-186"><a href="#cb64-186" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add domain experts based on file changes</span></span>
<span id="cb64-187"><a href="#cb64-187" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> domainExperts <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getDomainExperts</span>(options<span class="op">.</span><span class="at">sourceBranch</span>)<span class="op">;</span></span>
<span id="cb64-188"><a href="#cb64-188" aria-hidden="true" tabindex="-1"></a>    reviewers<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>domainExperts)<span class="op">;</span></span>
<span id="cb64-189"><a href="#cb64-189" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-190"><a href="#cb64-190" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add team members with balanced workload</span></span>
<span id="cb64-191"><a href="#cb64-191" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> balancedReviewers <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getBalancedReviewers</span>(reviewers<span class="op">.</span><span class="at">length</span>)<span class="op">;</span></span>
<span id="cb64-192"><a href="#cb64-192" aria-hidden="true" tabindex="-1"></a>    reviewers<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>balancedReviewers)<span class="op">;</span></span>
<span id="cb64-193"><a href="#cb64-193" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-194"><a href="#cb64-194" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ensure minimum number of reviewers</span></span>
<span id="cb64-195"><a href="#cb64-195" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> minReviewers <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">minReviewers</span> <span class="op">||</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb64-196"><a href="#cb64-196" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (reviewers<span class="op">.</span><span class="at">length</span> <span class="op">&lt;</span> minReviewers) {</span>
<span id="cb64-197"><a href="#cb64-197" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> additionalReviewers <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getAdditionalReviewers</span>(</span>
<span id="cb64-198"><a href="#cb64-198" aria-hidden="true" tabindex="-1"></a>        reviewers<span class="op">,</span></span>
<span id="cb64-199"><a href="#cb64-199" aria-hidden="true" tabindex="-1"></a>        minReviewers <span class="op">-</span> reviewers<span class="op">.</span><span class="at">length</span></span>
<span id="cb64-200"><a href="#cb64-200" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb64-201"><a href="#cb64-201" aria-hidden="true" tabindex="-1"></a>      reviewers<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>additionalReviewers)<span class="op">;</span></span>
<span id="cb64-202"><a href="#cb64-202" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-203"><a href="#cb64-203" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-204"><a href="#cb64-204" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">assignReviewers</span>(prId<span class="op">,</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(reviewers)])<span class="op">;</span></span>
<span id="cb64-205"><a href="#cb64-205" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-206"><a href="#cb64-206" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-207"><a href="#cb64-207" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">mergePullRequest</span>(prId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> strategy<span class="op">:</span> MergeStrategy <span class="op">=</span> <span class="st">&#39;squash&#39;</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>MergeResult<span class="op">&gt;</span> {</span>
<span id="cb64-208"><a href="#cb64-208" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify all checks pass</span></span>
<span id="cb64-209"><a href="#cb64-209" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> checksResult <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">verifyAllChecksPassed</span>(prId)<span class="op">;</span></span>
<span id="cb64-210"><a href="#cb64-210" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-211"><a href="#cb64-211" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>checksResult<span class="op">.</span><span class="at">passed</span>) {</span>
<span id="cb64-212"><a href="#cb64-212" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb64-213"><a href="#cb64-213" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb64-214"><a href="#cb64-214" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> <span class="st">&#39;Not all checks have passed&#39;</span><span class="op">,</span></span>
<span id="cb64-215"><a href="#cb64-215" aria-hidden="true" tabindex="-1"></a>        failedChecks<span class="op">:</span> checksResult<span class="op">.</span><span class="at">failedChecks</span><span class="op">,</span></span>
<span id="cb64-216"><a href="#cb64-216" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb64-217"><a href="#cb64-217" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-218"><a href="#cb64-218" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-219"><a href="#cb64-219" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify required approvals</span></span>
<span id="cb64-220"><a href="#cb64-220" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> approvalsResult <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">verifyRequiredApprovals</span>(prId)<span class="op">;</span></span>
<span id="cb64-221"><a href="#cb64-221" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-222"><a href="#cb64-222" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>approvalsResult<span class="op">.</span><span class="at">satisfied</span>) {</span>
<span id="cb64-223"><a href="#cb64-223" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {</span>
<span id="cb64-224"><a href="#cb64-224" aria-hidden="true" tabindex="-1"></a>        success<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb64-225"><a href="#cb64-225" aria-hidden="true" tabindex="-1"></a>        error<span class="op">:</span> <span class="st">&#39;Required approvals not satisfied&#39;</span><span class="op">,</span></span>
<span id="cb64-226"><a href="#cb64-226" aria-hidden="true" tabindex="-1"></a>        missingApprovals<span class="op">:</span> approvalsResult<span class="op">.</span><span class="at">missing</span><span class="op">,</span></span>
<span id="cb64-227"><a href="#cb64-227" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb64-228"><a href="#cb64-228" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-229"><a href="#cb64-229" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-230"><a href="#cb64-230" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Perform merge</span></span>
<span id="cb64-231"><a href="#cb64-231" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> mergeResult <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">performMerge</span>(prId<span class="op">,</span> strategy)<span class="op">;</span></span>
<span id="cb64-232"><a href="#cb64-232" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-233"><a href="#cb64-233" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (mergeResult<span class="op">.</span><span class="at">success</span>) {</span>
<span id="cb64-234"><a href="#cb64-234" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Post-merge actions</span></span>
<span id="cb64-235"><a href="#cb64-235" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">runPostMergeActions</span>(prId<span class="op">,</span> mergeResult<span class="op">.</span><span class="at">commitSha</span>)<span class="op">;</span></span>
<span id="cb64-236"><a href="#cb64-236" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-237"><a href="#cb64-237" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-238"><a href="#cb64-238" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mergeResult<span class="op">;</span></span>
<span id="cb64-239"><a href="#cb64-239" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-240"><a href="#cb64-240" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-241"><a href="#cb64-241" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">runPostMergeActions</span>(prId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> commitSha<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb64-242"><a href="#cb64-242" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Update related issues</span></span>
<span id="cb64-243"><a href="#cb64-243" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">updateRelatedIssues</span>(prId)<span class="op">;</span></span>
<span id="cb64-244"><a href="#cb64-244" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-245"><a href="#cb64-245" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Trigger deployment if configured</span></span>
<span id="cb64-246"><a href="#cb64-246" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">autoDeployOnMerge</span>) {</span>
<span id="cb64-247"><a href="#cb64-247" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">triggerDeployment</span>(commitSha)<span class="op">;</span></span>
<span id="cb64-248"><a href="#cb64-248" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-249"><a href="#cb64-249" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-250"><a href="#cb64-250" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Update team metrics</span></span>
<span id="cb64-251"><a href="#cb64-251" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">updateTeamMetrics</span>(prId)<span class="op">;</span></span>
<span id="cb64-252"><a href="#cb64-252" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-253"><a href="#cb64-253" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send notifications</span></span>
<span id="cb64-254"><a href="#cb64-254" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">sendMergeNotifications</span>(prId)<span class="op">;</span></span>
<span id="cb64-255"><a href="#cb64-255" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-256"><a href="#cb64-256" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Clean up feature branch</span></span>
<span id="cb64-257"><a href="#cb64-257" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">config</span><span class="op">.</span><span class="at">deleteBranchOnMerge</span>) {</span>
<span id="cb64-258"><a href="#cb64-258" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">deleteBranch</span>(prId)<span class="op">;</span></span>
<span id="cb64-259"><a href="#cb64-259" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-260"><a href="#cb64-260" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-261"><a href="#cb64-261" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="code-review-excellence-framework">Code Review Excellence
Framework</h3>
<div class="sourceCode" id="cb65"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Intelligent code review system</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> CodeReviewSystem {</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> reviewGuidelines<span class="op">:</span> ReviewGuidelines<span class="op">;</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> automatedChecks<span class="op">:</span> AutomatedCheck[]<span class="op">;</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">reviewGuidelines</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">loadReviewGuidelines</span>()<span class="op">;</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">automatedChecks</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">initializeAutomatedChecks</span>()<span class="op">;</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">analyzeCodeChanges</span>(prId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>CodeAnalysisResult<span class="op">&gt;</span> {</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> changes <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getCodeChanges</span>(prId)<span class="op">;</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> analysis<span class="op">:</span> CodeAnalysisResult <span class="op">=</span> {</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>      complexity<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeComplexity</span>(changes)<span class="op">,</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>      security<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeSecurityImpact</span>(changes)<span class="op">,</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>      performance<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzePerformanceImpact</span>(changes)<span class="op">,</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>      testCoverage<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeTestCoverage</span>(changes)<span class="op">,</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>      architecture<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeArchitecturalImpact</span>(changes)<span class="op">,</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>      maintainability<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeMaintainability</span>(changes)<span class="op">,</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> analysis<span class="op">;</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">analyzeComplexity</span>(changes<span class="op">:</span> CodeChange[])<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ComplexityAnalysis<span class="op">&gt;</span> {</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> complexityMetrics<span class="op">:</span> ComplexityMetrics <span class="op">=</span> {</span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>      cyclomaticComplexity<span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>      cognitiveComplexity<span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>      linesOfCode<span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>      functionCount<span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> change <span class="kw">of</span> changes) {</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (change<span class="op">.</span><span class="at">type</span> <span class="op">===</span> <span class="st">&#39;addition&#39;</span> <span class="op">||</span> change<span class="op">.</span><span class="at">type</span> <span class="op">===</span> <span class="st">&#39;modification&#39;</span>) {</span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> fileComplexity <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateFileComplexity</span>(change<span class="op">.</span><span class="at">content</span>)<span class="op">;</span></span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>        complexityMetrics<span class="op">.</span><span class="at">cyclomaticComplexity</span> <span class="op">+=</span> fileComplexity<span class="op">.</span><span class="at">cyclomaticComplexity</span><span class="op">;</span></span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>        complexityMetrics<span class="op">.</span><span class="at">cognitiveComplexity</span> <span class="op">+=</span> fileComplexity<span class="op">.</span><span class="at">cognitiveComplexity</span><span class="op">;</span></span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>        complexityMetrics<span class="op">.</span><span class="at">linesOfCode</span> <span class="op">+=</span> fileComplexity<span class="op">.</span><span class="at">linesOfCode</span><span class="op">;</span></span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a>        complexityMetrics<span class="op">.</span><span class="at">functionCount</span> <span class="op">+=</span> fileComplexity<span class="op">.</span><span class="at">functionCount</span><span class="op">;</span></span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> riskLevel <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateComplexityRisk</span>(complexityMetrics)<span class="op">;</span></span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> suggestions <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateComplexitySuggestions</span>(complexityMetrics<span class="op">,</span> riskLevel)<span class="op">;</span></span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a>      metrics<span class="op">:</span> complexityMetrics<span class="op">,</span></span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a>      riskLevel<span class="op">,</span></span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a>      suggestions<span class="op">,</span></span>
<span id="cb65-52"><a href="#cb65-52" aria-hidden="true" tabindex="-1"></a>      maxComplexityFunction<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">findMostComplexFunction</span>(changes)<span class="op">,</span></span>
<span id="cb65-53"><a href="#cb65-53" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-54"><a href="#cb65-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-55"><a href="#cb65-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-56"><a href="#cb65-56" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">analyzeSecurityImpact</span>(changes<span class="op">:</span> CodeChange[])<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>SecurityAnalysis<span class="op">&gt;</span> {</span>
<span id="cb65-57"><a href="#cb65-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> securityIssues<span class="op">:</span> SecurityIssue[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb65-58"><a href="#cb65-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-59"><a href="#cb65-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> change <span class="kw">of</span> changes) {</span>
<span id="cb65-60"><a href="#cb65-60" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Check for common security issues</span></span>
<span id="cb65-61"><a href="#cb65-61" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> issues <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">scanForSecurityIssues</span>(change)<span class="op">;</span></span>
<span id="cb65-62"><a href="#cb65-62" aria-hidden="true" tabindex="-1"></a>      securityIssues<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>issues)<span class="op">;</span></span>
<span id="cb65-63"><a href="#cb65-63" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-64"><a href="#cb65-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-65"><a href="#cb65-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Analyze data flow for potential vulnerabilities</span></span>
<span id="cb65-66"><a href="#cb65-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dataFlowIssues <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeDataFlow</span>(changes)<span class="op">;</span></span>
<span id="cb65-67"><a href="#cb65-67" aria-hidden="true" tabindex="-1"></a>    securityIssues<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>dataFlowIssues)<span class="op">;</span></span>
<span id="cb65-68"><a href="#cb65-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-69"><a href="#cb65-69" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for dependency vulnerabilities</span></span>
<span id="cb65-70"><a href="#cb65-70" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dependencyIssues <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">checkDependencyVulnerabilities</span>(changes)<span class="op">;</span></span>
<span id="cb65-71"><a href="#cb65-71" aria-hidden="true" tabindex="-1"></a>    securityIssues<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span>dependencyIssues)<span class="op">;</span></span>
<span id="cb65-72"><a href="#cb65-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-73"><a href="#cb65-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb65-74"><a href="#cb65-74" aria-hidden="true" tabindex="-1"></a>      issues<span class="op">:</span> securityIssues<span class="op">,</span></span>
<span id="cb65-75"><a href="#cb65-75" aria-hidden="true" tabindex="-1"></a>      riskScore<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateSecurityRiskScore</span>(securityIssues)<span class="op">,</span></span>
<span id="cb65-76"><a href="#cb65-76" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateSecurityRecommendations</span>(securityIssues)<span class="op">,</span></span>
<span id="cb65-77"><a href="#cb65-77" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-78"><a href="#cb65-78" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-79"><a href="#cb65-79" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-80"><a href="#cb65-80" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">generateReviewSuggestions</span>(prId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ReviewSuggestions<span class="op">&gt;</span> {</span>
<span id="cb65-81"><a href="#cb65-81" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> analysis <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeCodeChanges</span>(prId)<span class="op">;</span></span>
<span id="cb65-82"><a href="#cb65-82" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> prMetadata <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getPRMetadata</span>(prId)<span class="op">;</span></span>
<span id="cb65-83"><a href="#cb65-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-84"><a href="#cb65-84" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> suggestions<span class="op">:</span> ReviewSuggestion[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb65-85"><a href="#cb65-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-86"><a href="#cb65-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate complexity-based suggestions</span></span>
<span id="cb65-87"><a href="#cb65-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (analysis<span class="op">.</span><span class="at">complexity</span><span class="op">.</span><span class="at">riskLevel</span> <span class="op">===</span> <span class="st">&#39;high&#39;</span>) {</span>
<span id="cb65-88"><a href="#cb65-88" aria-hidden="true" tabindex="-1"></a>      suggestions<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb65-89"><a href="#cb65-89" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> <span class="st">&#39;complexity&#39;</span><span class="op">,</span></span>
<span id="cb65-90"><a href="#cb65-90" aria-hidden="true" tabindex="-1"></a>        priority<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb65-91"><a href="#cb65-91" aria-hidden="true" tabindex="-1"></a>        message<span class="op">:</span> <span class="st">&#39;High complexity detected. Consider breaking down large functions.&#39;</span><span class="op">,</span></span>
<span id="cb65-92"><a href="#cb65-92" aria-hidden="true" tabindex="-1"></a>        details<span class="op">:</span> analysis<span class="op">.</span><span class="at">complexity</span><span class="op">.</span><span class="at">suggestions</span><span class="op">,</span></span>
<span id="cb65-93"><a href="#cb65-93" aria-hidden="true" tabindex="-1"></a>        autoFixable<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb65-94"><a href="#cb65-94" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb65-95"><a href="#cb65-95" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-96"><a href="#cb65-96" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-97"><a href="#cb65-97" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate security suggestions</span></span>
<span id="cb65-98"><a href="#cb65-98" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (analysis<span class="op">.</span><span class="at">security</span><span class="op">.</span><span class="at">riskScore</span> <span class="op">&gt;</span> <span class="dv">7</span>) {</span>
<span id="cb65-99"><a href="#cb65-99" aria-hidden="true" tabindex="-1"></a>      suggestions<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb65-100"><a href="#cb65-100" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> <span class="st">&#39;security&#39;</span><span class="op">,</span></span>
<span id="cb65-101"><a href="#cb65-101" aria-hidden="true" tabindex="-1"></a>        priority<span class="op">:</span> <span class="st">&#39;critical&#39;</span><span class="op">,</span></span>
<span id="cb65-102"><a href="#cb65-102" aria-hidden="true" tabindex="-1"></a>        message<span class="op">:</span> <span class="st">&#39;Security vulnerabilities detected. Review required.&#39;</span><span class="op">,</span></span>
<span id="cb65-103"><a href="#cb65-103" aria-hidden="true" tabindex="-1"></a>        details<span class="op">:</span> analysis<span class="op">.</span><span class="at">security</span><span class="op">.</span><span class="at">recommendations</span><span class="op">,</span></span>
<span id="cb65-104"><a href="#cb65-104" aria-hidden="true" tabindex="-1"></a>        autoFixable<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb65-105"><a href="#cb65-105" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb65-106"><a href="#cb65-106" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-107"><a href="#cb65-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-108"><a href="#cb65-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate performance suggestions</span></span>
<span id="cb65-109"><a href="#cb65-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (analysis<span class="op">.</span><span class="at">performance</span><span class="op">.</span><span class="at">riskLevel</span> <span class="op">===</span> <span class="st">&#39;high&#39;</span>) {</span>
<span id="cb65-110"><a href="#cb65-110" aria-hidden="true" tabindex="-1"></a>      suggestions<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb65-111"><a href="#cb65-111" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> <span class="st">&#39;performance&#39;</span><span class="op">,</span></span>
<span id="cb65-112"><a href="#cb65-112" aria-hidden="true" tabindex="-1"></a>        priority<span class="op">:</span> <span class="st">&#39;medium&#39;</span><span class="op">,</span></span>
<span id="cb65-113"><a href="#cb65-113" aria-hidden="true" tabindex="-1"></a>        message<span class="op">:</span> <span class="st">&#39;Performance impact detected. Consider optimization.&#39;</span><span class="op">,</span></span>
<span id="cb65-114"><a href="#cb65-114" aria-hidden="true" tabindex="-1"></a>        details<span class="op">:</span> analysis<span class="op">.</span><span class="at">performance</span><span class="op">.</span><span class="at">optimizations</span><span class="op">,</span></span>
<span id="cb65-115"><a href="#cb65-115" aria-hidden="true" tabindex="-1"></a>        autoFixable<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb65-116"><a href="#cb65-116" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb65-117"><a href="#cb65-117" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-118"><a href="#cb65-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-119"><a href="#cb65-119" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate test coverage suggestions</span></span>
<span id="cb65-120"><a href="#cb65-120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (analysis<span class="op">.</span><span class="at">testCoverage</span><span class="op">.</span><span class="at">percentage</span> <span class="op">&lt;</span> <span class="dv">80</span>) {</span>
<span id="cb65-121"><a href="#cb65-121" aria-hidden="true" tabindex="-1"></a>      suggestions<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb65-122"><a href="#cb65-122" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> <span class="st">&#39;testing&#39;</span><span class="op">,</span></span>
<span id="cb65-123"><a href="#cb65-123" aria-hidden="true" tabindex="-1"></a>        priority<span class="op">:</span> <span class="st">&#39;high&#39;</span><span class="op">,</span></span>
<span id="cb65-124"><a href="#cb65-124" aria-hidden="true" tabindex="-1"></a>        message<span class="op">:</span> <span class="st">&#39;Test coverage below threshold. Add more tests.&#39;</span><span class="op">,</span></span>
<span id="cb65-125"><a href="#cb65-125" aria-hidden="true" tabindex="-1"></a>        details<span class="op">:</span> analysis<span class="op">.</span><span class="at">testCoverage</span><span class="op">.</span><span class="at">missingCoverage</span><span class="op">,</span></span>
<span id="cb65-126"><a href="#cb65-126" aria-hidden="true" tabindex="-1"></a>        autoFixable<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb65-127"><a href="#cb65-127" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb65-128"><a href="#cb65-128" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-129"><a href="#cb65-129" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-130"><a href="#cb65-130" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb65-131"><a href="#cb65-131" aria-hidden="true" tabindex="-1"></a>      suggestions<span class="op">,</span></span>
<span id="cb65-132"><a href="#cb65-132" aria-hidden="true" tabindex="-1"></a>      overallRisk<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateOverallRisk</span>(analysis)<span class="op">,</span></span>
<span id="cb65-133"><a href="#cb65-133" aria-hidden="true" tabindex="-1"></a>      estimatedReviewTime<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">estimateReviewTime</span>(analysis<span class="op">,</span> prMetadata)<span class="op">,</span></span>
<span id="cb65-134"><a href="#cb65-134" aria-hidden="true" tabindex="-1"></a>      requiredExpertise<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">identifyRequiredExpertise</span>(analysis)<span class="op">,</span></span>
<span id="cb65-135"><a href="#cb65-135" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-136"><a href="#cb65-136" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-137"><a href="#cb65-137" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-138"><a href="#cb65-138" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">provideMentorshipGuidance</span>(reviewerId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> prId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>MentorshipGuidance<span class="op">&gt;</span> {</span>
<span id="cb65-139"><a href="#cb65-139" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> reviewer <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getReviewerProfile</span>(reviewerId)<span class="op">;</span></span>
<span id="cb65-140"><a href="#cb65-140" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> analysis <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeCodeChanges</span>(prId)<span class="op">;</span></span>
<span id="cb65-141"><a href="#cb65-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-142"><a href="#cb65-142" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> guidance<span class="op">:</span> MentorshipTip[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb65-143"><a href="#cb65-143" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-144"><a href="#cb65-144" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Provide tips based on reviewer experience level</span></span>
<span id="cb65-145"><a href="#cb65-145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (reviewer<span class="op">.</span><span class="at">experienceLevel</span> <span class="op">===</span> <span class="st">&#39;junior&#39;</span>) {</span>
<span id="cb65-146"><a href="#cb65-146" aria-hidden="true" tabindex="-1"></a>      guidance<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">getJuniorReviewerTips</span>(analysis))<span class="op">;</span></span>
<span id="cb65-147"><a href="#cb65-147" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (reviewer<span class="op">.</span><span class="at">experienceLevel</span> <span class="op">===</span> <span class="st">&#39;mid&#39;</span>) {</span>
<span id="cb65-148"><a href="#cb65-148" aria-hidden="true" tabindex="-1"></a>      guidance<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">getMidLevelReviewerTips</span>(analysis))<span class="op">;</span></span>
<span id="cb65-149"><a href="#cb65-149" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-150"><a href="#cb65-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-151"><a href="#cb65-151" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Provide domain-specific guidance</span></span>
<span id="cb65-152"><a href="#cb65-152" aria-hidden="true" tabindex="-1"></a>    guidance<span class="op">.</span><span class="fu">push</span>(<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="fu">getDomainSpecificTips</span>(analysis<span class="op">,</span> reviewer<span class="op">.</span><span class="at">expertise</span>))<span class="op">;</span></span>
<span id="cb65-153"><a href="#cb65-153" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-154"><a href="#cb65-154" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Provide constructive feedback templates</span></span>
<span id="cb65-155"><a href="#cb65-155" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> feedbackTemplates <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateFeedbackTemplates</span>(analysis)<span class="op">;</span></span>
<span id="cb65-156"><a href="#cb65-156" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-157"><a href="#cb65-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb65-158"><a href="#cb65-158" aria-hidden="true" tabindex="-1"></a>      tips<span class="op">:</span> guidance<span class="op">,</span></span>
<span id="cb65-159"><a href="#cb65-159" aria-hidden="true" tabindex="-1"></a>      feedbackTemplates<span class="op">,</span></span>
<span id="cb65-160"><a href="#cb65-160" aria-hidden="true" tabindex="-1"></a>      learningResources<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getRelevantLearningResources</span>(analysis)<span class="op">,</span></span>
<span id="cb65-161"><a href="#cb65-161" aria-hidden="true" tabindex="-1"></a>      mentorConnect<span class="op">:</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">findMentorForReviewer</span>(reviewerId<span class="op">,</span> analysis)<span class="op">,</span></span>
<span id="cb65-162"><a href="#cb65-162" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-163"><a href="#cb65-163" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-164"><a href="#cb65-164" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-165"><a href="#cb65-165" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">getJuniorReviewerTips</span>(analysis<span class="op">:</span> CodeAnalysisResult)<span class="op">:</span> MentorshipTip[] {</span>
<span id="cb65-166"><a href="#cb65-166" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [</span>
<span id="cb65-167"><a href="#cb65-167" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb65-168"><a href="#cb65-168" aria-hidden="true" tabindex="-1"></a>        category<span class="op">:</span> <span class="st">&#39;general&#39;</span><span class="op">,</span></span>
<span id="cb65-169"><a href="#cb65-169" aria-hidden="true" tabindex="-1"></a>        tip<span class="op">:</span> <span class="st">&#39;Focus on code readability and maintainability first&#39;</span><span class="op">,</span></span>
<span id="cb65-170"><a href="#cb65-170" aria-hidden="true" tabindex="-1"></a>        explanation<span class="op">:</span> <span class="st">&#39;Junior developers should prioritize understanding what the code does and whether it</span><span class="sc">\&#39;</span><span class="st">s easy to read.&#39;</span><span class="op">,</span></span>
<span id="cb65-171"><a href="#cb65-171" aria-hidden="true" tabindex="-1"></a>        example<span class="op">:</span> <span class="st">&#39;Look for meaningful variable names, clear function purposes, and appropriate comments.&#39;</span><span class="op">,</span></span>
<span id="cb65-172"><a href="#cb65-172" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb65-173"><a href="#cb65-173" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb65-174"><a href="#cb65-174" aria-hidden="true" tabindex="-1"></a>        category<span class="op">:</span> <span class="st">&#39;testing&#39;</span><span class="op">,</span></span>
<span id="cb65-175"><a href="#cb65-175" aria-hidden="true" tabindex="-1"></a>        tip<span class="op">:</span> <span class="st">&#39;Check if new functionality has corresponding tests&#39;</span><span class="op">,</span></span>
<span id="cb65-176"><a href="#cb65-176" aria-hidden="true" tabindex="-1"></a>        explanation<span class="op">:</span> <span class="st">&#39;Every new feature or bug fix should include tests to prevent regressions.&#39;</span><span class="op">,</span></span>
<span id="cb65-177"><a href="#cb65-177" aria-hidden="true" tabindex="-1"></a>        example<span class="op">:</span> <span class="st">&#39;For a new utility function, ensure there are unit tests covering different input scenarios.&#39;</span><span class="op">,</span></span>
<span id="cb65-178"><a href="#cb65-178" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb65-179"><a href="#cb65-179" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb65-180"><a href="#cb65-180" aria-hidden="true" tabindex="-1"></a>        category<span class="op">:</span> <span class="st">&#39;security&#39;</span><span class="op">,</span></span>
<span id="cb65-181"><a href="#cb65-181" aria-hidden="true" tabindex="-1"></a>        tip<span class="op">:</span> <span class="st">&#39;Look for obvious security issues&#39;</span><span class="op">,</span></span>
<span id="cb65-182"><a href="#cb65-182" aria-hidden="true" tabindex="-1"></a>        explanation<span class="op">:</span> <span class="st">&#39;Even junior reviewers can catch common security problems.&#39;</span><span class="op">,</span></span>
<span id="cb65-183"><a href="#cb65-183" aria-hidden="true" tabindex="-1"></a>        example<span class="op">:</span> <span class="st">&#39;Check for hardcoded secrets, SQL injection possibilities, or XSS vulnerabilities.&#39;</span><span class="op">,</span></span>
<span id="cb65-184"><a href="#cb65-184" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb65-185"><a href="#cb65-185" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb65-186"><a href="#cb65-186" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-187"><a href="#cb65-187" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-188"><a href="#cb65-188" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">trackReviewMetrics</span>(prId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> reviewerId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb65-189"><a href="#cb65-189" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> reviewStart <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">;</span></span>
<span id="cb65-190"><a href="#cb65-190" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> analysis <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeCodeChanges</span>(prId)<span class="op">;</span></span>
<span id="cb65-191"><a href="#cb65-191" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-192"><a href="#cb65-192" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Track review metrics</span></span>
<span id="cb65-193"><a href="#cb65-193" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> metrics<span class="op">:</span> ReviewMetrics <span class="op">=</span> {</span>
<span id="cb65-194"><a href="#cb65-194" aria-hidden="true" tabindex="-1"></a>      reviewerId<span class="op">,</span></span>
<span id="cb65-195"><a href="#cb65-195" aria-hidden="true" tabindex="-1"></a>      prId<span class="op">,</span></span>
<span id="cb65-196"><a href="#cb65-196" aria-hidden="true" tabindex="-1"></a>      startTime<span class="op">:</span> reviewStart<span class="op">,</span></span>
<span id="cb65-197"><a href="#cb65-197" aria-hidden="true" tabindex="-1"></a>      codeComplexity<span class="op">:</span> analysis<span class="op">.</span><span class="at">complexity</span><span class="op">.</span><span class="at">metrics</span><span class="op">.</span><span class="at">cyclomaticComplexity</span><span class="op">,</span></span>
<span id="cb65-198"><a href="#cb65-198" aria-hidden="true" tabindex="-1"></a>      linesChanged<span class="op">:</span> analysis<span class="op">.</span><span class="at">complexity</span><span class="op">.</span><span class="at">metrics</span><span class="op">.</span><span class="at">linesOfCode</span><span class="op">,</span></span>
<span id="cb65-199"><a href="#cb65-199" aria-hidden="true" tabindex="-1"></a>      issuesFound<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="co">// Updated as review progresses</span></span>
<span id="cb65-200"><a href="#cb65-200" aria-hidden="true" tabindex="-1"></a>      timeSpent<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="co">// Updated when review completes</span></span>
<span id="cb65-201"><a href="#cb65-201" aria-hidden="true" tabindex="-1"></a>      qualityScore<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="co">// Calculated based on issues found vs. actual problems</span></span>
<span id="cb65-202"><a href="#cb65-202" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-203"><a href="#cb65-203" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-204"><a href="#cb65-204" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">saveReviewMetrics</span>(metrics)<span class="op">;</span></span>
<span id="cb65-205"><a href="#cb65-205" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-206"><a href="#cb65-206" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-207"><a href="#cb65-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generateTeamReviewReport</span>()<span class="op">:</span> TeamReviewReport {</span>
<span id="cb65-208"><a href="#cb65-208" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> metrics <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getTeamReviewMetrics</span>()<span class="op">;</span></span>
<span id="cb65-209"><a href="#cb65-209" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-210"><a href="#cb65-210" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb65-211"><a href="#cb65-211" aria-hidden="true" tabindex="-1"></a>      period<span class="op">:</span> <span class="st">&#39;last 30 days&#39;</span><span class="op">,</span></span>
<span id="cb65-212"><a href="#cb65-212" aria-hidden="true" tabindex="-1"></a>      reviewVelocity<span class="op">:</span> {</span>
<span id="cb65-213"><a href="#cb65-213" aria-hidden="true" tabindex="-1"></a>        averageTimeToFirstReview<span class="op">:</span> metrics<span class="op">.</span><span class="at">averageTimeToFirstReview</span><span class="op">,</span></span>
<span id="cb65-214"><a href="#cb65-214" aria-hidden="true" tabindex="-1"></a>        averageTimeToApproval<span class="op">:</span> metrics<span class="op">.</span><span class="at">averageTimeToApproval</span><span class="op">,</span></span>
<span id="cb65-215"><a href="#cb65-215" aria-hidden="true" tabindex="-1"></a>        reviewThroughput<span class="op">:</span> metrics<span class="op">.</span><span class="at">reviewsPerDay</span><span class="op">,</span></span>
<span id="cb65-216"><a href="#cb65-216" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb65-217"><a href="#cb65-217" aria-hidden="true" tabindex="-1"></a>      qualityMetrics<span class="op">:</span> {</span>
<span id="cb65-218"><a href="#cb65-218" aria-hidden="true" tabindex="-1"></a>        defectEscapeRate<span class="op">:</span> metrics<span class="op">.</span><span class="at">defectEscapeRate</span><span class="op">,</span></span>
<span id="cb65-219"><a href="#cb65-219" aria-hidden="true" tabindex="-1"></a>        reviewEffectiveness<span class="op">:</span> metrics<span class="op">.</span><span class="at">reviewEffectiveness</span><span class="op">,</span></span>
<span id="cb65-220"><a href="#cb65-220" aria-hidden="true" tabindex="-1"></a>        reworkRate<span class="op">:</span> metrics<span class="op">.</span><span class="at">reworkRate</span><span class="op">,</span></span>
<span id="cb65-221"><a href="#cb65-221" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb65-222"><a href="#cb65-222" aria-hidden="true" tabindex="-1"></a>      teamCollaboration<span class="op">:</span> {</span>
<span id="cb65-223"><a href="#cb65-223" aria-hidden="true" tabindex="-1"></a>        crossTeamReviews<span class="op">:</span> metrics<span class="op">.</span><span class="at">crossTeamReviews</span><span class="op">,</span></span>
<span id="cb65-224"><a href="#cb65-224" aria-hidden="true" tabindex="-1"></a>        knowledgeSharing<span class="op">:</span> metrics<span class="op">.</span><span class="at">knowledgeSharing</span><span class="op">,</span></span>
<span id="cb65-225"><a href="#cb65-225" aria-hidden="true" tabindex="-1"></a>        mentorshipActivity<span class="op">:</span> metrics<span class="op">.</span><span class="at">mentorshipActivity</span><span class="op">,</span></span>
<span id="cb65-226"><a href="#cb65-226" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb65-227"><a href="#cb65-227" aria-hidden="true" tabindex="-1"></a>      recommendations<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateTeamRecommendations</span>(metrics)<span class="op">,</span></span>
<span id="cb65-228"><a href="#cb65-228" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb65-229"><a href="#cb65-229" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-230"><a href="#cb65-230" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This completes Part II of our comprehensive frontend engineering
book. We’ve covered the critical production excellence aspects that
transform intermediate developers into senior engineers who can
confidently deploy and maintain enterprise-grade applications.</p>
<hr />
<h1 id="part-iii-enterprise-architecture">Part III: Enterprise
Architecture</h1>
<p><em>Building scalable, maintainable systems</em></p>
<hr />
<h1 id="chapter-10-enterprise-project-architecture">Chapter 10:
Enterprise Project Architecture 🔴</h1>
<p><em>Pages 91-105</em></p>
<h2 id="micro-frontend-architecture-mastery">Micro-Frontend Architecture
Mastery</h2>
<p>Enterprise applications require architectural patterns that enable
multiple teams to work independently while maintaining system coherence.
Micro-frontends represent the evolution of frontend architecture for
large-scale organizations.</p>
<h3 id="key-insight-conways-law-in-action">💡 Key Insight: Conway’s Law
in Action</h3>
<p>Your architecture will mirror your organizational structure.
Micro-frontends allow you to: - <strong>Scale teams
independently</strong> without stepping on each other - <strong>Deploy
features autonomously</strong> reducing coordination overhead -
<strong>Choose appropriate technologies</strong> for each domain -
<strong>Maintain domain boundaries</strong> that align with business
capabilities</p>
<h2 id="module-federation-implementation">Module Federation
Implementation</h2>
<div class="sourceCode" id="cb66"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Advanced Module Federation Configuration</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co">// webpack.config.js for Shell Application</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> ModuleFederationPlugin <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;@module-federation/webpack&#39;</span>)<span class="op">;</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  mode<span class="op">:</span> <span class="st">&#39;development&#39;</span><span class="op">,</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  entry<span class="op">:</span> <span class="st">&#39;./src/index.ts&#39;</span><span class="op">,</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>  plugins<span class="op">:</span> [</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">ModuleFederationPlugin</span>({</span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>      name<span class="op">:</span> <span class="st">&#39;shell&#39;</span><span class="op">,</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>      remotes<span class="op">:</span> {</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;user-management&#39;</span><span class="op">:</span> <span class="st">&#39;userManagement@http://localhost:3001/remoteEntry.js&#39;</span><span class="op">,</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;product-catalog&#39;</span><span class="op">:</span> <span class="st">&#39;productCatalog@http://localhost:3002/remoteEntry.js&#39;</span><span class="op">,</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;order-processing&#39;</span><span class="op">:</span> <span class="st">&#39;orderProcessing@http://localhost:3003/remoteEntry.js&#39;</span><span class="op">,</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;analytics-dashboard&#39;</span><span class="op">:</span> <span class="st">&#39;analyticsDashboard@http://localhost:3004/remoteEntry.js&#39;</span><span class="op">,</span></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>      shared<span class="op">:</span> {</span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;react&#39;</span><span class="op">:</span> { singleton<span class="op">:</span> <span class="kw">true</span><span class="op">,</span> requiredVersion<span class="op">:</span> <span class="st">&#39;^18.0.0&#39;</span> }<span class="op">,</span></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;react-dom&#39;</span><span class="op">:</span> { singleton<span class="op">:</span> <span class="kw">true</span><span class="op">,</span> requiredVersion<span class="op">:</span> <span class="st">&#39;^18.0.0&#39;</span> }<span class="op">,</span></span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;@company/design-system&#39;</span><span class="op">:</span> { singleton<span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;@company/shared-state&#39;</span><span class="op">:</span> { singleton<span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb67"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Dynamic Micro-Frontend Registry</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> MicroFrontendRegistry {</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> registry<span class="op">:</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> MicroFrontendConfig<span class="op">&gt;</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>()<span class="op">;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> loadingStates<span class="op">:</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">any</span><span class="op">&gt;&gt;</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>()<span class="op">;</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">registerMicroFrontend</span>(config<span class="op">:</span> MicroFrontendConfig)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">registry</span><span class="op">.</span><span class="fu">set</span>(config<span class="op">.</span><span class="at">name</span><span class="op">,</span> config)<span class="op">;</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Validate micro-frontend health</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">validateMicroFrontend</span>(config)<span class="op">;</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Pre-load if configured</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (config<span class="op">.</span><span class="at">preload</span>) {</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">preloadMicroFrontend</span>(config<span class="op">.</span><span class="at">name</span>)<span class="op">;</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">loadMicroFrontend</span>(name<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>React<span class="op">.</span><span class="at">ComponentType</span><span class="op">&gt;</span> {</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">loadingStates</span><span class="op">.</span><span class="fu">has</span>(name)) {</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">loadingStates</span><span class="op">.</span><span class="fu">get</span>(name)<span class="op">!;</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> config <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">registry</span><span class="op">.</span><span class="fu">get</span>(name)<span class="op">;</span></span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>config) {</span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`Micro-frontend </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs"> not registered`</span>)<span class="op">;</span></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> loadPromise <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">dynamicImport</span>(config)<span class="op">;</span></span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">loadingStates</span><span class="op">.</span><span class="fu">set</span>(name<span class="op">,</span> loadPromise)<span class="op">;</span></span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> loadPromise<span class="op">;</span></span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">dynamicImport</span>(config<span class="op">:</span> MicroFrontendConfig)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>React<span class="op">.</span><span class="at">ComponentType</span><span class="op">&gt;</span> {</span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Dynamic import with error handling</span></span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> <span class="im">module</span> = <span class="dt">await</span> <span class="dt">import</span>(<span class="dt">config</span>.<span class="dt">remoteEntry</span>)<span class="op">;</span></span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Validate loaded module</span></span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">validateLoadedModule</span>(<span class="im">module</span>, <span class="dt">config</span>)<span class="op">;</span></span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> module<span class="op">.</span><span class="at">default</span> <span class="op">||</span> <span class="im">module</span>[<span class="dt">config</span>.<span class="dt">componentName</span>]<span class="op">;</span></span>
<span id="cb67-43"><a href="#cb67-43" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (error) {</span>
<span id="cb67-44"><a href="#cb67-44" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Fallback to error boundary component</span></span>
<span id="cb67-45"><a href="#cb67-45" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="vs">`Failed to load micro-frontend </span><span class="sc">${</span>config<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">:`</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb67-46"><a href="#cb67-46" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createErrorFallback</span>(config<span class="op">.</span><span class="at">name</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb67-47"><a href="#cb67-47" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-48"><a href="#cb67-48" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb67-49"><a href="#cb67-49" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="domain-driven-design-for-frontend">Domain-Driven Design for
Frontend</h2>
<div class="sourceCode" id="cb68"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Domain-Driven Design Implementation</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> DomainBoundary {</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  capabilities<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  events<span class="op">:</span> DomainEvent[]<span class="op">;</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  aggregateRoots<span class="op">:</span> AggregateRoot[]<span class="op">;</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>  services<span class="op">:</span> DomainService[]<span class="op">;</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> UserManagementDomain <span class="kw">implements</span> DomainBoundary {</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>  name <span class="op">=</span> <span class="st">&#39;User Management&#39;</span><span class="op">;</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>  capabilities <span class="op">=</span> [</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;user-registration&#39;</span><span class="op">,</span></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;user-authentication&#39;</span><span class="op">,</span> </span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;profile-management&#39;</span><span class="op">,</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;permission-management&#39;</span><span class="op">,</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>  events <span class="op">=</span> [</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>    { name<span class="op">:</span> <span class="st">&#39;UserRegistered&#39;</span><span class="op">,</span> payload<span class="op">:</span> <span class="st">&#39;UserRegisteredPayload&#39;</span> }<span class="op">,</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>    { name<span class="op">:</span> <span class="st">&#39;UserLoggedIn&#39;</span><span class="op">,</span> payload<span class="op">:</span> <span class="st">&#39;UserLoggedInPayload&#39;</span> }<span class="op">,</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    { name<span class="op">:</span> <span class="st">&#39;PermissionsUpdated&#39;</span><span class="op">,</span> payload<span class="op">:</span> <span class="st">&#39;PermissionsUpdatedPayload&#39;</span> }<span class="op">,</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>  aggregateRoots <span class="op">=</span> [</span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">UserAggregate</span>()<span class="op">,</span></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PermissionAggregate</span>()<span class="op">,</span></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>  services <span class="op">=</span> [</span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">UserRegistrationService</span>()<span class="op">,</span></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">AuthenticationService</span>()<span class="op">,</span></span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PermissionService</span>()<span class="op">,</span></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="chapter-11-advanced-architecture-patterns">Chapter 11: Advanced
Architecture Patterns 🔴</h1>
<p><em>Pages 106-120</em></p>
<h2 id="hexagonal-architecture-in-frontend">Hexagonal Architecture in
Frontend</h2>
<div class="sourceCode" id="cb69"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Hexagonal Architecture Implementation</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> UserService {</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>(</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> userRepository<span class="op">:</span> UserRepository<span class="op">,</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> emailService<span class="op">:</span> EmailService<span class="op">,</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> eventBus<span class="op">:</span> EventBus</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  ) {}</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">createUser</span>(userData<span class="op">:</span> CreateUserRequest)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>User<span class="op">&gt;</span> {</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Business logic in the core</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> user <span class="op">=</span> <span class="kw">new</span> <span class="fu">User</span>(userData)<span class="op">;</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> user<span class="op">.</span><span class="fu">validate</span>()<span class="op">;</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Save through port</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> savedUser <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">userRepository</span><span class="op">.</span><span class="fu">save</span>(user)<span class="op">;</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send email through port</span></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">emailService</span><span class="op">.</span><span class="fu">sendWelcomeEmail</span>(savedUser)<span class="op">;</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Publish event</span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">eventBus</span><span class="op">.</span><span class="fu">publish</span>(<span class="kw">new</span> <span class="fu">UserCreatedEvent</span>(savedUser))<span class="op">;</span></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> savedUser<span class="op">;</span></span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a><span class="co">// Adapters implement the ports</span></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ApiUserRepository <span class="kw">implements</span> UserRepository {</span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">save</span>(user<span class="op">:</span> User)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>User<span class="op">&gt;</span> {</span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">&#39;/api/users&#39;</span><span class="op">,</span> {</span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>      method<span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>      body<span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(user<span class="op">.</span><span class="fu">toJSON</span>())<span class="op">,</span></span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> User<span class="op">.</span><span class="fu">fromJSON</span>(<span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>())<span class="op">;</span></span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="event-driven-architecture">Event-Driven Architecture</h2>
<div class="sourceCode" id="cb70"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">// CQRS Implementation</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> CommandHandler {</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">handle</span>(command<span class="op">:</span> Command)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (command<span class="op">.</span><span class="at">type</span>) {</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;CreateUser&#39;</span><span class="op">:</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">handleCreateUser</span>(command <span class="im">as</span> CreateUserCommand)<span class="op">;</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;UpdateUser&#39;</span><span class="op">:</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">handleUpdateUser</span>(command <span class="im">as</span> UpdateUserCommand)<span class="op">;</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> QueryHandler {</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">handle</span>(query<span class="op">:</span> Query)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">any</span><span class="op">&gt;</span> {</span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (query<span class="op">.</span><span class="at">type</span>) {</span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;GetUsers&#39;</span><span class="op">:</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">handleGetUsers</span>(query <span class="im">as</span> GetUsersQuery)<span class="op">;</span></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;GetUserDetails&#39;</span><span class="op">:</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">handleGetUserDetails</span>(query <span class="im">as</span> GetUserDetailsQuery)<span class="op">;</span></span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="chapter-12-devops-deployment-excellence">Chapter 12: DevOps
&amp; Deployment Excellence 🔴</h1>
<p><em>Pages 121-135</em></p>
<h2 id="gitops-implementation">GitOps Implementation</h2>
<div class="sourceCode" id="cb71"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">// GitOps Configuration</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> GitOpsManager {</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">deployApplication</span>(config<span class="op">:</span> DeploymentConfig)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>DeploymentResult<span class="op">&gt;</span> {</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Validate configuration</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">validateConfig</span>(config)<span class="op">;</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Apply infrastructure as code</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">applyInfrastructure</span>(config)<span class="op">;</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Deploy application</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">deployWithArgoCD</span>(config)<span class="op">;</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verify deployment</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">verifyDeployment</span>(result)<span class="op">;</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="progressive-delivery">Progressive Delivery</h2>
<div class="sourceCode" id="cb72"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Canary Deployment Implementation</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> CanaryDeployment {</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">deploy</span>(version<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> canaryPercentage<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">5</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Deploy canary version</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">deployCanary</span>(version<span class="op">,</span> canaryPercentage)<span class="op">;</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Monitor metrics</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> metrics <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">monitorCanary</span>(version)<span class="op">;</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Auto-promote or rollback based on metrics</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (metrics<span class="op">.</span><span class="at">successRate</span> <span class="op">&gt;</span> <span class="fl">0.99</span> <span class="op">&amp;&amp;</span> metrics<span class="op">.</span><span class="at">errorRate</span> <span class="op">&lt;</span> <span class="fl">0.01</span>) {</span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">promoteCanary</span>(version)<span class="op">;</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">rollbackCanary</span>(version)<span class="op">;</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="part-iv-advanced-engineering-leadership">Part IV: Advanced
Engineering Leadership</h1>
<p><em>The path to senior and staff engineering roles</em></p>
<hr />
<h1 id="chapter-13-observability-intelligence">Chapter 13: Observability
&amp; Intelligence 🔴</h1>
<p><em>Pages 136-150</em></p>
<h2 id="opentelemetry-integration">OpenTelemetry Integration</h2>
<div class="sourceCode" id="cb73"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Enterprise Observability Setup</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ObservabilityManager {</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> tracer<span class="op">:</span> Tracer<span class="op">;</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> metrics<span class="op">:</span> Metrics<span class="op">;</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> logger<span class="op">:</span> Logger<span class="op">;</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">constructor</span>() {</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">initializeOpenTelemetry</span>()<span class="op">;</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="fu">initializeOpenTelemetry</span>()<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Configure tracing</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">tracer</span> <span class="op">=</span> trace<span class="op">.</span><span class="fu">getTracer</span>(<span class="st">&#39;frontend-app&#39;</span>)<span class="op">;</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Configure metrics</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">metrics</span> <span class="op">=</span> metrics<span class="op">.</span><span class="fu">getMeter</span>(<span class="st">&#39;frontend-app&#39;</span>)<span class="op">;</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Configure logging</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">logger</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">Logger</span>({</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>      level<span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>      format<span class="op">:</span> <span class="st">&#39;json&#39;</span><span class="op">,</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>      transports<span class="op">:</span> [</span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">ConsoleTransport</span>()<span class="op">,</span></span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">OTLPTransport</span>()<span class="op">,</span></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">traceUserAction</span>(action<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> fn<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">any</span><span class="op">&gt;</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">any</span><span class="op">&gt;</span> {</span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">tracer</span><span class="op">.</span><span class="fu">startActiveSpan</span>(action<span class="op">,</span> <span class="kw">async</span> (span) <span class="kw">=&gt;</span> {</span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a>      <span class="cf">try</span> {</span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="fu">fn</span>()<span class="op">;</span></span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a>        span<span class="op">.</span><span class="fu">setStatus</span>({ code<span class="op">:</span> SpanStatusCode<span class="op">.</span><span class="at">OK</span> })<span class="op">;</span></span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">catch</span> (error) {</span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a>        span<span class="op">.</span><span class="fu">recordException</span>(error <span class="im">as</span> <span class="bu">Error</span>)<span class="op">;</span></span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a>        span<span class="op">.</span><span class="fu">setStatus</span>({ code<span class="op">:</span> SpanStatusCode<span class="op">.</span><span class="at">ERROR</span> })<span class="op">;</span></span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> error<span class="op">;</span></span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">finally</span> {</span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a>        span<span class="op">.</span><span class="fu">end</span>()<span class="op">;</span></span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="ai-powered-monitoring">AI-Powered Monitoring</h2>
<div class="sourceCode" id="cb74"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Intelligent Anomaly Detection</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> AnomalyDetector {</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> model<span class="op">:</span> TensorFlowModel<span class="op">;</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">detectAnomalies</span>(metrics<span class="op">:</span> MetricData[])<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>AnomalyResult[]<span class="op">&gt;</span> {</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> predictions <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">model</span><span class="op">.</span><span class="fu">predict</span>(metrics)<span class="op">;</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> predictions<span class="op">.</span><span class="fu">map</span>((prediction<span class="op">,</span> index) <span class="kw">=&gt;</span> ({</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>      metric<span class="op">:</span> metrics[index]<span class="op">,</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>      isAnomaly<span class="op">:</span> prediction<span class="op">.</span><span class="at">confidence</span> <span class="op">&gt;</span> <span class="fl">0.8</span><span class="op">,</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>      confidence<span class="op">:</span> prediction<span class="op">.</span><span class="at">confidence</span><span class="op">,</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>      suggestedActions<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateActions</span>(prediction)<span class="op">,</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    }))<span class="op">;</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="chapter-14-performance-engineering-mastery">Chapter 14:
Performance Engineering Mastery 🔴</h1>
<p><em>Pages 151-165</em></p>
<h2 id="advanced-bundle-optimization">Advanced Bundle Optimization</h2>
<div class="sourceCode" id="cb75"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Intelligent Code Splitting</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> IntelligentBundler {</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">optimizeBundle</span>(analysisData<span class="op">:</span> BundleAnalysis)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>OptimizationResult<span class="op">&gt;</span> {</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Analyze usage patterns</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> usagePatterns <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeUsagePatterns</span>()<span class="op">;</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Apply ML-based splitting</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> splitStrategy <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateOptimalSplits</span>(usagePatterns)<span class="op">;</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate optimized bundle configuration</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateOptimizedConfig</span>(splitStrategy)<span class="op">;</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="edge-computing-integration">Edge Computing Integration</h2>
<div class="sourceCode" id="cb76"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Edge Function Implementation</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> EdgePerformanceOptimizer {</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">optimizeForEdge</span>(request<span class="op">:</span> Request)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>Response<span class="op">&gt;</span> {</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Geographic optimization</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> userLocation <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">detectUserLocation</span>(request)<span class="op">;</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// CDN optimization</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> optimizedResponse <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">optimizeForCDN</span>(request<span class="op">,</span> userLocation)<span class="op">;</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> optimizedResponse<span class="op">;</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h1 id="chapter-15-career-advancement-leadership">Chapter 15: Career
Advancement &amp; Leadership 🔴</h1>
<p><em>Pages 166-180</em></p>
<h2 id="senior-engineer-interview-mastery">Senior Engineer Interview
Mastery</h2>
<h3 id="system-design-excellence">System Design Excellence</h3>
<div class="sourceCode" id="cb77"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">// System Design Template</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> SystemDesignApproach {</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  requirements<span class="op">:</span> {</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    functional<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    nonFunctional<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    constraints<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>  architecture<span class="op">:</span> {</span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>    highLevel<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>    components<span class="op">:</span> Component[]<span class="op">;</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>    dataFlow<span class="op">:</span> DataFlow[]<span class="op">;</span></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>  scalability<span class="op">:</span> {</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>    bottlenecks<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>    solutions<span class="op">:</span> Solution[]<span class="op">;</span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">:</span> PerformanceMetric[]<span class="op">;</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a>  implementation<span class="op">:</span> {</span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a>    technology<span class="op">:</span> TechStack<span class="op">;</span></span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a>    deployment<span class="op">:</span> DeploymentStrategy<span class="op">;</span></span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a>    monitoring<span class="op">:</span> MonitoringStrategy<span class="op">;</span></span>
<span id="cb77-25"><a href="#cb77-25" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb77-26"><a href="#cb77-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="technical-leadership">Technical Leadership</h3>
<div class="sourceCode" id="cb78"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Leadership Framework</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> TechnicalLeadership {</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mentorJuniorDeveloper</span>(developer<span class="op">:</span> Developer)<span class="op">:</span> MentorshipPlan {</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>      goals<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">defineGrowthGoals</span>(developer)<span class="op">,</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>      milestones<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createMilestones</span>(developer)<span class="op">,</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>      resources<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">recommendResources</span>(developer)<span class="op">,</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>      feedback<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setupFeedbackLoop</span>(developer)<span class="op">,</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">driveArchitecturalDecision</span>(context<span class="op">:</span> DecisionContext)<span class="op">:</span> ArchitecturalDecision {</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>      analysis<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeOptions</span>(context)<span class="op">,</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>      recommendation<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">recommendSolution</span>(context)<span class="op">,</span></span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>      implementation<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">planImplementation</span>(context)<span class="op">,</span></span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>      validation<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">defineValidationCriteria</span>(context)<span class="op">,</span></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="building-high-performance-teams">Building High-Performance
Teams</h2>
<div class="sourceCode" id="cb79"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Team Performance Framework</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> TeamPerformanceManager {</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">optimizeTeamVelocity</span>(team<span class="op">:</span> Team)<span class="op">:</span> VelocityOptimization {</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> bottlenecks <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">identifyBottlenecks</span>(team)<span class="op">;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> solutions <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateSolutions</span>(bottlenecks)<span class="op">;</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>      currentVelocity<span class="op">:</span> team<span class="op">.</span><span class="at">velocity</span><span class="op">,</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>      targetVelocity<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateTargetVelocity</span>(team)<span class="op">,</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>      optimizations<span class="op">:</span> solutions<span class="op">,</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>      timeline<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">createOptimizationTimeline</span>(solutions)<span class="op">,</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fossterInnovation</span>(team<span class="op">:</span> Team)<span class="op">:</span> InnovationProgram {</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>      hackathons<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">scheduleHackathons</span>()<span class="op">,</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>      learningTime<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">allocateLearningTime</span>()<span class="op">,</span></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>      experiments<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">defineExperiments</span>()<span class="op">,</span></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>      knowledgeSharing<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setupKnowledgeSharing</span>()<span class="op">,</span></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="conclusion-your-journey-to-excellence">Conclusion: Your Journey
to Excellence</h2>
<p>Congratulations! You’ve completed a comprehensive journey through
enterprise frontend engineering. You now possess:</p>
<h3 id="technical-mastery">Technical Mastery</h3>
<ul>
<li><strong>Production-ready mindset</strong> that prioritizes
reliability and user experience</li>
<li><strong>Advanced architectural patterns</strong> for building
scalable systems</li>
<li><strong>Comprehensive testing strategies</strong> that ensure
quality</li>
<li><strong>Performance optimization techniques</strong> that deliver
exceptional user experiences</li>
</ul>
<h3 id="leadership-skills">Leadership Skills</h3>
<ul>
<li><strong>Mentorship abilities</strong> to grow other engineers</li>
<li><strong>Technical decision-making</strong> that balances trade-offs
effectively</li>
<li><strong>Cross-functional collaboration</strong> that drives business
outcomes</li>
<li><strong>Strategic thinking</strong> that aligns technical decisions
with business goals</li>
</ul>
<h3 id="career-readiness">Career Readiness</h3>
<ul>
<li><strong>Interview preparation</strong> for senior and staff
roles</li>
<li><strong>Portfolio projects</strong> that demonstrate enterprise
experience</li>
<li><strong>Communication skills</strong> to influence stakeholders at
all levels</li>
<li><strong>Continuous learning mindset</strong> to stay current with
evolving technologies</li>
</ul>
<h3 id="your-next-steps">Your Next Steps</h3>
<ol type="1">
<li><strong>Apply these concepts</strong> in your current role</li>
<li><strong>Mentor others</strong> to solidify your own
understanding</li>
<li><strong>Contribute to open source</strong> to demonstrate your
skills</li>
<li><strong>Build a portfolio</strong> showcasing enterprise-grade
projects</li>
<li><strong>Network with other senior engineers</strong> to learn and
grow</li>
<li><strong>Stay curious</strong> and continue learning new
technologies</li>
</ol>
<h3 id="the-impact-youll-make-1">The Impact You’ll Make</h3>
<p>As a senior frontend engineer, you’ll: - <strong>Improve user
experiences</strong> for millions of users - <strong>Accelerate team
productivity</strong> through excellent practices - <strong>Drive
business growth</strong> with reliable, scalable systems - <strong>Shape
the future</strong> of web development</p>
<p>The path from intermediate to senior engineer is challenging but
rewarding. You now have the knowledge, skills, and mindset to excel in
any enterprise environment.</p>
<p><strong>Go forth and build amazing things!</strong> 🚀</p>
<hr />
<p><em>“Excellence is not a destination, but a journey of continuous
improvement and learning.”</em></p>
<hr />
<h1 id="appendices">Appendices</h1>
<p><em>Quick reference guides and resources</em></p>
<hr />
<h2 id="appendix-a-technology-stack-reference-1">Appendix A: Technology
Stack Reference</h2>
<h3 id="core-technologies">Core Technologies</h3>
<p><strong>Frontend Framework</strong> - React 19 with Server Components
- Next.js 15 with App Router - TypeScript 5.0+ with strict mode</p>
<p><strong>State Management</strong> - Redux Toolkit with RTK Query -
Zustand for component state - React Query for server state</p>
<p><strong>Testing</strong> - Vitest for unit testing - React Testing
Library - Playwright for E2E testing - Storybook for component
testing</p>
<p><strong>Build Tools</strong> - Vite for development - Webpack 5 for
production - Module Federation for micro-frontends</p>
<p><strong>Monitoring &amp; Observability</strong> - OpenTelemetry for
tracing - Sentry for error tracking - DataDog for monitoring - LogRocket
for session replay</p>
<hr />
<h2 id="appendix-b-performance-optimization-checklist-1">Appendix B:
Performance Optimization Checklist</h2>
<h3 id="core-web-vitals-optimization">Core Web Vitals Optimization</h3>
<p><strong>Largest Contentful Paint (LCP)</strong> - [ ] Optimize images
with WebP/AVIF - [ ] Implement resource preloading - [ ] Use CDN for
static assets - [ ] Optimize server response times - [ ] Eliminate
render-blocking resources</p>
<p><strong>Interaction to Next Paint (INP)</strong> - [ ] Implement code
splitting - [ ] Use Web Workers for heavy computations - [ ] Optimize
JavaScript bundle size - [ ] Minimize main thread blocking</p>
<p><strong>Cumulative Layout Shift (CLS)</strong> - [ ] Set size
attributes for images - [ ] Reserve space for dynamic content - [ ] Use
CSS containment - [ ] Avoid inserting content above existing content</p>
<h3 id="bundle-optimization">Bundle Optimization</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Enable tree shaking</label></li>
<li><label><input type="checkbox" />Implement dynamic
imports</label></li>
<li><label><input type="checkbox" />Use Module Federation for
micro-frontends</label></li>
<li><label><input type="checkbox" />Compress assets with
gzip/brotli</label></li>
<li><label><input type="checkbox" />Monitor bundle size in
CI/CD</label></li>
</ul>
<hr />
<h2 id="appendix-c-security-best-practices-checklist-1">Appendix C:
Security Best Practices Checklist</h2>
<h3 id="authentication-authorization">Authentication &amp;
Authorization</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Implement WebAuthn for passwordless
authentication</label></li>
<li><label><input type="checkbox" />Use JWT tokens with short
expiration</label></li>
<li><label><input type="checkbox" />Implement proper session
management</label></li>
<li><label><input type="checkbox" />Use HTTPS everywhere</label></li>
<li><label><input type="checkbox" />Implement CSRF
protection</label></li>
</ul>
<h3 id="content-security-policy">Content Security Policy</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Configure strict CSP
headers</label></li>
<li><label><input type="checkbox" />Use nonces for inline
scripts</label></li>
<li><label><input type="checkbox" />Implement CSP violation
reporting</label></li>
<li><label><input type="checkbox" />Regular CSP policy
updates</label></li>
</ul>
<h3 id="input-validation">Input Validation</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Validate all user
inputs</label></li>
<li><label><input type="checkbox" />Sanitize data before
rendering</label></li>
<li><label><input type="checkbox" />Use parameterized
queries</label></li>
<li><label><input type="checkbox" />Implement rate limiting</label></li>
</ul>
<h3 id="dependency-management">Dependency Management</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Regular dependency
updates</label></li>
<li><label><input type="checkbox" />Security vulnerability
scanning</label></li>
<li><label><input type="checkbox" />Use lock files for reproducible
builds</label></li>
<li><label><input type="checkbox" />Monitor for known
vulnerabilities</label></li>
</ul>
<hr />
<h2 id="appendix-d-code-review-guidelines-1">Appendix D: Code Review
Guidelines</h2>
<h3 id="what-to-look-for">What to Look For</h3>
<p><strong>Code Quality</strong> - [ ] Single responsibility principle -
[ ] Meaningful variable/function names - [ ] Appropriate comments - [ ]
Error handling implemented - [ ] No code duplication</p>
<p><strong>Testing</strong> - [ ] Unit tests for business logic - [ ]
Integration tests for workflows - [ ] Test coverage &gt; 80% - [ ] Tests
are readable and maintainable</p>
<p><strong>Performance</strong> - [ ] No unnecessary re-renders - [ ]
Efficient algorithms used - [ ] Proper memoization - [ ] Bundle size
impact considered</p>
<p><strong>Security</strong> - [ ] No hardcoded secrets - [ ] Input
validation present - [ ] Proper error handling - [ ] OWASP guidelines
followed</p>
<h3 id="giving-feedback">Giving Feedback</h3>
<p><strong>Be Constructive</strong> - Explain the “why” behind
suggestions - Provide examples of better approaches - Link to
documentation/resources - Acknowledge good practices</p>
<p><strong>Be Specific</strong> - Point to exact lines/functions -
Suggest concrete improvements - Provide code examples - Explain the
impact of changes</p>
<hr />
<h2 id="appendix-e-interview-preparation-resources-1">Appendix E:
Interview Preparation Resources</h2>
<h3 id="system-design-topics">System Design Topics</h3>
<p><strong>Common Questions</strong> - Design a real-time chat
application - Design a social media feed - Design an e-commerce product
catalog - Design a collaborative document editor</p>
<p><strong>Key Concepts to Study</strong> - Scalability patterns -
Database design - Caching strategies - Load balancing - Microservices
architecture</p>
<h3 id="coding-challenges">Coding Challenges</h3>
<p><strong>Frontend-Specific Patterns</strong> - Component design and
architecture - State management patterns - Performance optimization -
Accessibility implementation - Testing strategies</p>
<p><strong>Practice Platforms</strong> - LeetCode Frontend Questions -
Frontend Mentor - Codepen Challenges - React Coding Challenges</p>
<h3 id="behavioral-questions">Behavioral Questions</h3>
<p><strong>Preparation Framework (STAR Method)</strong> -
<strong>Situation</strong>: Set the context - <strong>Task</strong>:
Describe your responsibility - <strong>Action</strong>: Explain what you
did - <strong>Result</strong>: Share the outcome</p>
<p><strong>Common Question Categories</strong> - Technical leadership
examples - Conflict resolution situations - Project management
experiences - Mentorship and team building - Innovation and
problem-solving</p>
<hr />
<h2 id="appendix-f-further-reading-and-resources-1">Appendix F: Further
Reading and Resources</h2>
<h3 id="books">Books</h3>
<p><strong>Technical Skills</strong> - “Designing Data-Intensive
Applications” by Martin Kleppmann - “Building Micro-Frontends” by Luca
Mezzalira - “React Design Patterns and Best Practices” by Carlos Santana
Roldán</p>
<p><strong>Leadership &amp; Career</strong> - “The Staff Engineer’s
Path” by Tanya Reilly - “The Manager’s Path” by Camille Fournier -
“Clean Code” by Robert C. Martin</p>
<h3 id="online-resources">Online Resources</h3>
<p><strong>Documentation</strong> - React Official Documentation -
TypeScript Handbook - Web.dev Performance Guides - MDN Web Docs</p>
<p><strong>Communities</strong> - React DevTools Discord - Frontend
Masters Community - Dev.to Frontend Community - Reddit r/reactjs</p>
<p><strong>Newsletters &amp; Blogs</strong> - JavaScript Weekly - React
Status - Frontend Focus - Kent C. Dodds Blog</p>
<h3 id="tools-utilities">Tools &amp; Utilities</h3>
<p><strong>Development</strong> - VS Code Extensions for
React/TypeScript - React Developer Tools - Redux DevTools - Chrome
Lighthouse</p>
<p><strong>Testing</strong> - Testing Library Documentation - Playwright
Documentation - Jest Documentation - Cypress Documentation</p>
<p><strong>Performance</strong> - WebPageTest - GTmetrix - Chrome
DevTools - Lighthouse CI</p>
<h3 id="conferences-events">Conferences &amp; Events</h3>
<p><strong>Major Conferences</strong> - React Conf - Next.js Conf -
JSConf - Frontend Masters Live</p>
<p><strong>Online Learning</strong> - Frontend Masters - Pluralsight -
Udemy - Coursera</p>
<hr />
<h2 id="quick-reference-cards">Quick Reference Cards</h2>
<h3 id="git-commands">Git Commands</h3>
<div class="sourceCode" id="cb80"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature branch workflow</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> feature/feature-name</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;feat: add new feature&quot;</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin feature/feature-name</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Code review workflow</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> fetch origin</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout main</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull origin main</span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout feature/feature-name</span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> rebase main</span></code></pre></div>
<h3 id="testing-commands">Testing Commands</h3>
<div class="sourceCode" id="cb81"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unit tests</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run test</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run test:watch</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run test:coverage</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="co"># E2E tests</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run test:e2e</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run test:e2e:headed</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run test:e2e:debug</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Visual tests</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run chromatic</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run storybook</span></code></pre></div>
<h3 id="performance-commands">Performance Commands</h3>
<div class="sourceCode" id="cb82"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bundle analysis</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run analyze</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run lighthouse</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run webpagetest</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Performance monitoring</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run perf:monitor</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run perf:budget</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run perf:report</span></code></pre></div>
<h3 id="deployment-commands">Deployment Commands</h3>
<div class="sourceCode" id="cb83"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Production deployment</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run deploy:prod</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run deploy:staging</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Health checks</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run health:check</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run health:monitor</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run health:report</span></code></pre></div>
<hr />
<p><em>This completes your comprehensive guide to frontend engineering
excellence. Use these appendices as quick references throughout your
career journey.</em></p>
</body>
</html>
